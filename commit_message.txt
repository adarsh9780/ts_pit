fix(agent_v3): stop planner recursion and restore planner visibility in stream fallback

- preserve `replan_attempts` in planner output instead of resetting to 0 each run
  - fixes master retry-cap bypass that could trigger infinite plan/replan loops
  - addresses `GraphRecursionError: Recursion limit of 25 reached`
- allow planner ephemeral output to be surfaced by SSE fallback extraction
  - keeps internal validator/rewriter ephemeral messages hidden
- no changes to tool execution semantics

---

feat(agent-ui): surface draft updates as muted ribbons and keep validator hidden by default

- SSE: emit `draft_update` events for ephemeral outputs from `respond` and `answer_rewriter`
- SSE: keep `answer_validator` hidden unless debug stream is enabled (`?debug=1` or `x-agent-debug: true`)
- keep planner output visible via fallback path
- frontend: handle `draft_update` in `useAgentChat` and store as `segment.type='draft'`
- frontend: render draft segments as muted ribbons in `AgentPanelFeature.vue`
