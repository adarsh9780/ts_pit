import{a as Ge,_ as ct,o as P,c as sa,w as ei,b as E,d as w,t as G,e as oe,T as Rs,f as Ne,g as M,V as Os,m as re,h as se,i as ke,j as $e,r as ue,s as Zu,k as ve,l as st,n as Ns,p as Xu,D as Yu,q as Ei,S as qu,u as Ku,v as Wa,x as J,y as we,z as Ea,M as bt,A as ju,B as _e,C as Qu,E as kt,F as ti,G as Ju,H as ec,I as Ri,J as Be,K as tc,L as rc,N as at,O as fe,P as Bs,Q as ac,R as nc,U as De,W as Ra,X as $s,Y as ic,Z as oc,$ as X,a0 as sc,a1 as Sn,a2 as Oa,a3 as Me,a4 as zs,a5 as Oi,a6 as lc,a7 as aa,a8 as uc,a9 as wn,aa as Oe,ab as la,ac as Xe,ad as Gs,ae as Hs,af as na,ag as Ni,ah as cc,ai as hc,aj as vc,ak as lt,al as kn,am as fc,an as dc,ao as pc,ap as gc,aq as mc,ar as yc,as as _c,at as bc,au as xc,av as Sc,aw as wc,ax as kc,ay as Ac,az as Cc,aA as Dc,aB as An,aC as ua,aD as Lc,aE as St,aF as Nt,aG as At,aH as ot,aI as Tc,aJ as Ic,aK as Mc,aL as Pc,aM as Ec,aN as Rc,aO as Oc,aP as Nc,aQ as Bc,aR as $c,aS as zc,aT as Gc,aU as Hc,aV as Fc,aW as Vc,aX as Fs,aY as Wc,aZ as Bi,a_ as Vs,a$ as ca,b0 as Ws,b1 as Nr,b2 as Cn,b3 as Uc,b4 as Us,b5 as ze,b6 as Dn,b7 as Zc,b8 as Zs,b9 as Xc,ba as Yc,bb as qc,bc as Kc,bd as jc,be as Br,bf as Qc,bg as Jc,bh as Le,bi as Ie,bj as eh,bk as $r,bl as Ae,bm as Bt,bn as Q,bo as $i,bp as Xs,bq as Ys,br as Pe,bs as ri,bt as Je,bu as Ht,bv as Na,bw as th,bx as Qt,by as $t,bz as me,bA as zi,bB as ai,bC as Ba,bD as rh,bE as Gi,bF as Tt,bG as Hi,bH as qe,bI as ni,bJ as Xt,bK as Sr,bL as Ln,bM as Fi,bN as Ct,bO as ah,bP as qs,bQ as nh,bR as ha,bS as ih,bT as Ks,bU as Vi,bV as Ua,bW as oh,bX as sh,bY as ii,bZ as va,b_ as oi,b$ as lh,c0 as js,c1 as Yt,c2 as uh,c3 as wr,c4 as Qs,c5 as nt,c6 as $a,c7 as si,c8 as kr,c9 as fa,ca as Js,cb as li,cc as Wi,cd as ch,ce as hh,cf as da,cg as el,ch as Ar,ci as vh,cj as fh,ck as Zt,cl as pa,cm as Ui,cn as Zi,co as dh,cp as ph,cq as tl,cr as gh,cs as Za,ct as mh,cu as rl,cv as al,cw as Tn,cx as yh,cy as _h,cz as bh,cA as ui,cB as nl,cC as Xi,cD as xh,cE as Sh,cF as wh,cG as il,cH as kh,cI as Ah,cJ as Ch,cK as ga,cL as Dh,cM as Xa,cN as Yi,cO as qi,cP as Lh,cQ as Th,cR as Ih,cS as Mh,cT as Ki,cU as ol,cV as Ph,cW as ma,cX as Eh,cY as Rh,cZ as Oh,c_ as Nh,c$ as sl,d0 as ji,d1 as Qi,d2 as Ji,d3 as Bh,d4 as $h,d5 as zh,d6 as Gh,d7 as eo,d8 as yr,d9 as Hh,da as Fh,db as xe,dc as ye,dd as de,de as Se,df as Vh,dg as Wh,dh as qt,di as je,dj as H,dk as _r,dl as In,dm as Uh,dn as pr,dp as ya,dq as ll,dr as _t,ds as ul,dt as Zh,du as to}from"./index-CBTvGgF5.js";const cl="http://localhost:8000",hl=async()=>(await Ge.config.getConfigEndpointConfigGet()).data,Xh=async(r={})=>(await Ge.alerts.getAlertsAlertsGet(r)).data,Yh=async(r,e)=>(await Ge.alerts.updateAlertStatusAlertsAlertIdStatusPatch(r,{status:e})).data,vl=async r=>(await Ge.alerts.getAlertDetailAlertsAlertIdGet(r)).data,qh=async r=>(await Ge.articles.analyzeArticleArticlesIdAnalyzePost(r)).data,Kh=async r=>(await Ge.alerts.generateSummaryAlertsAlertIdSummaryPost(r)).data,jh=async(r,e={})=>(await Ge.prices.getPricesPricesTickerGet(r,e)).data,Qh=async(r,e={})=>(await Ge.news.getNewsNewsIsinGet(r,e)).data,Jh=async r=>(await Ge.agent.getChatHistoryAgentHistorySessionIdGet(r)).data,ev=async r=>(await Ge.agent.deleteChatHistoryAgentHistorySessionIdDelete(r)).data,tv=async r=>(await Ge.reports.uploadChartSnapshotReportsChartSnapshotPost(r)).data,rv=async r=>(await Ge.artifacts.listSessionArtifactsArtifactsSessionIdGet(r)).data,av=()=>`${cl}/agent/chat`,nv=(r,e)=>{const t=new URL(`${cl}/artifacts/${r}/download`);return t.searchParams.set("path",e),t.toString()},iv={key:0,class:"modal-overlay"},ov={class:"modal-container"},sv={class:"modal-header"},lv={class:"modal-body"},uv={key:0,class:"modal-footer"},cv={__name:"ConfirmDialog",props:{isOpen:Boolean,title:{type:String,default:"Confirm Action"},message:{type:String,default:"Are you sure you want to proceed?"},confirmText:{type:String,default:"Confirm"},cancelText:{type:String,default:"Cancel"},showButtons:{type:Boolean,default:!0}},emits:["confirm","cancel"],setup(r,{emit:e}){return(t,a)=>(P(),sa(Rs,{name:"fade"},{default:ei(()=>[r.isOpen?(P(),E("div",iv,[w("div",ov,[w("div",sv,[w("h3",null,G(r.title),1)]),w("div",lv,[w("p",null,G(r.message),1)]),r.showButtons?(P(),E("div",uv,[w("button",{class:"btn btn-cancel",onClick:a[0]||(a[0]=n=>t.$emit("cancel"))},G(r.cancelText),1),w("button",{class:"btn btn-confirm",onClick:a[1]||(a[1]=n=>t.$emit("confirm"))},G(r.confirmText),1)])):oe("",!0)])])):oe("",!0)]),_:1}))}},fl=ct(cv,[["__scopeId","data-v-ba3f84d8"]]);function ir(r){return r==null?0:r.length||1}function ro(r){return r}var hv=(function(){function r(e,t,a,n,i,o){this._old=e,this._new=t,this._oldKeyGetter=a||ro,this._newKeyGetter=n||ro,this.context=i,this._diffModeMultiple=o==="multiple"}return r.prototype.add=function(e){return this._add=e,this},r.prototype.update=function(e){return this._update=e,this},r.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},r.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},r.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},r.prototype.remove=function(e){return this._remove=e,this},r.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},r.prototype._executeOneToOne=function(){var e=this._old,t=this._new,a={},n=new Array(e.length),i=new Array(t.length);this._initIndexMap(e,null,n,"_oldKeyGetter"),this._initIndexMap(t,a,i,"_newKeyGetter");for(var o=0;o<e.length;o++){var l=n[o],s=a[l],u=ir(s);if(u>1){var c=s.shift();s.length===1&&(a[l]=s[0]),this._update&&this._update(c,o)}else u===1?(a[l]=null,this._update&&this._update(s,o)):this._remove&&this._remove(o)}this._performRestAdd(i,a)},r.prototype._executeMultiple=function(){var e=this._old,t=this._new,a={},n={},i=[],o=[];this._initIndexMap(e,a,i,"_oldKeyGetter"),this._initIndexMap(t,n,o,"_newKeyGetter");for(var l=0;l<i.length;l++){var s=i[l],u=a[s],c=n[s],h=ir(u),v=ir(c);if(h>1&&v===1)this._updateManyToOne&&this._updateManyToOne(c,u),n[s]=null;else if(h===1&&v>1)this._updateOneToMany&&this._updateOneToMany(c,u),n[s]=null;else if(h===1&&v===1)this._update&&this._update(c,u),n[s]=null;else if(h>1&&v>1)this._updateManyToMany&&this._updateManyToMany(c,u),n[s]=null;else if(h>1)for(var f=0;f<h;f++)this._remove&&this._remove(u[f]);else this._remove&&this._remove(u)}this._performRestAdd(o,n)},r.prototype._performRestAdd=function(e,t){for(var a=0;a<e.length;a++){var n=e[a],i=t[n],o=ir(i);if(o>1)for(var l=0;l<o;l++)this._add&&this._add(i[l]);else o===1&&this._add&&this._add(i);t[n]=null}},r.prototype._initIndexMap=function(e,t,a,n){for(var i=this._diffModeMultiple,o=0;o<e.length;o++){var l="_ec_"+this[n](e[o],o);if(i||(a[o]=l),!!t){var s=t[l],u=ir(s);u===0?(t[l]=o,i&&a.push(l)):u===1?t[l]=[s,o]:s.push(o)}}},r})(),vv=(function(){function r(e,t){this._encode=e,this._schema=t}return r.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},r.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},r})();function fv(r,e){var t={},a=t.encode={},n=Ne(),i=[],o=[],l={};M(r.dimensions,function(v){var f=r.getDimensionInfo(v),d=f.coordDim;if(d){var p=f.coordDimIndex;Ya(a,d)[p]=v,f.isExtraCoord||(n.set(d,1),dv(f.type)&&(i[0]=v),Ya(l,d)[p]=r.getDimensionIndex(f.name)),f.defaultTooltip&&o.push(v)}Os.each(function(y,g){var m=Ya(a,g),_=f.otherDims[g];_!=null&&_!==!1&&(m[_]=f.name)})});var s=[],u={};n.each(function(v,f){var d=a[f];u[f]=d[0],s=s.concat(d)}),t.dataDimsOnCoord=s,t.dataDimIndicesOnCoord=re(s,function(v){return r.getDimensionInfo(v).storeDimIndex}),t.encodeFirstDimNotExtra=u;var c=a.label;c&&c.length&&(i=c.slice());var h=a.tooltip;return h&&h.length?o=h.slice():o.length||(o=i.slice()),a.defaultedLabel=i,a.defaultedTooltip=o,t.userOutput=new vv(l,e),t}function Ya(r,e){return r.hasOwnProperty(e)||(r[e]=[]),r[e]}function Mn(r){return r==="category"?"ordinal":r==="time"?"time":"float"}function dv(r){return!(r==="ordinal"||r==="time")}var ia=(function(){function r(e){this.otherDims={},e!=null&&se(this,e)}return r})(),pv=$e(),gv={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},dl=(function(){function r(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return r.prototype.isDimensionOmitted=function(){return this._dimOmitted},r.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=ml(this.source)))},r.prototype.getSourceDimensionIndex=function(e){return ue(this._dimNameMap.get(e),-1)},r.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},r.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=Zu(this.source),a=!yl(e),n="",i=[],o=0,l=0;o<e;o++){var s=void 0,u=void 0,c=void 0,h=this.dimensions[l];if(h&&h.storeDimIndex===o)s=t?h.name:null,u=h.type,c=h.ordinalMeta,l++;else{var v=this.getSourceDimension(o);v&&(s=t?v.name:null,u=v.type)}i.push({property:s,type:u,ordinalMeta:c}),t&&s!=null&&(!h||!h.isCalculationCoord)&&(n+=a?s.replace(/\`/g,"`1").replace(/\$/g,"`2"):s),n+="$",n+=gv[u]||"f",c&&(n+=c.uid),n+="$"}var f=this.source,d=[f.seriesLayoutBy,f.startIndex,n].join("$$");return{dimensions:i,hash:d}},r.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,a=0;t<this._fullDimCount;t++){var n=void 0,i=this.dimensions[a];if(i&&i.storeDimIndex===t)i.isCalculationCoord||(n=i.name),a++;else{var o=this.getSourceDimension(t);o&&(n=o.name)}e.push(n)}return e},r.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},r})();function pl(r){return r instanceof dl}function gl(r){for(var e=Ne(),t=0;t<(r||[]).length;t++){var a=r[t],n=ke(a)?a.name:a;n!=null&&e.get(n)==null&&e.set(n,t)}return e}function ml(r){var e=pv(r);return e.dimNameMap||(e.dimNameMap=gl(r.dimensionsDefine))}function yl(r){return r>30}var or=ke,ft=re,mv=typeof Int32Array>"u"?Array:Int32Array,yv="e\0\0",ao=-1,_v=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],bv=["_approximateExtent"],no,zr,sr,lr,qa,ur,Ka,Rt=(function(){function r(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var a,n=!1;pl(e)?(a=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(n=!0,a=e),a=a||["x","y"];for(var i={},o=[],l={},s=!1,u={},c=0;c<a.length;c++){var h=a[c],v=ve(h)?new ia({name:h}):h instanceof ia?h:new ia(h),f=v.name;v.type=v.type||"float",v.coordDim||(v.coordDim=f,v.coordDimIndex=0);var d=v.otherDims=v.otherDims||{};o.push(f),i[f]=v,u[f]!=null&&(s=!0),v.createInvertedIndices&&(l[f]=[]);var p=c;st(v.storeDimIndex)&&(p=v.storeDimIndex),d.itemName===0&&(this._nameDimIdx=p),d.itemId===0&&(this._idDimIdx=p),n&&(v.storeDimIndex=c)}if(this.dimensions=o,this._dimInfos=i,this._initGetDimensionInfo(s),this.hostModel=t,this._invertedIndicesMap=l,this._dimOmitted){var y=this._dimIdxToName=Ne();M(o,function(g){y.set(i[g].storeDimIndex,g)})}}return r.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var a=this._dimIdxToName.get(t);if(a!=null)return a;var n=this._schema.getSourceDimension(t);if(n)return n.name},r.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var a=this._getDimInfo(e);return a?a.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},r.prototype._recognizeDimIndex=function(e){if(st(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},r.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},r.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},r.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(a){return t.hasOwnProperty(a)?t[a]:void 0}:function(a){return t[a]}},r.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},r.prototype.mapDimension=function(e,t){var a=this._dimSummary;if(t==null)return a.encodeFirstDimNotExtra[e];var n=a.encode[e];return n?n[t]:null},r.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,a=t.encode[e];return(a||[]).slice()},r.prototype.getStore=function(){return this._store},r.prototype.initData=function(e,t,a){var n=this,i;if(e instanceof Ei&&(i=e),!i){var o=this.dimensions,l=Ns(e)||Xu(e)?new Yu(e,o.length):e;i=new Ei;var s=ft(o,function(u){return{type:n._dimInfos[u].type,property:u}});i.initData(l,s,a)}this._store=i,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,i.count()),this._dimSummary=fv(this,this._schema),this.userOutput=this._dimSummary.userOutput},r.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},r.prototype.appendValues=function(e,t){var a=this._store.appendValues(e,t&&t.length),n=a.start,i=a.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var l=n;l<i;l++){var s=l-n;this._nameList[l]=t[s],o&&Ka(this,l)}},r.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,a=0;a<t.length;a++){var n=this._dimInfos[t[a]];n.ordinalMeta&&e.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},r.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==qu&&!e.fillStorage},r.prototype._doInit=function(e,t){if(!(e>=t)){var a=this._store,n=a.getProvider();this._updateOrdinalMeta();var i=this._nameList,o=this._idList,l=n.getSource().sourceFormat,s=l===ti;if(s&&!n.pure)for(var u=[],c=e;c<t;c++){var h=n.getItem(c,u);if(!this.hasItemOption&&Ku(h)&&(this.hasItemOption=!0),h){var v=h.name;i[c]==null&&v!=null&&(i[c]=Wa(v,null));var f=h.id;o[c]==null&&f!=null&&(o[c]=Wa(f,null))}}if(this._shouldMakeIdFromName())for(var c=e;c<t;c++)Ka(this,c);no(this)}},r.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},r.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},r.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},r.prototype.setCalculationInfo=function(e,t){or(e)?se(this._calculationInfo,e):this._calculationInfo[e]=t},r.prototype.getName=function(e){var t=this.getRawIndex(e),a=this._nameList[t];return a==null&&this._nameDimIdx!=null&&(a=sr(this,this._nameDimIdx,t)),a==null&&(a=""),a},r.prototype._getCategory=function(e,t){var a=this._store.get(e,t),n=this._store.getOrdinalMeta(e);return n?n.categories[a]:a},r.prototype.getId=function(e){return zr(this,this.getRawIndex(e))},r.prototype.count=function(){return this._store.count()},r.prototype.get=function(e,t){var a=this._store,n=this._dimInfos[e];if(n)return a.get(n.storeDimIndex,t)},r.prototype.getByRawIndex=function(e,t){var a=this._store,n=this._dimInfos[e];if(n)return a.getByRawIndex(n.storeDimIndex,t)},r.prototype.getIndices=function(){return this._store.getIndices()},r.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},r.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},r.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},r.prototype.getValues=function(e,t){var a=this,n=this._store;return J(e)?n.getValues(ft(e,function(i){return a._getStoreDimIndex(i)}),t):n.getValues(e)},r.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,a=0,n=t.length;a<n;a++)if(isNaN(this._store.get(t[a],e)))return!1;return!0},r.prototype.indexOfName=function(e){for(var t=0,a=this._store.count();t<a;t++)if(this.getName(t)===e)return t;return-1},r.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},r.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},r.prototype.rawIndexOf=function(e,t){var a=e&&this._invertedIndicesMap[e],n=a&&a[t];return n==null||isNaN(n)?ao:n},r.prototype.each=function(e,t,a){_e(e)&&(a=t,t=e,e=[]);var n=a||this,i=ft(lr(e),this._getStoreDimIndex,this);this._store.each(i,n?we(t,n):t)},r.prototype.filterSelf=function(e,t,a){_e(e)&&(a=t,t=e,e=[]);var n=a||this,i=ft(lr(e),this._getStoreDimIndex,this);return this._store=this._store.filter(i,n?we(t,n):t),this},r.prototype.selectRange=function(e){var t=this,a={},n=Ea(e);return M(n,function(i){var o=t._getStoreDimIndex(i);a[o]=e[i]}),this._store=this._store.selectRange(a),this},r.prototype.mapArray=function(e,t,a){_e(e)&&(a=t,t=e,e=[]),a=a||this;var n=[];return this.each(e,function(){n.push(t&&t.apply(this,arguments))},a),n},r.prototype.map=function(e,t,a,n){var i=a||n||this,o=ft(lr(e),this._getStoreDimIndex,this),l=ur(this);return l._store=this._store.map(o,i?we(t,i):t),l},r.prototype.modify=function(e,t,a,n){var i=a||n||this,o=ft(lr(e),this._getStoreDimIndex,this);this._store.modify(o,i?we(t,i):t)},r.prototype.downSample=function(e,t,a,n){var i=ur(this);return i._store=this._store.downSample(this._getStoreDimIndex(e),t,a,n),i},r.prototype.minmaxDownSample=function(e,t){var a=ur(this);return a._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),t),a},r.prototype.lttbDownSample=function(e,t){var a=ur(this);return a._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),a},r.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},r.prototype.getItemModel=function(e){var t=this.hostModel,a=this.getRawDataItem(e);return new bt(a,t,t&&t.ecModel)},r.prototype.diff=function(e){var t=this;return new hv(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(a){return zr(e,a)},function(a){return zr(t,a)})},r.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},r.prototype.setVisual=function(e,t){this._visual=this._visual||{},or(e)?se(this._visual,e):this._visual[e]=t},r.prototype.getItemVisual=function(e,t){var a=this._itemVisuals[e],n=a&&a[t];return n??this.getVisual(t)},r.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},r.prototype.ensureUniqueItemVisual=function(e,t){var a=this._itemVisuals,n=a[e];n||(n=a[e]={});var i=n[t];return i==null&&(i=this.getVisual(t),J(i)?i=i.slice():or(i)&&(i=se({},i)),n[t]=i),i},r.prototype.setItemVisual=function(e,t,a){var n=this._itemVisuals[e]||{};this._itemVisuals[e]=n,or(t)?se(n,t):n[t]=a},r.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},r.prototype.setLayout=function(e,t){or(e)?se(this._layout,e):this._layout[e]=t},r.prototype.getLayout=function(e){return this._layout[e]},r.prototype.getItemLayout=function(e){return this._itemLayouts[e]},r.prototype.setItemLayout=function(e,t,a){this._itemLayouts[e]=a?se(this._itemLayouts[e]||{},t):t},r.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},r.prototype.setItemGraphicEl=function(e,t){var a=this.hostModel&&this.hostModel.seriesIndex;ju(a,this.dataType,e,t),this._graphicEls[e]=t},r.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},r.prototype.eachItemGraphicEl=function(e,t){M(this._graphicEls,function(a,n){a&&e&&e.call(t,a,n)})},r.prototype.cloneShallow=function(e){return e||(e=new r(this._schema?this._schema:ft(this.dimensions,this._getDimInfo,this),this.hostModel)),qa(e,this),e._store=this._store,e},r.prototype.wrapMethod=function(e,t){var a=this[e];_e(a)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var n=a.apply(this,arguments);return t.apply(this,[n].concat(Qu(arguments)))})},r.internalField=(function(){no=function(e){var t=e._invertedIndicesMap;M(t,function(a,n){var i=e._dimInfos[n],o=i.ordinalMeta,l=e._store;if(o){a=t[n]=new mv(o.categories.length);for(var s=0;s<a.length;s++)a[s]=ao;for(var s=0;s<l.count();s++)a[l.get(i.storeDimIndex,s)]=s}})},sr=function(e,t,a){return Wa(e._getCategory(t,a),null)},zr=function(e,t){var a=e._idList[t];return a==null&&e._idDimIdx!=null&&(a=sr(e,e._idDimIdx,t)),a==null&&(a=yv+t),a},lr=function(e){return J(e)||(e=e!=null?[e]:[]),e},ur=function(e){var t=new r(e._schema?e._schema:ft(e.dimensions,e._getDimInfo,e),e.hostModel);return qa(t,e),t},qa=function(e,t){M(_v.concat(t.__wrappedMethods||[]),function(a){t.hasOwnProperty(a)&&(e[a]=t[a])}),e.__wrappedMethods=t.__wrappedMethods,M(bv,function(a){e[a]=kt(t[a])}),e._calculationInfo=se({},t._calculationInfo)},Ka=function(e,t){var a=e._nameList,n=e._idList,i=e._nameDimIdx,o=e._idDimIdx,l=a[t],s=n[t];if(l==null&&i!=null&&(a[t]=l=sr(e,i,t)),s==null&&o!=null&&(n[t]=s=sr(e,o,t)),s==null&&l!=null){var u=e._nameRepeatCount,c=u[l]=(u[l]||0)+1;s=l,c>1&&(s+="__ec__"+c),n[t]=s}}})(),r})();function _l(r,e){Ns(r)||(r=Ju(r)),e=e||{};var t=e.coordDimensions||[],a=e.dimensionsDefine||r.dimensionsDefine||[],n=Ne(),i=[],o=Sv(r,t,a,e.dimensionsCount),l=e.canOmitUnusedDimensions&&yl(o),s=a===r.dimensionsDefine,u=s?ml(r):gl(a),c=e.encodeDefine;!c&&e.encodeDefaulter&&(c=e.encodeDefaulter(r,o));for(var h=Ne(c),v=new ec(o),f=0;f<v.length;f++)v[f]=-1;function d(D){var L=v[D];if(L<0){var A=a[D],I=ke(A)?A:{name:A},C=new ia,O=I.name;O!=null&&u.get(O)!=null&&(C.name=C.displayName=O),I.type!=null&&(C.type=I.type),I.displayName!=null&&(C.displayName=I.displayName);var N=i.length;return v[D]=N,C.storeDimIndex=D,i.push(C),C}return i[L]}if(!l)for(var f=0;f<o;f++)d(f);h.each(function(D,L){var A=Ri(D).slice();if(A.length===1&&!ve(A[0])&&A[0]<0){h.set(L,!1);return}var I=h.set(L,[]);M(A,function(C,O){var N=ve(C)?u.get(C):C;N!=null&&N<o&&(I[O]=N,y(d(N),L,O))})});var p=0;M(t,function(D){var L,A,I,C;if(ve(D))L=D,C={};else{C=D,L=C.name;var O=C.ordinalMeta;C.ordinalMeta=null,C=se({},C),C.ordinalMeta=O,A=C.dimsDef,I=C.otherDims,C.name=C.coordDim=C.coordDimIndex=C.dimsDef=C.otherDims=null}var N=h.get(L);if(N!==!1){if(N=Ri(N),!N.length)for(var V=0;V<(A&&A.length||1);V++){for(;p<o&&d(p).coordDim!=null;)p++;p<o&&N.push(p++)}M(N,function(K,$){var Z=d(K);if(s&&C.type!=null&&(Z.type=C.type),y(Be(Z,C),L,$),Z.name==null&&A){var Y=A[$];!ke(Y)&&(Y={name:Y}),Z.name=Z.displayName=Y.name,Z.defaultTooltip=Y.defaultTooltip}I&&Be(Z.otherDims,I)})}});function y(D,L,A){Os.get(L)!=null?D.otherDims[L]=A:(D.coordDim=L,D.coordDimIndex=A,n.set(L,!0))}var g=e.generateCoord,m=e.generateCoordCount,_=m!=null;m=g?m||1:0;var b=g||"value";function k(D){D.name==null&&(D.name=D.coordDim)}if(l)M(i,function(D){k(D)}),i.sort(function(D,L){return D.storeDimIndex-L.storeDimIndex});else for(var x=0;x<o;x++){var S=d(x),T=S.coordDim;T==null&&(S.coordDim=wv(b,n,_),S.coordDimIndex=0,(!g||m<=0)&&(S.isExtraCoord=!0),m--),k(S),S.type==null&&(tc(r,x)===rc.Must||S.isExtraCoord&&(S.otherDims.itemName!=null||S.otherDims.seriesName!=null))&&(S.type="ordinal")}return xv(i),new dl({source:r,dimensions:i,fullDimensionCount:o,dimensionOmitted:l})}function xv(r){for(var e=Ne(),t=0;t<r.length;t++){var a=r[t],n=a.name,i=e.get(n)||0;i>0&&(a.name=n+(i-1)),i++,e.set(n,i)}}function Sv(r,e,t,a){var n=Math.max(r.dimensionsDetectedCount||1,e.length,t.length,a||0);return M(e,function(i){var o;ke(i)&&(o=i.dimsDef)&&(n=Math.max(n,o.length))}),n}function wv(r,e,t){if(t||e.hasKey(r)){for(var a=0;e.hasKey(r+a);)a++;r+=a}return e.set(r,!0),r}var kv=(function(){function r(e){this.coordSysDims=[],this.axisMap=Ne(),this.categoryAxisMap=Ne(),this.coordSysName=e}return r})();function Av(r){var e=r.get("coordinateSystem"),t=new kv(e),a=Cv[e];if(a)return a(r,t,t.axisMap,t.categoryAxisMap),t}var Cv={cartesian2d:function(r,e,t,a){var n=r.getReferringComponents("xAxis",at).models[0],i=r.getReferringComponents("yAxis",at).models[0];e.coordSysDims=["x","y"],t.set("x",n),t.set("y",i),Wt(n)&&(a.set("x",n),e.firstCategoryDimIndex=0),Wt(i)&&(a.set("y",i),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(r,e,t,a){var n=r.getReferringComponents("singleAxis",at).models[0];e.coordSysDims=["single"],t.set("single",n),Wt(n)&&(a.set("single",n),e.firstCategoryDimIndex=0)},polar:function(r,e,t,a){var n=r.getReferringComponents("polar",at).models[0],i=n.findAxisModel("radiusAxis"),o=n.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",i),t.set("angle",o),Wt(i)&&(a.set("radius",i),e.firstCategoryDimIndex=0),Wt(o)&&(a.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(r,e,t,a){e.coordSysDims=["lng","lat"]},parallel:function(r,e,t,a){var n=r.ecModel,i=n.getComponent("parallel",r.get("parallelIndex")),o=e.coordSysDims=i.dimensions.slice();M(i.parallelAxisIndex,function(l,s){var u=n.getComponent("parallelAxis",l),c=o[s];t.set(c,u),Wt(u)&&(a.set(c,u),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=s))})},matrix:function(r,e,t,a){var n=r.getReferringComponents("matrix",at).models[0];e.coordSysDims=["x","y"];var i=n.getDimensionModel("x"),o=n.getDimensionModel("y");t.set("x",i),t.set("y",o),a.set("x",i),a.set("y",o)}};function Wt(r){return r.get("type")==="category"}function Dv(r,e,t){t=t||{};var a=t.byIndex,n=t.stackedCoordDimension,i,o,l;Lv(e)?i=e:(o=e.schema,i=o.dimensions,l=e.store);var s=!!(r&&r.get("stack")),u,c,h,v;if(M(i,function(m,_){ve(m)&&(i[_]=m={name:m}),s&&!m.isExtraCoord&&(!a&&!u&&m.ordinalMeta&&(u=m),!c&&m.type!=="ordinal"&&m.type!=="time"&&(!n||n===m.coordDim)&&(c=m))}),c&&!a&&!u&&(a=!0),c){h="__\0ecstackresult_"+r.id,v="__\0ecstackedover_"+r.id,u&&(u.createInvertedIndices=!0);var f=c.coordDim,d=c.type,p=0;M(i,function(m){m.coordDim===f&&p++});var y={name:h,coordDim:f,coordDimIndex:p,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length},g={name:v,coordDim:v,coordDimIndex:p+1,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length+1};o?(l&&(y.storeDimIndex=l.ensureCalculationDimension(v,d),g.storeDimIndex=l.ensureCalculationDimension(h,d)),o.appendCalculationDimension(y),o.appendCalculationDimension(g)):(i.push(y),i.push(g))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:a,stackedOverDimension:v,stackResultDimension:h}}function Lv(r){return!pl(r.schema)}function zt(r,e){return!!e&&e===r.getCalculationInfo("stackedDimension")}function bl(r,e){return zt(r,e)?r.getCalculationInfo("stackResultDimension"):e}function Tv(r,e){var t=r.get("coordinateSystem"),a=ac.get(t),n;return e&&e.coordSysDims&&(n=re(e.coordSysDims,function(i){var o={name:i},l=e.axisMap.get(i);if(l){var s=l.get("type");o.type=Mn(s)}return o})),n||(n=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]),n}function Iv(r,e,t){var a,n;return t&&M(r,function(i,o){var l=i.coordDim,s=t.categoryAxisMap.get(l);s&&(a==null&&(a=o),i.ordinalMeta=s.getOrdinalMeta(),e&&(i.createInvertedIndices=!0)),i.otherDims.itemName!=null&&(n=!0)}),!n&&a!=null&&(r[a].otherDims.itemName=0),a}function za(r,e,t){t=t||{};var a=e.getSourceManager(),n,i=!1;n=a.getSource(),i=n.sourceFormat===ti;var o=Av(e),l=Tv(e,o),s=t.useEncodeDefaulter,u=_e(s)?s:s?fe(Bs,l,e):null,c={coordDimensions:l,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!i},h=_l(n,c),v=Iv(h.dimensions,t.createInvertedIndices,o),f=i?null:a.getSharedDataStore(h),d=Dv(e,{schema:h,store:f}),p=new Rt(h,e);p.setCalculationInfo(d);var y=v!=null&&Mv(n)?function(g,m,_,b){return b===v?_:this.defaultDimValueGetter(g,m,_,b)}:null;return p.hasItemOption=!1,p.initData(i?n:f,null,y),p}function Mv(r){if(r.sourceFormat===ti){var e=Pv(r.data||[]);return!J(nc(e))}}function Pv(r){for(var e=0;e<r.length&&r[e]==null;)e++;return r[e]}function Pn(r){return r.type==="interval"||r.type==="log"}function Ev(r,e,t,a,n){var i={},o=i.interval=$s(e/t);a!=null&&o<a&&(o=i.interval=a),n!=null&&o>n&&(o=i.interval=n);var l=i.intervalPrecision=Cr(o),s=i.niceTickExtent=[De(Math.ceil(r[0]/o)*o,l),De(Math.floor(r[1]/o)*o,l)];return Rv(s,r),i}function ja(r){var e=Math.pow(10,ic(r)),t=r/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,De(t*e)}function Cr(r){return Ra(r)+2}function io(r,e,t){r[e]=Math.max(Math.min(r[e],t[1]),t[0])}function Rv(r,e){!isFinite(r[0])&&(r[0]=e[0]),!isFinite(r[1])&&(r[1]=e[1]),io(r,0,e),io(r,1,e),r[0]>r[1]&&(r[0]=r[1])}function ci(r,e){return r>=e[0]&&r<=e[1]}var Ov=(function(){function r(){this.normalize=oo,this.scale=so}return r.prototype.updateMethods=function(e){e.hasBreaks()?(this.normalize=we(e.normalize,e),this.scale=we(e.scale,e)):(this.normalize=oo,this.scale=so)},r})();function oo(r,e){return e[1]===e[0]?.5:(r-e[0])/(e[1]-e[0])}function so(r,e){return r*(e[1]-e[0])+e[0]}function En(r,e,t){var a=Math.log(r);return[Math.log(t?e[0]:Math.max(0,e[0]))/a,Math.log(t?e[1]:Math.max(0,e[1]))/a]}var It=(function(){function r(e){this._calculator=new Ov,this._setting=e||{},this._extent=[1/0,-1/0]}return r.prototype.getSetting=function(e){return this._setting[e]},r.prototype._innerUnionExtent=function(e){var t=this._extent;this._innerSetExtent(e[0]<t[0]?e[0]:t[0],e[1]>t[1]?e[1]:t[1])},r.prototype.unionExtentFromData=function(e,t){this._innerUnionExtent(e.getApproximateExtent(t))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(e,t){this._innerSetExtent(e,t)},r.prototype._innerSetExtent=function(e,t){var a=this._extent;isNaN(e)||(a[0]=e),isNaN(t)||(a[1]=t),this._brkCtx&&this._brkCtx.update(a)},r.prototype.setBreaksFromOption=function(e){},r.prototype._innerSetBreak=function(e){this._brkCtx&&(this._brkCtx.setBreaks(e),this._calculator.updateMethods(this._brkCtx),this._brkCtx.update(this._extent))},r.prototype._innerGetBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},r.prototype.hasBreaks=function(){return this._brkCtx?this._brkCtx.hasBreaks():!1},r.prototype._getExtentSpanWithBreaks=function(){return this._brkCtx&&this._brkCtx.hasBreaks()?this._brkCtx.getExtentSpan():this._extent[1]-this._extent[0]},r.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(e){this._isBlank=e},r})();oc(It);var Nv=0,Rn=(function(){function r(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++Nv,this._onCollect=e.onCollect}return r.createByAxisModel=function(e){var t=e.option,a=t.data,n=a&&re(a,Bv);return new r({categories:n,needCollect:!n,deduplication:t.dedplication!==!1})},r.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},r.prototype.parseAndCollect=function(e){var t,a=this._needCollect;if(!ve(e)&&!a)return e;if(a&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,this._onCollect&&this._onCollect(e,t),t;var n=this._getOrCreateMap();return t=n.get(e),t==null&&(a?(t=this.categories.length,this.categories[t]=e,n.set(e,t),this._onCollect&&this._onCollect(e,t)):t=NaN),t},r.prototype._getOrCreateMap=function(){return this._map||(this._map=Ne(this.categories))},r})();function Bv(r){return ke(r)&&r.value!=null?r.value:r+""}var xl=(function(r){X(e,r);function e(t){var a=r.call(this,t)||this;a.type="ordinal";var n=a.getSetting("ordinalMeta");return n||(n=new Rn({})),J(n)&&(n=new Rn({categories:re(n,function(i){return ke(i)?i.value:i})})),a._ordinalMeta=n,a._extent=a.getSetting("extent")||[0,n.categories.length-1],a}return e.prototype.parse=function(t){return t==null?NaN:ve(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return ci(t,this._extent)&&t>=0&&t<this._ordinalMeta.categories.length},e.prototype.normalize=function(t){return t=this._getTickNumber(t),this._calculator.normalize(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(this._calculator.scale(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],a=this._extent,n=a[0];n<=a[1];)t.push({value:n}),n++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var a=t.ordinalNumbers,n=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],o=0,l=this._ordinalMeta.categories.length,s=Math.min(l,a.length);o<s;++o){var u=a[o];n[o]=u,i[u]=o}for(var c=0;o<l;++o){for(;i[c]!=null;)c++;n.push(c),i[c]=o}},e.prototype._getTickNumber=function(t){var a=this._ticksByOrdinalNumber;return a&&t>=0&&t<a.length?a[t]:t},e.prototype.getRawOrdinalNumber=function(t){var a=this._ordinalNumbersByTick;return a&&t>=0&&t<a.length?a[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var a=this.getRawOrdinalNumber(t.value),n=this._ordinalMeta.categories[a];return n==null?"":n+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e})(It);It.registerClass(xl);var dt=De,Kt=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t==null||t===""?NaN:Number(t)},e.prototype.contain=function(t){return ci(t,this._extent)},e.prototype.normalize=function(t){return this._calculator.normalize(t,this._extent)},e.prototype.scale=function(t){return this._calculator.scale(t,this._extent)},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=Cr(t)},e.prototype.getTicks=function(t){t=t||{};var a=this._interval,n=this._extent,i=this._niceExtent,o=this._intervalPrecision,l=Sn(),s=[];if(!a)return s;t.breakTicks;var u=1e4;n[0]<i[0]&&(t.expandToNicedExtent?s.push({value:dt(i[0]-a,o)}):s.push({value:n[0]}));for(var c=function(d,p){return Math.round((p-d)/a)},h=i[0];h<=i[1];){if(s.push({value:h}),h=dt(h+a,o),this._brkCtx){var v=this._brkCtx.calcNiceTickMultiple(h,c);v>=0&&(h=dt(h+v*a,o))}if(s.length>0&&h===s[s.length-1].value)break;if(s.length>u)return[]}var f=s.length?s[s.length-1].value:i[1];return n[1]>f&&(t.expandToNicedExtent?s.push({value:dt(f+a,o)}):s.push({value:n[1]})),t.breakTicks,s},e.prototype.getMinorTicks=function(t){for(var a=this.getTicks({expandToNicedExtent:!0}),n=[],i=this.getExtent(),o=1;o<a.length;o++){var l=a[o],s=a[o-1];if(!(s.break||l.break)){for(var u=0,c=[],h=l.value-s.value,v=h/t,f=Cr(v);u<t-1;){var d=dt(s.value+(u+1)*v,f);d>i[0]&&d<i[1]&&c.push(d),u++}var p=Sn();p&&p.pruneTicksByBreak("auto",c,this._getNonTransBreaks(),function(y){return y},this._interval,i),n.push(c)}}return n},e.prototype._getNonTransBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},e.prototype.getLabel=function(t,a){if(t==null)return"";var n=a&&a.precision;n==null?n=Ra(t.value)||0:n==="auto"&&(n=this._intervalPrecision);var i=dt(t.value,n,!0);return sc(i)},e.prototype.calcNiceTicks=function(t,a,n){t=t||5;var i=this._extent.slice(),o=this._getExtentSpanWithBreaks();if(isFinite(o)){o<0&&(o=-o,i.reverse(),this._innerSetExtent(i[0],i[1]),i=this._extent.slice());var l=Ev(i,o,t,a,n);this._intervalPrecision=l.intervalPrecision,this._interval=l.interval,this._niceExtent=l.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var a=this._extent.slice();if(a[0]===a[1])if(a[0]!==0){var n=Math.abs(a[0]);t.fixMax||(a[1]+=n/2),a[0]-=n/2}else a[1]=1;var i=a[1]-a[0];isFinite(i)||(a[0]=0,a[1]=1),this._innerSetExtent(a[0],a[1]),a=this._extent.slice(),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval,l=this._intervalPrecision;t.fixMin||(a[0]=dt(Math.floor(a[0]/o)*o,l)),t.fixMax||(a[1]=dt(Math.ceil(a[1]/o)*o,l)),this._innerSetExtent(a[0],a[1])},e.prototype.setNiceExtent=function(t,a){this._niceExtent=[t,a]},e.type="interval",e})(It);It.registerClass(Kt);var Sl=typeof Float32Array<"u",$v=Sl?Float32Array:Array;function Qe(r){return J(r)?Sl?new Float32Array(r):r:new $v(r)}var zv="__ec_stack_";function wl(r){return r.get("stack")||zv+r.seriesIndex}function hi(r){return r.dim+r.index}function kl(r,e){var t=[];return e.eachSeriesByType(r,function(a){Cl(a)&&t.push(a)}),t}function Gv(r){var e={};M(r,function(s){var u=s.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var h=s.getData(),v=c.dim+"_"+c.index,f=h.getDimensionIndex(h.mapDimension(c.dim)),d=h.getStore(),p=0,y=d.count();p<y;++p){var g=d.get(f,p);e[v]?e[v].push(g):e[v]=[g]}});var t={};for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];if(n){n.sort(function(s,u){return s-u});for(var i=null,o=1;o<n.length;++o){var l=n[o]-n[o-1];l>0&&(i=i===null?l:Math.min(i,l))}t[a]=i}}return t}function Al(r){var e=Gv(r),t=[];return M(r,function(a){var n=a.coordinateSystem,i=n.getBaseAxis(),o=i.getExtent(),l;if(i.type==="category")l=i.getBandWidth();else if(i.type==="value"||i.type==="time"){var s=i.dim+"_"+i.index,u=e[s],c=Math.abs(o[1]-o[0]),h=i.scale.getExtent(),v=Math.abs(h[1]-h[0]);l=u?c/v*u:c}else{var f=a.getData();l=Math.abs(o[1]-o[0])/f.count()}var d=Me(a.get("barWidth"),l),p=Me(a.get("barMaxWidth"),l),y=Me(a.get("barMinWidth")||(Dl(a)?.5:1),l),g=a.get("barGap"),m=a.get("barCategoryGap"),_=a.get("defaultBarGap");t.push({bandWidth:l,barWidth:d,barMaxWidth:p,barMinWidth:y,barGap:g,barCategoryGap:m,defaultBarGap:_,axisKey:hi(i),stackId:wl(a)})}),Hv(t)}function Hv(r){var e={};M(r,function(a,n){var i=a.axisKey,o=a.bandWidth,l=e[i]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:a.defaultBarGap||0,stacks:{}},s=l.stacks;e[i]=l;var u=a.stackId;s[u]||l.autoWidthCount++,s[u]=s[u]||{width:0,maxWidth:0};var c=a.barWidth;c&&!s[u].width&&(s[u].width=c,c=Math.min(l.remainedWidth,c),l.remainedWidth-=c);var h=a.barMaxWidth;h&&(s[u].maxWidth=h);var v=a.barMinWidth;v&&(s[u].minWidth=v);var f=a.barGap;f!=null&&(l.gap=f);var d=a.barCategoryGap;d!=null&&(l.categoryGap=d)});var t={};return M(e,function(a,n){t[n]={};var i=a.stacks,o=a.bandWidth,l=a.categoryGap;if(l==null){var s=Ea(i).length;l=Math.max(35-s*4,15)+"%"}var u=Me(l,o),c=Me(a.gap,1),h=a.remainedWidth,v=a.autoWidthCount,f=(h-u)/(v+(v-1)*c);f=Math.max(f,0),M(i,function(g){var m=g.maxWidth,_=g.minWidth;if(g.width){var b=g.width;m&&(b=Math.min(b,m)),_&&(b=Math.max(b,_)),g.width=b,h-=b+c*b,v--}else{var b=f;m&&m<b&&(b=Math.min(m,h)),_&&_>b&&(b=_),b!==f&&(g.width=b,h-=b+c*b,v--)}}),f=(h-u)/(v+(v-1)*c),f=Math.max(f,0);var d=0,p;M(i,function(g,m){g.width||(g.width=f),p=g,d+=g.width*(1+c)}),p&&(d-=p.width*c);var y=-d/2;M(i,function(g,m){t[n][m]=t[n][m]||{bandWidth:o,offset:y,width:g.width},y+=g.width*(1+c)})}),t}function Fv(r,e,t){if(r&&e){var a=r[hi(e)];return a}}function Vv(r,e){var t=kl(r,e),a=Al(t);M(t,function(n){var i=n.getData(),o=n.coordinateSystem,l=o.getBaseAxis(),s=wl(n),u=a[hi(l)][s],c=u.offset,h=u.width;i.setLayout({bandWidth:u.bandWidth,offset:c,size:h})})}function Wv(r){return{seriesType:r,plan:Oa(),reset:function(e){if(Cl(e)){var t=e.getData(),a=e.coordinateSystem,n=a.getBaseAxis(),i=a.getOtherAxis(n),o=t.getDimensionIndex(t.mapDimension(i.dim)),l=t.getDimensionIndex(t.mapDimension(n.dim)),s=e.get("showBackground",!0),u=t.mapDimension(i.dim),c=t.getCalculationInfo("stackResultDimension"),h=zt(t,u)&&!!t.getCalculationInfo("stackedOnSeries"),v=i.isHorizontal(),f=Uv(n,i),d=Dl(e),p=e.get("barMinHeight")||0,y=c&&t.getDimensionIndex(c),g=t.getLayout("size"),m=t.getLayout("offset");return{progress:function(_,b){for(var k=_.count,x=d&&Qe(k*3),S=d&&s&&Qe(k*3),T=d&&Qe(k),D=a.master.getRect(),L=v?D.width:D.height,A,I=b.getStore(),C=0;(A=_.next())!=null;){var O=I.get(h?y:o,A),N=I.get(l,A),V=f,K=void 0;h&&(K=+O-I.get(o,A));var $=void 0,Z=void 0,Y=void 0,F=void 0;if(v){var q=a.dataToPoint([O,N]);if(h){var j=a.dataToPoint([K,N]);V=j[0]}$=V,Z=q[1]+m,Y=q[0]-V,F=g,Math.abs(Y)<p&&(Y=(Y<0?-1:1)*p)}else{var q=a.dataToPoint([N,O]);if(h){var j=a.dataToPoint([N,K]);V=j[1]}$=q[0]+m,Z=V,Y=g,F=q[1]-V,Math.abs(F)<p&&(F=(F<=0?-1:1)*p)}d?(x[C]=$,x[C+1]=Z,x[C+2]=v?Y:F,S&&(S[C]=v?D.x:$,S[C+1]=v?Z:D.y,S[C+2]=L),T[A]=A):b.setItemLayout(A,{x:$,y:Z,width:Y,height:F}),C+=3}d&&b.setLayout({largePoints:x,largeDataIndices:T,largeBackgroundPoints:S,valueAxisHorizontal:v})}}}}}}function Cl(r){return r.coordinateSystem&&r.coordinateSystem.type==="cartesian2d"}function Dl(r){return r.pipelineContext&&r.pipelineContext.large}function Uv(r,e){var t=e.model.get("startValue");return t||(t=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?t>0?t:1:t))}var Zv=function(r,e,t,a){for(;t<a;){var n=t+a>>>1;r[n][1]<e?t=n+1:a=n}return t},Ll=(function(r){X(e,r);function e(t){var a=r.call(this,t)||this;return a.type="time",a}return e.prototype.getLabel=function(t){var a=this.getSetting("useUTC");return zs(t.value,Oi[lc(aa(this._minLevelUnit))]||Oi.second,a,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,a,n){var i=this.getSetting("useUTC"),o=this.getSetting("locale");return uc(t,a,n,o,i)},e.prototype.getTicks=function(t){var a=this._interval,n=this._extent,i=[];if(!a)return i;var o=this.getSetting("useUTC"),l=wn(n[1],o);i.push({value:n[0],time:{level:0,upperTimeUnit:l,lowerTimeUnit:l}});var s=ef(this._minLevelUnit,this._approxInterval,o,n,this._getExtentSpanWithBreaks(),this._brkCtx);i=i.concat(s);var u=wn(n[1],o);i.push({value:n[1],time:{level:0,upperTimeUnit:u,lowerTimeUnit:u}}),this.getSetting("useUTC");var c=la.length-1,h=0;return M(i,function(v){c=Math.min(c,Oe(la,v.time.upperTimeUnit)),h=Math.max(h,v.time.level)}),i},e.prototype.calcNiceExtent=function(t){var a=this.getExtent();if(a[0]===a[1]&&(a[0]-=Xe,a[1]+=Xe),a[1]===-1/0&&a[0]===1/0){var n=new Date;a[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),a[0]=a[1]-Xe}this._innerSetExtent(a[0],a[1]),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,a,n){t=t||10;var i=this._getExtentSpanWithBreaks();this._approxInterval=i/t,a!=null&&this._approxInterval<a&&(this._approxInterval=a),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var o=Gr.length,l=Math.min(Zv(Gr,this._approxInterval,0,o),o-1);this._interval=Gr[l][1],this._intervalPrecision=Cr(this._interval),this._minLevelUnit=Gr[Math.max(l-1,0)][0]},e.prototype.parse=function(t){return st(t)?t:+cc(t)},e.prototype.contain=function(t){return ci(t,this._extent)},e.prototype.normalize=function(t){return this._calculator.normalize(t,this._extent)},e.prototype.scale=function(t){return this._calculator.scale(t,this._extent)},e.type="time",e})(Kt),Gr=[["second",Gs],["minute",Hs],["hour",na],["quarter-day",na*6],["half-day",na*12],["day",Xe*1.2],["half-week",Xe*3.5],["week",Xe*7],["month",Xe*31],["quarter",Xe*95],["half-year",Ni/2],["year",Ni]];function Xv(r,e,t,a){return kn(new Date(e),r,a).getTime()===kn(new Date(t),r,a).getTime()}function Yv(r,e){return r/=Xe,r>16?16:r>7.5?7:r>3.5?4:r>1.5?2:1}function qv(r){var e=30*Xe;return r/=e,r>6?6:r>3?3:r>2?2:1}function Kv(r){return r/=na,r>12?12:r>6?6:r>3.5?4:r>2?2:1}function lo(r,e){return r/=e?Hs:Gs,r>30?30:r>20?20:r>15?15:r>10?10:r>5?5:r>2?2:1}function jv(r){return $s(r)}function Qv(r,e,t){var a=Math.max(0,Oe(la,e)-1);return kn(new Date(r),la[a],t).getTime()}function Jv(r,e){var t=new Date(0);t[r](1);var a=t.getTime();t[r](1+e);var n=t.getTime()-a;return function(i,o){return Math.max(0,Math.round((o-i)/n))}}function ef(r,e,t,a,n,i){var o=1e4,l=hc,s=0;function u(C,O,N,V,K,$,Z){for(var Y=Jv(K,C),F=O,q=new Date(F);F<N&&F<=a[1]&&(Z.push({value:F}),!(s++>o));)if(q[K](q[V]()+C),F=q.getTime(),i){var j=i.calcNiceTickMultiple(F,Y);j>0&&(q[K](q[V]()+j*C),F=q.getTime())}Z.push({value:F,notAdd:!0})}function c(C,O,N){var V=[],K=!O.length;if(!Xv(aa(C),a[0],a[1],t)){K&&(O=[{value:Qv(a[0],C,t)},{value:a[1]}]);for(var $=0;$<O.length-1;$++){var Z=O[$].value,Y=O[$+1].value;if(Z!==Y){var F=void 0,q=void 0,j=void 0,le=!1;switch(C){case"year":F=Math.max(1,Math.round(e/Xe/365)),q=Ac(t),j=Cc(t);break;case"half-year":case"quarter":case"month":F=qv(e),q=wc(t),j=kc(t);break;case"week":case"half-week":case"day":F=Yv(e),q=xc(t),j=Sc(t),le=!0;break;case"half-day":case"quarter-day":case"hour":F=Kv(e),q=_c(t),j=bc(t);break;case"minute":F=lo(e,!0),q=mc(t),j=yc(t);break;case"second":F=lo(e,!1),q=pc(t),j=gc(t);break;case"millisecond":F=jv(e),q=fc(t),j=dc(t);break}Y>=a[0]&&Z<=a[1]&&u(F,Z,Y,q,j,le,V),C==="year"&&N.length>1&&$===0&&N.unshift({value:N[0].value-F})}}for(var $=0;$<V.length;$++)N.push(V[$])}}for(var h=[],v=[],f=0,d=0,p=0;p<l.length;++p){var y=aa(l[p]);if(vc(l[p])){c(l[p],h[h.length-1]||[],v);var g=l[p+1]?aa(l[p+1]):null;if(y!==g){if(v.length){d=f,v.sort(function(C,O){return C.value-O.value});for(var m=[],_=0;_<v.length;++_){var b=v[_].value;(_===0||v[_-1].value!==b)&&(m.push(v[_]),b>=a[0]&&b<=a[1]&&f++)}var k=n/e;if(f>k*1.5&&d>k/1.5||(h.push(m),f>k||r===l[p]))break}v=[]}}}for(var x=lt(re(h,function(C){return lt(C,function(O){return O.value>=a[0]&&O.value<=a[1]&&!O.notAdd})}),function(C){return C.length>0}),S=[],T=x.length-1,p=0;p<x.length;++p)for(var D=x[p],L=0;L<D.length;++L){var A=wn(D[L].value,t);S.push({value:D[L].value,time:{level:T-p,upperTimeUnit:A,lowerTimeUnit:A}})}S.sort(function(C,O){return C.value-O.value});for(var I=[],p=0;p<S.length;++p)(p===0||S[p].value!==S[p-1].value)&&I.push(S[p]);return I}It.registerClass(Ll);var On=De,tf=Math.floor,rf=Math.ceil,Hr=Math.pow,Fr=Math.log,Tl=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new Kt,t}return e.prototype.getTicks=function(t){t=t||{};var a=this._extent.slice(),n=this._originalScale.getExtent(),i=r.prototype.getTicks.call(this,t),o=this.base;return this._originalScale._innerGetBreaks(),re(i,function(l){var s=l.value,u=null,c=Hr(o,s);s===a[0]&&this._fixMin?u=n[0]:s===a[1]&&this._fixMax&&(u=n[1]);var h;return u!=null&&(c=Qa(c,u)),{value:c,break:h}},this)},e.prototype._getNonTransBreaks=function(){return this._originalScale._innerGetBreaks()},e.prototype.setExtent=function(t,a){this._originalScale.setExtent(t,a);var n=En(this.base,[t,a]);r.prototype.setExtent.call(this,n[0],n[1])},e.prototype.getExtent=function(){var t=this.base,a=r.prototype.getExtent.call(this);a[0]=Hr(t,a[0]),a[1]=Hr(t,a[1]);var n=this._originalScale.getExtent();return this._fixMin&&(a[0]=Qa(a[0],n[0])),this._fixMax&&(a[1]=Qa(a[1],n[1])),a},e.prototype.unionExtentFromData=function(t,a){this._originalScale.unionExtentFromData(t,a);var n=En(this.base,t.getApproximateExtent(a),!0);this._innerUnionExtent(n)},e.prototype.calcNiceTicks=function(t){t=t||10;var a=this._extent.slice(),n=this._getExtentSpanWithBreaks();if(!(!isFinite(n)||n<=0)){var i=Dc(n),o=t/n*i;for(o<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var l=[On(rf(a[0]/i)*i),On(tf(a[1]/i)*i)];this._interval=i,this._intervalPrecision=Cr(i),this._niceExtent=l}},e.prototype.calcNiceExtent=function(t){r.prototype.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.contain=function(t){return t=Fr(t)/Fr(this.base),r.prototype.contain.call(this,t)},e.prototype.normalize=function(t){return t=Fr(t)/Fr(this.base),r.prototype.normalize.call(this,t)},e.prototype.scale=function(t){return t=r.prototype.scale.call(this,t),Hr(this.base,t)},e.prototype.setBreaksFromOption=function(t){},e.type="log",e})(Kt);function Qa(r,e){return On(r,Ra(e))}It.registerClass(Tl);var af=(function(){function r(e,t,a){this._prepareParams(e,t,a)}return r.prototype._prepareParams=function(e,t,a){a[1]<a[0]&&(a=[NaN,NaN]),this._dataMin=a[0],this._dataMax=a[1];var n=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var i=t.get("min",!0);i==null&&(i=t.get("startValue",!0));var o=this._modelMinRaw=i;_e(o)?this._modelMinNum=Vr(e,o({min:a[0],max:a[1]})):o!=="dataMin"&&(this._modelMinNum=Vr(e,o));var l=this._modelMaxRaw=t.get("max",!0);if(_e(l)?this._modelMaxNum=Vr(e,l({min:a[0],max:a[1]})):l!=="dataMax"&&(this._modelMaxNum=Vr(e,l)),n)this._axisDataLen=t.getCategories().length;else{var s=t.get("boundaryGap"),u=J(s)?s:[s||0,s||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[An(u[0],1),An(u[1],1)]}},r.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,a=this._dataMax,n=this._axisDataLen,i=this._boundaryGapInner,o=e?null:a-t||Math.abs(t),l=this._modelMinRaw==="dataMin"?t:this._modelMinNum,s=this._modelMaxRaw==="dataMax"?a:this._modelMaxNum,u=l!=null,c=s!=null;l==null&&(l=e?n?0:NaN:t-i[0]*o),s==null&&(s=e?n?n-1:NaN:a+i[1]*o),(l==null||!isFinite(l))&&(l=NaN),(s==null||!isFinite(s))&&(s=NaN);var h=ua(l)||ua(s)||e&&!n;this._needCrossZero&&(l>0&&s>0&&!u&&(l=0),l<0&&s<0&&!c&&(s=0));var v=this._determinedMin,f=this._determinedMax;return v!=null&&(l=v,u=!0),f!=null&&(s=f,c=!0),{min:l,max:s,minFixed:u,maxFixed:c,isBlank:h}},r.prototype.modifyDataMinMax=function(e,t){this[of[e]]=t},r.prototype.setDeterminedMinMax=function(e,t){var a=nf[e];this[a]=t},r.prototype.freeze=function(){this.frozen=!0},r})(),nf={min:"_determinedMin",max:"_determinedMax"},of={min:"_dataMin",max:"_dataMax"};function sf(r,e,t){var a=r.rawExtentInfo;return a||(a=new af(r,e,t),r.rawExtentInfo=a,a)}function Vr(r,e){return e==null?null:ua(e)?NaN:r.parse(e)}function Il(r,e){var t=r.type,a=sf(r,e,r.getExtent()).calculate();r.setBlank(a.isBlank);var n=a.min,i=a.max,o=e.ecModel;if(o&&t==="time"){var l=kl("bar",o),s=!1;if(M(l,function(h){s=s||h.getBaseAxis()===e.axis}),s){var u=Al(l),c=lf(n,i,e,u);n=c.min,i=c.max}}return{extent:[n,i],fixMin:a.minFixed,fixMax:a.maxFixed}}function lf(r,e,t,a){var n=t.axis.getExtent(),i=Math.abs(n[1]-n[0]),o=Fv(a,t.axis);if(o===void 0)return{min:r,max:e};var l=1/0;M(o,function(f){l=Math.min(f.offset,l)});var s=-1/0;M(o,function(f){s=Math.max(f.offset+f.width,s)}),l=Math.abs(l),s=Math.abs(s);var u=l+s,c=e-r,h=1-(l+s)/i,v=c/h-c;return e+=v*(s/u),r-=v*(l/u),{min:r,max:e}}function uo(r,e){var t=e,a=Il(r,t),n=a.extent,i=t.get("splitNumber");r instanceof Tl&&(r.base=t.get("logBase"));var o=r.type,l=t.get("interval"),s=o==="interval"||o==="time";r.setBreaksFromOption(Pl(t)),r.setExtent(n[0],n[1]),r.calcNiceExtent({splitNumber:i,fixMin:a.fixMin,fixMax:a.fixMax,minInterval:s?t.get("minInterval"):null,maxInterval:s?t.get("maxInterval"):null}),l!=null&&r.setInterval&&r.setInterval(l)}function uf(r,e){if(e=e||r.get("type"),e)switch(e){case"category":return new xl({ordinalMeta:r.getOrdinalMeta?r.getOrdinalMeta():r.getCategories(),extent:[1/0,-1/0]});case"time":return new Ll({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new(It.getClass(e)||Kt)}}function cf(r){var e=r.scale.getExtent(),t=e[0],a=e[1];return!(t>0&&a>0||t<0&&a<0)}function Ir(r){var e=r.getLabelModel().get("formatter");if(r.type==="time"){var t=Lc(e);return function(n,i){return r.scale.getFormattedLabel(n,i,t)}}else{if(ve(e))return function(n){var i=r.scale.getLabel(n),o=e.replace("{value}",i??"");return o};if(_e(e)){if(r.type==="category")return function(n,i){return e(_a(r,n),n.value-r.scale.getExtent()[0],null)};var a=Sn();return function(n,i){var o=null;return a&&(o=a.makeAxisLabelFormatterParamBreak(o,n.break)),e(_a(r,n),i,o)}}else return function(n){return r.scale.getLabel(n)}}}function _a(r,e){return r.type==="category"?r.scale.getLabel(e):e.value}function vi(r){var e=r.get("interval");return e??"auto"}function Ml(r){return r.type==="category"&&vi(r.getLabelModel())===0}function hf(r,e){var t={};return M(r.mapDimensionsAll(e),function(a){t[bl(r,a)]=!0}),Ea(t)}function jt(r){return r==="middle"||r==="center"}function Dr(r){return r.getShallow("show")}function Pl(r){var e=r.get("breaks",!0);e==null}var vf=(function(){function r(){}return r.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},r.prototype.getCoordSysModel=function(){},r})(),co=[],ff={registerPreprocessor:Fc,registerProcessor:Hc,registerPostInit:Gc,registerPostUpdate:zc,registerUpdateLifecycle:$c,registerAction:Bc,registerCoordinateSystem:Nc,registerLayout:Oc,registerVisual:Rc,registerTransform:Ec,registerLoading:Pc,registerMap:Mc,registerImpl:Ic,PRIORITY:Tc,ComponentModel:ot,ComponentView:At,SeriesModel:Nt,ChartView:St,registerComponentModel:function(r){ot.registerClass(r)},registerComponentView:function(r){At.registerClass(r)},registerSeriesModel:function(r){Nt.registerClass(r)},registerChartView:function(r){St.registerClass(r)},registerCustomSeries:function(r,e){},registerSubTypeDefaulter:function(r,e){ot.registerSubTypeDefaulter(r,e)},registerPainter:function(r,e){Vc(r,e)}};function ut(r){if(J(r)){M(r,function(e){ut(e)});return}Oe(co,r)>=0||(co.push(r),_e(r)&&(r={install:r}),r.install(ff))}var df=$e(),br=$e(),Ye={estimate:1,determine:2};function ba(r){return{out:{noPxChangeTryDetermine:[]},kind:r}}function El(r,e){var t=re(e,function(a){return r.scale.parse(a)});return r.type==="time"&&t.length>0&&(t.sort(),t.unshift(t[0]),t.push(t[t.length-1])),t}function pf(r,e){var t=r.getLabelModel().get("customValues");if(t){var a=Ir(r),n=r.scale.getExtent(),i=El(r,t),o=lt(i,function(l){return l>=n[0]&&l<=n[1]});return{labels:re(o,function(l){var s={value:l};return{formattedLabel:a(s),rawLabel:r.scale.getLabel(s),tickValue:l,time:void 0,break:void 0}})}}return r.type==="category"?mf(r,e):_f(r)}function gf(r,e,t){var a=r.getTickModel().get("customValues");if(a){var n=r.scale.getExtent(),i=El(r,a);return{ticks:lt(i,function(o){return o>=n[0]&&o<=n[1]})}}return r.type==="category"?yf(r,e):{ticks:re(r.scale.getTicks(t),function(o){return o.value})}}function mf(r,e){var t=r.getLabelModel(),a=Rl(r,t,e);return!t.get("show")||r.scale.isBlank()?{labels:[]}:a}function Rl(r,e,t){var a=xf(r),n=vi(e),i=t.kind===Ye.estimate;if(!i){var o=Nl(a,n);if(o)return o}var l,s;_e(n)?l=zl(r,n):(s=n==="auto"?Sf(r,t):n,l=$l(r,s));var u={labels:l,labelCategoryInterval:s};return i?t.out.noPxChangeTryDetermine.push(function(){return Nn(a,n,u),!0}):Nn(a,n,u),u}function yf(r,e){var t=bf(r),a=vi(e),n=Nl(t,a);if(n)return n;var i,o;if((!e.get("show")||r.scale.isBlank())&&(i=[]),_e(a))i=zl(r,a,!0);else if(a==="auto"){var l=Rl(r,r.getLabelModel(),ba(Ye.determine));o=l.labelCategoryInterval,i=re(l.labels,function(s){return s.tickValue})}else o=a,i=$l(r,o,!0);return Nn(t,a,{ticks:i,tickCategoryInterval:o})}function _f(r){var e=r.scale.getTicks(),t=Ir(r);return{labels:re(e,function(a,n){return{formattedLabel:t(a,n),rawLabel:r.scale.getLabel(a),tickValue:a.value,time:a.time,break:a.break}})}}var bf=Ol("axisTick"),xf=Ol("axisLabel");function Ol(r){return function(t){return br(t)[r]||(br(t)[r]={list:[]})}}function Nl(r,e){for(var t=0;t<r.list.length;t++)if(r.list[t].key===e)return r.list[t].value}function Nn(r,e,t){return r.list.push({key:e,value:t}),t}function Sf(r,e){if(e.kind===Ye.estimate){var t=r.calculateCategoryInterval(e);return e.out.noPxChangeTryDetermine.push(function(){return br(r).autoInterval=t,!0}),t}var a=br(r).autoInterval;return a??(br(r).autoInterval=r.calculateCategoryInterval(e))}function wf(r,e){var t=e.kind,a=Af(r),n=Ir(r),i=(a.axisRotate-a.labelRotate)/180*Math.PI,o=r.scale,l=o.getExtent(),s=o.count();if(l[1]-l[0]<1)return 0;var u=1,c=40;s>c&&(u=Math.max(1,Math.floor(s/c)));for(var h=l[0],v=r.dataToCoord(h+1)-r.dataToCoord(h),f=Math.abs(v*Math.cos(i)),d=Math.abs(v*Math.sin(i)),p=0,y=0;h<=l[1];h+=u){var g=0,m=0,_=Fs(n({value:h}),a.font,"center","top");g=_.width*1.3,m=_.height*1.3,p=Math.max(p,g,7),y=Math.max(y,m,7)}var b=p/f,k=y/d;isNaN(b)&&(b=1/0),isNaN(k)&&(k=1/0);var x=Math.max(0,Math.floor(Math.min(b,k)));if(t===Ye.estimate)return e.out.noPxChangeTryDetermine.push(we(kf,null,r,x,s)),x;var S=Bl(r,x,s);return S??x}function kf(r,e,t){return Bl(r,e,t)==null}function Bl(r,e,t){var a=df(r.model),n=r.getExtent(),i=a.lastAutoInterval,o=a.lastTickCount;if(i!=null&&o!=null&&Math.abs(i-e)<=1&&Math.abs(o-t)<=1&&i>e&&a.axisExtent0===n[0]&&a.axisExtent1===n[1])return i;a.lastTickCount=t,a.lastAutoInterval=e,a.axisExtent0=n[0],a.axisExtent1=n[1]}function Af(r){var e=r.getLabelModel();return{axisRotate:r.getRotate?r.getRotate():r.isHorizontal&&!r.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function $l(r,e,t){var a=Ir(r),n=r.scale,i=n.getExtent(),o=r.getLabelModel(),l=[],s=Math.max((e||0)+1,1),u=i[0],c=n.count();u!==0&&s>1&&c/s>2&&(u=Math.round(Math.ceil(u/s)*s));var h=Ml(r),v=o.get("showMinLabel")||h,f=o.get("showMaxLabel")||h;v&&u!==i[0]&&p(i[0]);for(var d=u;d<=i[1];d+=s)p(d);f&&d-s!==i[1]&&p(i[1]);function p(y){var g={value:y};l.push(t?y:{formattedLabel:a(g),rawLabel:n.getLabel(g),tickValue:y,time:void 0,break:void 0})}return l}function zl(r,e,t){var a=r.scale,n=Ir(r),i=[];return M(a.getTicks(),function(o){var l=a.getLabel(o),s=o.value;e(o.value,l)&&i.push(t?s:{formattedLabel:n(o),rawLabel:l,tickValue:s,time:void 0,break:void 0})}),i}var ho=[0,1],Cf=(function(){function r(e,t,a){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=a||[0,0]}return r.prototype.contain=function(e){var t=this._extent,a=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return e>=a&&e<=n},r.prototype.containData=function(e){return this.scale.contain(this.scale.parse(e))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.getPixelPrecision=function(e){return Wc(e||this.scale.getExtent(),this._extent)},r.prototype.setExtent=function(e,t){var a=this._extent;a[0]=e,a[1]=t},r.prototype.dataToCoord=function(e,t){var a=this._extent,n=this.scale;return e=n.normalize(n.parse(e)),this.onBand&&n.type==="ordinal"&&(a=a.slice(),vo(a,n.count())),Bi(e,ho,a,t)},r.prototype.coordToData=function(e,t){var a=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(a=a.slice(),vo(a,n.count()));var i=Bi(e,a,ho,t);return this.scale.scale(i)},r.prototype.pointToData=function(e,t){},r.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),a=gf(this,t,{breakTicks:e.breakTicks,pruneByBreak:e.pruneByBreak}),n=a.ticks,i=re(n,function(l){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(l):l),tickValue:l}},this),o=t.get("alignWithLabel");return Df(this,i,o,e.clamp),i},r.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var a=this.scale.getMinorTicks(t),n=re(a,function(i){return re(i,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return n},r.prototype.getViewLabels=function(e){return e=e||ba(Ye.determine),pf(this,e).labels},r.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},r.prototype.getTickModel=function(){return this.model.getModel("axisTick")},r.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),a=t[1]-t[0]+(this.onBand?1:0);a===0&&(a=1);var n=Math.abs(e[1]-e[0]);return Math.abs(n)/a},r.prototype.calculateCategoryInterval=function(e){return e=e||ba(Ye.determine),wf(this,e)},r})();function vo(r,e){var t=r[1]-r[0],a=e,n=t/a/2;r[0]+=n,r[1]-=n}function Df(r,e,t,a){var n=e.length;if(!r.onBand||t||!n)return;var i=r.getExtent(),o,l;if(n===1)e[0].coord=i[0],e[0].onBand=!0,o=e[1]={coord:i[1],tickValue:e[0].tickValue,onBand:!0};else{var s=e[n-1].tickValue-e[0].tickValue,u=(e[n-1].coord-e[0].coord)/s;M(e,function(f){f.coord-=u/2,f.onBand=!0});var c=r.scale.getExtent();l=1+c[1]-e[n-1].tickValue,o={coord:e[n-1].coord+u*l,tickValue:c[1]+1,onBand:!0},e.push(o)}var h=i[0]>i[1];v(e[0].coord,i[0])&&(a?e[0].coord=i[0]:e.shift()),a&&v(i[0],e[0].coord)&&e.unshift({coord:i[0],onBand:!0}),v(i[1],o.coord)&&(a?o.coord=i[1]:e.pop()),a&&v(o.coord,i[1])&&e.push({coord:i[1],onBand:!0});function v(f,d){return f=De(f),d=De(d),h?f>d:f<d}}var fo=["label","labelLine","layoutOption","priority","defaultAttr","marginForce","minMarginForce","marginDefault","suggestIgnore"],Lf=1,xa=2,Gl=Lf|xa;function Sa(r,e,t){t=t||Gl,e?r.dirty|=t:r.dirty&=~t}function Hl(r,e){return e=e||Gl,r.dirty==null||!!(r.dirty&e)}function Dt(r){if(r)return Hl(r)&&Tf(r,r.label,r),r}function Tf(r,e,t){var a=e.getComputedTransform();r.transform=Vs(r.transform,a);var n=r.localRect=ca(r.localRect,e.getBoundingRect()),i=e.style,o=i.margin,l=t&&t.marginForce,s=t&&t.minMarginForce,u=t&&t.marginDefault,c=i.__marginType;c==null&&u&&(o=u,c=Nr.textMargin);for(var h=0;h<4;h++)Ja[h]=c===Nr.minMargin&&s&&s[h]!=null?s[h]:l&&l[h]!=null?l[h]:o?o[h]:0;c===Nr.textMargin&&Cn(n,Ja,!1,!1);var v=r.rect=ca(r.rect,n);return a&&v.applyTransform(a),c===Nr.minMargin&&Cn(v,Ja,!1,!1),r.axisAligned=Ws(a),(r.label=r.label||{}).ignore=e.ignore,Sa(r,!1),Sa(r,!0,xa),r}var Ja=[0,0,0,0];function If(r,e,t){return r.transform=Vs(r.transform,t),r.localRect=ca(r.localRect,e),r.rect=ca(r.rect,e),t&&r.rect.applyTransform(t),r.axisAligned=Ws(t),r.obb=void 0,(r.label=r.label||{}).ignore=!1,r}function Mf(r,e){if(r){r.label.x+=e.x,r.label.y+=e.y,r.label.markRedraw();var t=r.transform;t&&(t[4]+=e.x,t[5]+=e.y);var a=r.rect;a&&(a.x+=e.x,a.y+=e.y);var n=r.obb;n&&n.fromBoundingRect(r.localRect,t)}}function po(r,e){for(var t=0;t<fo.length;t++){var a=fo[t];r[a]==null&&(r[a]=e[a])}return Dt(r)}function go(r){var e=r.obb;return(!e||Hl(r,xa))&&(r.obb=e=e||new Uc,e.fromBoundingRect(r.localRect,r.transform),Sa(r,!1,xa)),e}function Pf(r){var e=[];r.sort(function(u,c){return(c.suggestIgnore?1:0)-(u.suggestIgnore?1:0)||c.priority-u.priority});function t(u){if(!u.ignore){var c=u.ensureState("emphasis");c.ignore==null&&(c.ignore=!1)}u.ignore=!0}for(var a=0;a<r.length;a++){var n=Dt(r[a]);if(!n.label.ignore){for(var i=n.label,o=n.labelLine,l=!1,s=0;s<e.length;s++)if(fi(n,e[s],null,{touchThreshold:.05})){l=!0;break}l?(t(i),o&&t(o)):e.push(n)}}}function fi(r,e,t,a){return!r||!e||r.label&&r.label.ignore||e.label&&e.label.ignore||!r.rect.intersect(e.rect,t,a)?!1:r.axisAligned&&e.axisAligned?!0:go(r).intersect(go(e),t,a)}function mo(r,e,t){var a=Xc.createCanvas(),n=e.getWidth(),i=e.getHeight(),o=a.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=n+"px",o.height=i+"px",a.setAttribute("data-zr-dom-id",r)),a.width=n*t,a.height=i*t,a}var en=(function(r){X(e,r);function e(t,a,n){var i=r.call(this)||this;i.motionBlur=!1,i.lastFrameAlpha=.7,i.dpr=1,i.virtual=!1,i.config={},i.incremental=!1,i.zlevel=0,i.maxRepaintRectCount=5,i.__dirty=!0,i.__firstTimePaint=!0,i.__used=!1,i.__drawIndex=0,i.__startIndex=0,i.__endIndex=0,i.__prevStartIndex=null,i.__prevEndIndex=null;var o;n=n||Zs,typeof t=="string"?o=mo(t,a,n):ke(t)&&(o=t,t=o.id),i.id=t,i.dom=o;var l=o.style;return l&&(Us(o),o.onselectstart=function(){return!1},l.padding="0",l.margin="0",l.borderWidth="0"),i.painter=a,i.dpr=n,i}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=mo("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,a,n,i){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],l=this.maxRepaintRectCount,s=!1,u=new ze(0,0,0,0);function c(m){if(!(!m.isFinite()||m.isZero()))if(o.length===0){var _=new ze(0,0,0,0);_.copy(m),o.push(_)}else{for(var b=!1,k=1/0,x=0,S=0;S<o.length;++S){var T=o[S];if(T.intersect(m)){var D=new ze(0,0,0,0);D.copy(T),D.union(m),o[S]=D,b=!0;break}else if(s){u.copy(m),u.union(T);var L=m.width*m.height,A=T.width*T.height,I=u.width*u.height,C=I-L-A;C<k&&(k=C,x=S)}}if(s&&(o[x].union(m),b=!0),!b){var _=new ze(0,0,0,0);_.copy(m),o.push(_)}s||(s=o.length>=l)}}for(var h=this.__startIndex;h<this.__endIndex;++h){var v=t[h];if(v){var f=v.shouldBePainted(n,i,!0,!0),d=v.__isRendered&&(v.__dirty&Dn||!f)?v.getPrevPaintRect():null;d&&c(d);var p=f&&(v.__dirty&Dn||!v.__isRendered)?v.getPaintRect():null;p&&c(p)}}for(var h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var v=a[h],f=v&&v.shouldBePainted(n,i,!0,!0);if(v&&(!f||!v.__zr)&&v.__isRendered){var d=v.getPrevPaintRect();d&&c(d)}}var y;do{y=!1;for(var h=0;h<o.length;){if(o[h].isZero()){o.splice(h,1);continue}for(var g=h+1;g<o.length;)o[h].intersect(o[g])?(y=!0,o[h].union(o[g]),o.splice(g,1)):g++;h++}}while(y);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,a){var n=this.dpr,i=this.dom,o=i.style,l=this.domBack;o&&(o.width=t+"px",o.height=a+"px"),i.width=t*n,i.height=a*n,l&&(l.width=t*n,l.height=a*n,n!==1&&this.ctxBack.scale(n,n))},e.prototype.clear=function(t,a,n){var i=this.dom,o=this.ctx,l=i.width,s=i.height;a=a||this.clearColor;var u=this.motionBlur&&!t,c=this.lastFrameAlpha,h=this.dpr,v=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,l/h,s/h));var f=this.domBack;function d(p,y,g,m){if(o.clearRect(p,y,g,m),a&&a!=="transparent"){var _=void 0;if(Yc(a)){var b=a.global||a.__width===g&&a.__height===m;_=b&&a.__canvasGradient||qc(o,a,{x:0,y:0,width:g,height:m}),a.__canvasGradient=_,a.__width=g,a.__height=m}else Kc(a)&&(a.scaleX=a.scaleX||h,a.scaleY=a.scaleY||h,_=jc(o,a,{dirty:function(){v.setUnpainted(),v.painter.refresh()}}));o.save(),o.fillStyle=_||a,o.fillRect(p,y,g,m),o.restore()}u&&(o.save(),o.globalAlpha=c,o.drawImage(f,p,y,g,m),o.restore())}!n||u?d(0,0,l,s):n.length&&M(n,function(p){d(p.x*h,p.y*h,p.width*h,p.height*h)})},e})(Zc),yo=1e5,Pt=314159,Wr=.01,Ef=.001;function Rf(r){return r?r.__builtin__?!0:!(typeof r.resize!="function"||typeof r.refresh!="function"):!1}function Of(r,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+r+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var Nf=(function(){function r(e,t,a,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var i=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=a=se({},a||{}),this.dpr=a.devicePixelRatio||Zs,this._singleCanvas=i,this.root=e;var o=e.style;o&&(Us(e),e.innerHTML=""),this.storage=t;var l=this._zlevelList;this._prevDisplayList=[];var s=this._layers;if(i){var c=e,h=c.width,v=c.height;a.width!=null&&(h=a.width),a.height!=null&&(v=a.height),this.dpr=a.devicePixelRatio||1,c.width=h*this.dpr,c.height=v*this.dpr,this._width=h,this._height=v;var f=new en(c,this,this.dpr);f.__builtin__=!0,f.initContext(),s[Pt]=f,f.zlevel=Pt,l.push(Pt),this._domRoot=e}else{this._width=$r(e,0,a),this._height=$r(e,1,a);var u=this._domRoot=Of(this._width,this._height);e.appendChild(u)}}return r.prototype.getType=function(){return"canvas"},r.prototype.isSingleCanvas=function(){return this._singleCanvas},r.prototype.getViewportRoot=function(){return this._domRoot},r.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},r.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),a=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,a,e,this._redrawId);for(var i=0;i<n.length;i++){var o=n[i],l=this._layers[o];if(!l.__builtin__&&l.refresh){var s=i===0?this._backgroundColor:null;l.refresh(s)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},r.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},r.prototype._paintHoverList=function(e){var t=e.length,a=this._hoverlayer;if(a&&a.clear(),!!t){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},i,o=0;o<t;o++){var l=e[o];l.__inHover&&(a||(a=this._hoverlayer=this.getLayer(yo)),i||(i=a.ctx,i.save()),Br(i,l,n,o===t-1))}i&&i.restore()}},r.prototype.getHoverLayer=function(){return this.getLayer(yo)},r.prototype.paintOne=function(e,t){Qc(e,t)},r.prototype._paintList=function(e,t,a,n){if(this._redrawId===n){a=a||!1,this._updateLayerStatus(e);var i=this._doPaintList(e,t,a),o=i.finished,l=i.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),l&&this._paintHoverList(e),o)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var s=this;Jc(function(){s._paintList(e,t,a,n)})}}},r.prototype._compositeManually=function(){var e=this.getLayer(Pt).ctx,t=this._domRoot.width,a=this._domRoot.height;e.clearRect(0,0,t,a),this.eachBuiltinLayer(function(n){n.virtual&&e.drawImage(n.dom,0,0,t,a)})},r.prototype._doPaintList=function(e,t,a){for(var n=this,i=[],o=this._opts.useDirtyRect,l=0;l<this._zlevelList.length;l++){var s=this._zlevelList[l],u=this._layers[s];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||a)&&i.push(u)}for(var c=!0,h=!1,v=function(p){var y=i[p],g=y.ctx,m=o&&y.createRepaintRects(e,t,f._width,f._height),_=a?y.__startIndex:y.__drawIndex,b=!a&&y.incremental&&Date.now,k=b&&Date.now(),x=y.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(y.__startIndex===y.__endIndex)y.clear(!1,x,m);else if(_===y.__startIndex){var S=e[_];(!S.incremental||!S.notClear||a)&&y.clear(!1,x,m)}_===-1&&(console.error("For some unknown reason. drawIndex is -1"),_=y.__startIndex);var T,D=function(C){var O={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(T=_;T<y.__endIndex;T++){var N=e[T];if(N.__inHover&&(h=!0),n._doPaintEl(N,y,o,C,O,T===y.__endIndex-1),b){var V=Date.now()-k;if(V>15)break}}O.prevElClipPaths&&g.restore()};if(m)if(m.length===0)T=y.__endIndex;else for(var L=f.dpr,A=0;A<m.length;++A){var I=m[A];g.save(),g.beginPath(),g.rect(I.x*L,I.y*L,I.width*L,I.height*L),g.clip(),D(I),g.restore()}else g.save(),D(),g.restore();y.__drawIndex=T,y.__drawIndex<y.__endIndex&&(c=!1)},f=this,d=0;d<i.length;d++)v(d);return Le.wxa&&M(this._layers,function(p){p&&p.ctx&&p.ctx.draw&&p.ctx.draw()}),{finished:c,needsRefreshHover:h}},r.prototype._doPaintEl=function(e,t,a,n,i,o){var l=t.ctx;if(a){var s=e.getPaintRect();(!n||s&&s.intersect(n))&&(Br(l,e,i,o),e.setPrevPaintRect(s))}else Br(l,e,i,o)},r.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Pt);var a=this._layers[e];return a||(a=new en("zr_"+e,this,this.dpr),a.zlevel=e,a.__builtin__=!0,this._layerConfig[e]?Ie(a,this._layerConfig[e],!0):this._layerConfig[e-Wr]&&Ie(a,this._layerConfig[e-Wr],!0),t&&(a.virtual=t),this.insertLayer(e,a),a.initContext()),a},r.prototype.insertLayer=function(e,t){var a=this._layers,n=this._zlevelList,i=n.length,o=this._domRoot,l=null,s=-1;if(!a[e]&&Rf(t)){if(i>0&&e>n[0]){for(s=0;s<i-1&&!(n[s]<e&&n[s+1]>e);s++);l=a[n[s]]}if(n.splice(s+1,0,e),a[e]=t,!t.virtual)if(l){var u=l.dom;u.nextSibling?o.insertBefore(t.dom,u.nextSibling):o.appendChild(t.dom)}else o.firstChild?o.insertBefore(t.dom,o.firstChild):o.appendChild(t.dom);t.painter||(t.painter=this)}},r.prototype.eachLayer=function(e,t){for(var a=this._zlevelList,n=0;n<a.length;n++){var i=a[n];e.call(t,this._layers[i],i)}},r.prototype.eachBuiltinLayer=function(e,t){for(var a=this._zlevelList,n=0;n<a.length;n++){var i=a[n],o=this._layers[i];o.__builtin__&&e.call(t,o,i)}},r.prototype.eachOtherLayer=function(e,t){for(var a=this._zlevelList,n=0;n<a.length;n++){var i=a[n],o=this._layers[i];o.__builtin__||e.call(t,o,i)}},r.prototype.getLayers=function(){return this._layers},r.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(h,v){h.__dirty=h.__used=!1});function t(h){i&&(i.__endIndex!==h&&(i.__dirty=!0),i.__endIndex=h)}if(this._singleCanvas)for(var a=1;a<e.length;a++){var n=e[a];if(n.zlevel!==e[a-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var i=null,o=0,l,s;for(s=0;s<e.length;s++){var n=e[s],u=n.zlevel,c=void 0;l!==u&&(l=u,o=0),n.incremental?(c=this.getLayer(u+Ef,this._needsManuallyCompositing),c.incremental=!0,o=1):c=this.getLayer(u+(o>0?Wr:0),this._needsManuallyCompositing),c.__builtin__||eh("ZLevel "+u+" has been used by unkown layer "+c.id),c!==i&&(c.__used=!0,c.__startIndex!==s&&(c.__dirty=!0),c.__startIndex=s,c.incremental?c.__drawIndex=-1:c.__drawIndex=s,t(s),i=c),n.__dirty&Dn&&!n.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=s))}t(s),this.eachBuiltinLayer(function(h,v){!h.__used&&h.getElementCount()>0&&(h.__dirty=!0,h.__startIndex=h.__endIndex=h.__drawIndex=0),h.__dirty&&h.__drawIndex<0&&(h.__drawIndex=h.__startIndex)})},r.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},r.prototype._clearLayer=function(e){e.clear()},r.prototype.setBackgroundColor=function(e){this._backgroundColor=e,M(this._layers,function(t){t.setUnpainted()})},r.prototype.configLayer=function(e,t){if(t){var a=this._layerConfig;a[e]?Ie(a[e],t,!0):a[e]=t;for(var n=0;n<this._zlevelList.length;n++){var i=this._zlevelList[n];if(i===e||i===e+Wr){var o=this._layers[i];Ie(o,a[e],!0)}}}},r.prototype.delLayer=function(e){var t=this._layers,a=this._zlevelList,n=t[e];n&&(n.dom.parentNode.removeChild(n.dom),delete t[e],a.splice(Oe(a,e),1))},r.prototype.resize=function(e,t){if(this._domRoot.style){var a=this._domRoot;a.style.display="none";var n=this._opts,i=this.root;if(e!=null&&(n.width=e),t!=null&&(n.height=t),e=$r(i,0,n),t=$r(i,1,n),a.style.display="",this._width!==e||t!==this._height){a.style.width=e+"px",a.style.height=t+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(Pt).resize(e,t)}return this},r.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},r.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},r.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Pt].dom;var t=new en("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var a=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var n=t.dom.width,i=t.dom.height;this.eachLayer(function(h){h.__builtin__?a.drawImage(h.dom,0,0,n,i):h.renderToCanvas&&(a.save(),h.renderToCanvas(a),a.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},l=this.storage.getDisplayList(!0),s=0,u=l.length;s<u;s++){var c=l[s];Br(a,c,o,s===u-1)}return t.dom},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r})();function Bf(r){r.registerPainter("canvas",Nf)}var $f=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return za(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var a=new Ae,n=Bt("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);a.add(n),n.setStyle(t.lineStyle);var i=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),l=i==="none"?"circle":i,s=t.itemHeight*.8,u=Bt(l,(t.itemWidth-s)/2,(t.itemHeight-s)/2,s,s,t.itemStyle.fill);a.add(u),u.setStyle(t.itemStyle);var c=t.iconRotate==="inherit"?o:t.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([t.itemWidth/2,t.itemHeight/2]),l.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill=Q.color.neutral00,u.style.lineWidth=2),a},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:6,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e})(Nt);function di(r,e){var t=r.mapDimensionsAll("defaultedLabel"),a=t.length;if(a===1){var n=$i(r,e,t[0]);return n!=null?n+"":null}else if(a){for(var i=[],o=0;o<t.length;o++)i.push($i(r,e,t[o]));return i.join(" ")}}function Fl(r,e){var t=r.mapDimensionsAll("defaultedLabel");if(!J(e))return e+"";for(var a=[],n=0;n<t.length;n++){var i=r.getDimensionIndex(t[n]);i>=0&&a.push(e[i])}return a.join(" ")}var pi=(function(r){X(e,r);function e(t,a,n,i){var o=r.call(this)||this;return o.updateData(t,a,n,i),o}return e.prototype._createSymbol=function(t,a,n,i,o,l){this.removeAll();var s=Bt(t,-1,-1,2,2,null,l);s.attr({z2:ue(o,100),culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),s.drift=zf,this._symbolType=t,this.add(s)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Xs(this.childAt(0))},e.prototype.downplay=function(){Ys(this.childAt(0))},e.prototype.setZ=function(t,a){var n=this.childAt(0);n.zlevel=t,n.z=a},e.prototype.setDraggable=function(t,a){var n=this.childAt(0);n.draggable=t,n.cursor=!a&&t?"move":n.cursor},e.prototype.updateData=function(t,a,n,i){this.silent=!1;var o=t.getItemVisual(a,"symbol")||"circle",l=t.hostModel,s=e.getSymbolSize(t,a),u=e.getSymbolZ2(t,a),c=o!==this._symbolType,h=i&&i.disableAnimation;if(c){var v=t.getItemVisual(a,"symbolKeepAspect");this._createSymbol(o,t,a,s,u,v)}else{var f=this.childAt(0);f.silent=!1;var d={scaleX:s[0]/2,scaleY:s[1]/2};h?f.attr(d):Pe(f,d,l,a),ri(f)}if(this._updateCommon(t,a,s,n,i),c){var f=this.childAt(0);if(!h){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:f.style.opacity}};f.scaleX=f.scaleY=0,f.style.opacity=0,Je(f,d,l,a)}}h&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,a,n,i,o){var l=this.childAt(0),s=t.hostModel,u,c,h,v,f,d,p,y,g;if(i&&(u=i.emphasisItemStyle,c=i.blurItemStyle,h=i.selectItemStyle,v=i.focus,f=i.blurScope,p=i.labelStatesModels,y=i.hoverScale,g=i.cursorStyle,d=i.emphasisDisabled),!i||t.hasItemOption){var m=i&&i.itemModel?i.itemModel:t.getItemModel(a),_=m.getModel("emphasis");u=_.getModel("itemStyle").getItemStyle(),h=m.getModel(["select","itemStyle"]).getItemStyle(),c=m.getModel(["blur","itemStyle"]).getItemStyle(),v=_.get("focus"),f=_.get("blurScope"),d=_.get("disabled"),p=Ht(m),y=_.getShallow("scale"),g=m.getShallow("cursor")}var b=t.getItemVisual(a,"symbolRotate");l.attr("rotation",(b||0)*Math.PI/180||0);var k=Na(t.getItemVisual(a,"symbolOffset"),n);k&&(l.x=k[0],l.y=k[1]),g&&l.attr("cursor",g);var x=t.getItemVisual(a,"style"),S=x.fill;if(l instanceof th){var T=l.style;l.useStyle(se({image:T.image,x:T.x,y:T.y,width:T.width,height:T.height},x))}else l.__isEmptyBrush?l.useStyle(se({},x)):l.useStyle(x),l.style.decal=null,l.setColor(S,o&&o.symbolInnerColor),l.style.strokeNoScale=!0;var D=t.getItemVisual(a,"liftZ"),L=this._z2;D!=null?L==null&&(this._z2=l.z2,l.z2+=D):L!=null&&(l.z2=L,this._z2=null);var A=o&&o.useNameLabel;Qt(l,p,{labelFetcher:s,labelDataIndex:a,defaultText:I,inheritColor:S,defaultOpacity:x.opacity});function I(N){return A?t.getName(N):di(t,N)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var C=l.ensureState("emphasis");C.style=u,l.ensureState("select").style=h,l.ensureState("blur").style=c;var O=y==null||y===!0?Math.max(1.1,3/this._sizeY):isFinite(y)&&y>0?+y:1;C.scaleX=this._sizeX*O,C.scaleY=this._sizeY*O,this.setSymbolScale(1),$t(this,v,f,d)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,a,n){var i=this.childAt(0),o=me(this).dataIndex,l=n&&n.animation;if(this.silent=i.silent=!0,n&&n.fadeLabel){var s=i.getTextContent();s&&zi(s,{style:{opacity:0}},a,{dataIndex:o,removeOpt:l,cb:function(){i.removeTextContent()}})}else i.removeTextContent();zi(i,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:o,cb:t,removeOpt:l})},e.getSymbolSize=function(t,a){return ai(t.getItemVisual(a,"symbolSize"))},e.getSymbolZ2=function(t,a){return t.getItemVisual(a,"z2")},e})(Ae);function zf(r,e){this.parent.drift(r,e)}function tn(r,e,t,a){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(a.isIgnore&&a.isIgnore(t))&&!(a.clipShape&&!a.clipShape.contain(e[0],e[1]))&&r.getItemVisual(t,"symbol")!=="none"}function _o(r){return r!=null&&!ke(r)&&(r={isIgnore:r}),r||{}}function bo(r){var e=r.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:Ht(e),cursorStyle:e.get("cursor")}}var Vl=(function(){function r(e){this.group=new Ae,this._SymbolCtor=e||pi}return r.prototype.updateData=function(e,t){this._progressiveEls=null,t=_o(t);var a=this.group,n=e.hostModel,i=this._data,o=this._SymbolCtor,l=t.disableAnimation,s=bo(e),u={disableAnimation:l},c=t.getSymbolPoint||function(h){return e.getItemLayout(h)};i||a.removeAll(),e.diff(i).add(function(h){var v=c(h);if(tn(e,v,h,t)){var f=new o(e,h,s,u);f.setPosition(v),e.setItemGraphicEl(h,f),a.add(f)}}).update(function(h,v){var f=i.getItemGraphicEl(v),d=c(h);if(!tn(e,d,h,t)){a.remove(f);return}var p=e.getItemVisual(h,"symbol")||"circle",y=f&&f.getSymbolType&&f.getSymbolType();if(!f||y&&y!==p)a.remove(f),f=new o(e,h,s,u),f.setPosition(d);else{f.updateData(e,h,s,u);var g={x:d[0],y:d[1]};l?f.attr(g):Pe(f,g,n)}a.add(f),e.setItemGraphicEl(h,f)}).remove(function(h){var v=i.getItemGraphicEl(h);v&&v.fadeOut(function(){a.remove(v)},n)}).execute(),this._getSymbolPoint=c,this._data=e},r.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(a,n){var i=e._getSymbolPoint(n);a.setPosition(i),a.markRedraw()})},r.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=bo(e),this._data=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(e,t,a){this._progressiveEls=[],a=_o(a);function n(s){s.isGroup||(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var o=t.getItemLayout(i);if(tn(t,o,i,a)){var l=new this._SymbolCtor(t,i,this._seriesScope);l.traverse(n),l.setPosition(o),this.group.add(l),t.setItemGraphicEl(i,l),this._progressiveEls.push(l)}}},r.prototype.eachRendered=function(e){Ba(this._progressiveEls||this.group,e)},r.prototype.remove=function(e){var t=this.group,a=this._data;a&&e?a.eachItemGraphicEl(function(n){n.fadeOut(function(){t.remove(n)},a.hostModel)}):t.removeAll()},r})();function Wl(r,e,t){var a=r.getBaseAxis(),n=r.getOtherAxis(a),i=Gf(n,t),o=a.dim,l=n.dim,s=e.mapDimension(l),u=e.mapDimension(o),c=l==="x"||l==="radius"?1:0,h=re(r.dimensions,function(d){return e.mapDimension(d)}),v=!1,f=e.getCalculationInfo("stackResultDimension");return zt(e,h[0])&&(v=!0,h[0]=f),zt(e,h[1])&&(v=!0,h[1]=f),{dataDimsForPoint:h,valueStart:i,valueAxisDim:l,baseAxisDim:o,stacked:!!v,valueDim:s,baseDim:u,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Gf(r,e){var t=0,a=r.scale.getExtent();return e==="start"?t=a[0]:e==="end"?t=a[1]:st(e)&&!isNaN(e)?t=e:a[0]>0?t=a[0]:a[1]<0&&(t=a[1]),t}function Ul(r,e,t,a){var n=NaN;r.stacked&&(n=t.get(t.getCalculationInfo("stackedOverDimension"),a)),isNaN(n)&&(n=r.valueStart);var i=r.baseDataOffset,o=[];return o[i]=t.get(r.baseDim,a),o[1-i]=n,e.dataToPoint(o)}function Hf(r,e){var t=[];return e.diff(r).add(function(a){t.push({cmd:"+",idx:a})}).update(function(a,n){t.push({cmd:"=",idx:n,idx1:a})}).remove(function(a){t.push({cmd:"-",idx:a})}).execute(),t}function Ff(r,e,t,a,n,i,o,l){for(var s=Hf(r,e),u=[],c=[],h=[],v=[],f=[],d=[],p=[],y=Wl(n,e,o),g=r.getLayout("points")||[],m=e.getLayout("points")||[],_=0;_<s.length;_++){var b=s[_],k=!0,x=void 0,S=void 0;switch(b.cmd){case"=":x=b.idx*2,S=b.idx1*2;var T=g[x],D=g[x+1],L=m[S],A=m[S+1];(isNaN(T)||isNaN(D))&&(T=L,D=A),u.push(T,D),c.push(L,A),h.push(t[x],t[x+1]),v.push(a[S],a[S+1]),p.push(e.getRawIndex(b.idx1));break;case"+":var I=b.idx,C=y.dataDimsForPoint,O=n.dataToPoint([e.get(C[0],I),e.get(C[1],I)]);S=I*2,u.push(O[0],O[1]),c.push(m[S],m[S+1]);var N=Ul(y,n,e,I);h.push(N[0],N[1]),v.push(a[S],a[S+1]),p.push(e.getRawIndex(I));break;case"-":k=!1}k&&(f.push(b),d.push(d.length))}d.sort(function(he,et){return p[he]-p[et]});for(var V=u.length,K=Qe(V),$=Qe(V),Z=Qe(V),Y=Qe(V),F=[],_=0;_<d.length;_++){var q=d[_],j=_*2,le=q*2;K[j]=u[le],K[j+1]=u[le+1],$[j]=c[le],$[j+1]=c[le+1],Z[j]=h[le],Z[j+1]=h[le+1],Y[j]=v[le],Y[j+1]=v[le+1],F[_]=f[q]}return{current:K,next:$,stackedOnCurrent:Z,stackedOnNext:Y,status:F}}var pt=Math.min,gt=Math.max;function Ot(r,e){return isNaN(r)||isNaN(e)}function Bn(r,e,t,a,n,i,o,l,s){for(var u,c,h,v,f,d,p=t,y=0;y<a;y++){var g=e[p*2],m=e[p*2+1];if(p>=n||p<0)break;if(Ot(g,m)){if(s){p+=i;continue}break}if(p===t)r[i>0?"moveTo":"lineTo"](g,m),h=g,v=m;else{var _=g-u,b=m-c;if(_*_+b*b<.5){p+=i;continue}if(o>0){for(var k=p+i,x=e[k*2],S=e[k*2+1];x===g&&S===m&&y<a;)y++,k+=i,p+=i,x=e[k*2],S=e[k*2+1],g=e[p*2],m=e[p*2+1],_=g-u,b=m-c;var T=y+1;if(s)for(;Ot(x,S)&&T<a;)T++,k+=i,x=e[k*2],S=e[k*2+1];var D=.5,L=0,A=0,I=void 0,C=void 0;if(T>=a||Ot(x,S))f=g,d=m;else{L=x-u,A=S-c;var O=g-u,N=x-g,V=m-c,K=S-m,$=void 0,Z=void 0;if(l==="x"){$=Math.abs(O),Z=Math.abs(N);var Y=L>0?1:-1;f=g-Y*$*o,d=m,I=g+Y*Z*o,C=m}else if(l==="y"){$=Math.abs(V),Z=Math.abs(K);var F=A>0?1:-1;f=g,d=m-F*$*o,I=g,C=m+F*Z*o}else $=Math.sqrt(O*O+V*V),Z=Math.sqrt(N*N+K*K),D=Z/(Z+$),f=g-L*o*(1-D),d=m-A*o*(1-D),I=g+L*o*D,C=m+A*o*D,I=pt(I,gt(x,g)),C=pt(C,gt(S,m)),I=gt(I,pt(x,g)),C=gt(C,pt(S,m)),L=I-g,A=C-m,f=g-L*$/Z,d=m-A*$/Z,f=pt(f,gt(u,g)),d=pt(d,gt(c,m)),f=gt(f,pt(u,g)),d=gt(d,pt(c,m)),L=g-f,A=m-d,I=g+L*Z/$,C=m+A*Z/$}r.bezierCurveTo(h,v,f,d,g,m),h=I,v=C}else r.lineTo(g,m)}u=g,c=m,p+=i}return y}var Zl=(function(){function r(){this.smooth=0,this.smoothConstraint=!0}return r})(),Vf=(function(r){X(e,r);function e(t){var a=r.call(this,t)||this;return a.type="ec-polyline",a}return e.prototype.getDefaultStyle=function(){return{stroke:Q.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new Zl},e.prototype.buildPath=function(t,a){var n=a.points,i=0,o=n.length/2;if(a.connectNulls){for(;o>0&&Ot(n[o*2-2],n[o*2-1]);o--);for(;i<o&&Ot(n[i*2],n[i*2+1]);i++);}for(;i<o;)i+=Bn(t,n,i,o,o,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},e.prototype.getPointOn=function(t,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,i=n.data,o=rh.CMD,l,s,u=a==="x",c=[],h=0;h<i.length;){var v=i[h++],f=void 0,d=void 0,p=void 0,y=void 0,g=void 0,m=void 0,_=void 0;switch(v){case o.M:l=i[h++],s=i[h++];break;case o.L:if(f=i[h++],d=i[h++],_=u?(t-l)/(f-l):(t-s)/(d-s),_<=1&&_>=0){var b=u?(d-s)*_+s:(f-l)*_+l;return u?[t,b]:[b,t]}l=f,s=d;break;case o.C:f=i[h++],d=i[h++],p=i[h++],y=i[h++],g=i[h++],m=i[h++];var k=u?Gi(l,f,p,g,t,c):Gi(s,d,y,m,t,c);if(k>0)for(var x=0;x<k;x++){var S=c[x];if(S<=1&&S>=0){var b=u?Hi(s,d,y,m,S):Hi(l,f,p,g,S);return u?[t,b]:[b,t]}}l=g,s=m;break}}},e})(Tt),Wf=(function(r){X(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})(Zl),Uf=(function(r){X(e,r);function e(t){var a=r.call(this,t)||this;return a.type="ec-polygon",a}return e.prototype.getDefaultShape=function(){return new Wf},e.prototype.buildPath=function(t,a){var n=a.points,i=a.stackedOnPoints,o=0,l=n.length/2,s=a.smoothMonotone;if(a.connectNulls){for(;l>0&&Ot(n[l*2-2],n[l*2-1]);l--);for(;o<l&&Ot(n[o*2],n[o*2+1]);o++);}for(;o<l;){var u=Bn(t,n,o,l,l,1,a.smooth,s,a.connectNulls);Bn(t,i,o+u-1,u,l,-1,a.stackedOnSmooth,s,a.connectNulls),o+=u+1,t.closePath()}},e})(Tt);function Xl(r,e,t,a,n){var i=r.getArea(),o=i.x,l=i.y,s=i.width,u=i.height,c=t.get(["lineStyle","width"])||0;o-=c/2,l-=c/2,s+=c,u+=c,s=Math.ceil(s),o!==Math.floor(o)&&(o=Math.floor(o),s++);var h=new qe({shape:{x:o,y:l,width:s,height:u}});if(e){var v=r.getBaseAxis(),f=v.isHorizontal(),d=v.inverse;f?(d&&(h.shape.x+=s),h.shape.width=0):(d||(h.shape.y+=u),h.shape.height=0);var p=_e(n)?function(y){n(y,h)}:null;Je(h,{shape:{width:s,height:u,x:o,y:l}},t,null,a,p)}return h}function Yl(r,e,t){var a=r.getArea(),n=De(a.r0,1),i=De(a.r,1),o=new ni({shape:{cx:De(r.cx,1),cy:De(r.cy,1),r0:n,r:i,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});if(e){var l=r.getBaseAxis().dim==="angle";l?o.shape.endAngle=a.startAngle:o.shape.r=n,Je(o,{shape:{endAngle:a.endAngle,r:i}},t)}return o}function ql(r,e,t,a,n){if(r){if(r.type==="polar")return Yl(r,e,t);if(r.type==="cartesian2d")return Xl(r,e,t,a,n)}else return null;return null}function Jt(r,e){return r.type===e}function xo(r,e){if(r.length===e.length){for(var t=0;t<r.length;t++)if(r[t]!==e[t])return;return!0}}function So(r){for(var e=1/0,t=1/0,a=-1/0,n=-1/0,i=0;i<r.length;){var o=r[i++],l=r[i++];isNaN(o)||(e=Math.min(o,e),a=Math.max(o,a)),isNaN(l)||(t=Math.min(l,t),n=Math.max(l,n))}return[[e,t],[a,n]]}function wo(r,e){var t=So(r),a=t[0],n=t[1],i=So(e),o=i[0],l=i[1];return Math.max(Math.abs(a[0]-o[0]),Math.abs(a[1]-o[1]),Math.abs(n[0]-l[0]),Math.abs(n[1]-l[1]))}function ko(r){return st(r)?r:r?.5:0}function Zf(r,e,t){if(!t.valueDim)return[];for(var a=e.count(),n=Qe(a*2),i=0;i<a;i++){var o=Ul(t,r,e,i);n[i*2]=o[0],n[i*2+1]=o[1]}return n}function mt(r,e,t,a,n){var i=t.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,l=[],s=0,u=[],c=[],h=[],v=[];if(n){for(s=0;s<r.length;s+=2){var f=e||r;!isNaN(f[s])&&!isNaN(f[s+1])&&v.push(r[s],r[s+1])}r=v}for(s=0;s<r.length-2;s+=2)switch(h[0]=r[s+2],h[1]=r[s+3],c[0]=r[s],c[1]=r[s+1],l.push(c[0],c[1]),a){case"end":u[o]=h[o],u[1-o]=c[1-o],l.push(u[0],u[1]);break;case"middle":var d=(c[o]+h[o])/2,p=[];u[o]=p[o]=d,u[1-o]=c[1-o],p[1-o]=h[1-o],l.push(u[0],u[1]),l.push(p[0],p[1]);break;default:u[o]=c[o],u[1-o]=h[1-o],l.push(u[0],u[1])}return l.push(r[s++],r[s++]),l}function Xf(r,e){var t=[],a=r.length,n,i;function o(c,h,v){var f=c.coord,d=(v-f)/(h.coord-f),p=ih(d,[c.color,h.color]);return{coord:v,color:p}}for(var l=0;l<a;l++){var s=r[l],u=s.coord;if(u<0)n=s;else if(u>e){i?t.push(o(i,s,e)):n&&t.push(o(n,s,0),o(n,s,e));break}else n&&(t.push(o(n,s,0)),n=null),t.push(s),i=s}return t}function Yf(r,e,t){var a=r.getVisual("visualMeta");if(!(!a||!a.length||!r.count())&&e.type==="cartesian2d"){for(var n,i,o=a.length-1;o>=0;o--){var l=r.getDimensionInfo(a[o].dimension);if(n=l&&l.coordDim,n==="x"||n==="y"){i=a[o];break}}if(i){var s=e.getAxis(n),u=re(i.stops,function(_){return{coord:s.toGlobalCoord(s.dataToCoord(_.value)),color:_.color}}),c=u.length,h=i.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),h.reverse());var v=Xf(u,n==="x"?t.getWidth():t.getHeight()),f=v.length;if(!f&&c)return u[0].coord<0?h[1]?h[1]:u[c-1].color:h[0]?h[0]:u[0].color;var d=10,p=v[0].coord-d,y=v[f-1].coord+d,g=y-p;if(g<.001)return"transparent";M(v,function(_){_.offset=(_.coord-p)/g}),v.push({offset:f?v[f-1].offset:.5,color:h[1]||"transparent"}),v.unshift({offset:f?v[0].offset:.5,color:h[0]||"transparent"});var m=new nh(0,0,0,0,v,!0);return m[n]=p,m[n+"2"]=y,m}}}function qf(r,e,t){var a=r.get("showAllSymbol"),n=a==="auto";if(!(a&&!n)){var i=t.getAxesByScale("ordinal")[0];if(i&&!(n&&Kf(i,e))){var o=e.mapDimension(i.dim),l={};return M(i.getViewLabels(),function(s){var u=i.scale.getRawOrdinalNumber(s.tickValue);l[u]=1}),function(s){return!l.hasOwnProperty(e.get(o,s))}}}}function Kf(r,e){var t=r.getExtent(),a=Math.abs(t[1]-t[0])/r.scale.count();isNaN(a)&&(a=0);for(var n=e.count(),i=Math.max(1,Math.round(n/5)),o=0;o<n;o+=i)if(pi.getSymbolSize(e,o)[r.isHorizontal()?1:0]*1.5>a)return!1;return!0}function jf(r,e){return isNaN(r)||isNaN(e)}function Qf(r){for(var e=r.length/2;e>0&&jf(r[e*2-2],r[e*2-1]);e--);return e-1}function Ao(r,e){return[r[e*2],r[e*2+1]]}function Jf(r,e,t){for(var a=r.length/2,n=t==="x"?0:1,i,o,l=0,s=-1,u=0;u<a;u++)if(o=r[u*2+n],!(isNaN(o)||isNaN(r[u*2+1-n]))){if(u===0){i=o;continue}if(i<=e&&o>=e||i>=e&&o<=e){s=u;break}l=u,i=o}return{range:[l,s],t:(e-i)/(o-i)}}function Kl(r){if(r.get(["endLabel","show"]))return!0;for(var e=0;e<ha.length;e++)if(r.get([ha[e],"endLabel","show"]))return!0;return!1}function rn(r,e,t,a){if(Jt(e,"cartesian2d")){var n=a.getModel("endLabel"),i=n.get("valueAnimation"),o=a.getData(),l={lastFrameIndex:0},s=Kl(a)?function(f,d){r._endLabelOnDuring(f,d,o,l,i,n,e)}:null,u=e.getBaseAxis().isHorizontal(),c=Xl(e,t,a,function(){var f=r._endLabel;f&&t&&l.originalX!=null&&f.attr({x:l.originalX,y:l.originalY})},s);if(!a.get("clip",!0)){var h=c.shape,v=Math.max(h.width,h.height);u?(h.y-=v,h.height+=v*2):(h.x-=v,h.width+=v*2)}return s&&s(1,c),c}else return Yl(e,t,a)}function ed(r,e){var t=e.getBaseAxis(),a=t.isHorizontal(),n=t.inverse,i=a?n?"right":"left":"center",o=a?"middle":n?"top":"bottom";return{normal:{align:r.get("align")||i,verticalAlign:r.get("verticalAlign")||o}}}var td=(function(r){X(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.init=function(){var t=new Ae,a=new Vl;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=t,this._changePolyState=we(this._changePolyState,this)},e.prototype.render=function(t,a,n){var i=t.coordinateSystem,o=this.group,l=t.getData(),s=t.getModel("lineStyle"),u=t.getModel("areaStyle"),c=l.getLayout("points")||[],h=i.type==="polar",v=this._coordSys,f=this._symbolDraw,d=this._polyline,p=this._polygon,y=this._lineGroup,g=!a.ssr&&t.get("animation"),m=!u.isEmpty(),_=u.get("origin"),b=Wl(i,l,_),k=m&&Zf(i,l,b),x=t.get("showSymbol"),S=t.get("connectNulls"),T=x&&!h&&qf(t,l,i),D=this._data;D&&D.eachItemGraphicEl(function(he,et){he.__temp&&(o.remove(he),D.setItemGraphicEl(et,null))}),x||f.remove(),o.add(y);var L=h?!1:t.get("step"),A;i&&i.getArea&&t.get("clip",!0)&&(A=i.getArea(),A.width!=null?(A.x-=.1,A.y-=.1,A.width+=.2,A.height+=.2):A.r0&&(A.r0-=.5,A.r+=.5)),this._clipShapeForSymbol=A;var I=Yf(l,i,n)||l.getVisual("style")[l.getVisual("drawType")];if(!(d&&v.type===i.type&&L===this._step))x&&f.updateData(l,{isIgnore:T,clipShape:A,disableAnimation:!0,getSymbolPoint:function(he){return[c[he*2],c[he*2+1]]}}),g&&this._initSymbolLabelAnimation(l,i,A),L&&(k&&(k=mt(k,c,i,L,S)),c=mt(c,null,i,L,S)),d=this._newPolyline(c),m?p=this._newPolygon(c,k):p&&(y.remove(p),p=this._polygon=null),h||this._initOrUpdateEndLabel(t,i,Xt(I)),y.setClipPath(rn(this,i,!0,t));else{m&&!p?p=this._newPolygon(c,k):p&&!m&&(y.remove(p),p=this._polygon=null),h||this._initOrUpdateEndLabel(t,i,Xt(I));var C=y.getClipPath();if(C){var O=rn(this,i,!1,t);Je(C,{shape:O.shape},t)}else y.setClipPath(rn(this,i,!0,t));x&&f.updateData(l,{isIgnore:T,clipShape:A,disableAnimation:!0,getSymbolPoint:function(he){return[c[he*2],c[he*2+1]]}}),(!xo(this._stackedOnPoints,k)||!xo(this._points,c))&&(g?this._doUpdateAnimation(l,k,i,n,L,_,S):(L&&(k&&(k=mt(k,c,i,L,S)),c=mt(c,null,i,L,S)),d.setShape({points:c}),p&&p.setShape({points:c,stackedOnPoints:k})))}var N=t.getModel("emphasis"),V=N.get("focus"),K=N.get("blurScope"),$=N.get("disabled");if(d.useStyle(Be(s.getLineStyle(),{fill:"none",stroke:I,lineJoin:"bevel"})),Sr(d,t,"lineStyle"),d.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var Z=d.getState("emphasis").style;Z.lineWidth=+d.style.lineWidth+1}me(d).seriesIndex=t.seriesIndex,$t(d,V,K,$);var Y=ko(t.get("smooth")),F=t.get("smoothMonotone");if(d.setShape({smooth:Y,smoothMonotone:F,connectNulls:S}),p){var q=l.getCalculationInfo("stackedOnSeries"),j=0;p.useStyle(Be(u.getAreaStyle(),{fill:I,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),q&&(j=ko(q.get("smooth"))),p.setShape({smooth:Y,stackedOnSmooth:j,smoothMonotone:F,connectNulls:S}),Sr(p,t,"areaStyle"),me(p).seriesIndex=t.seriesIndex,$t(p,V,K,$)}var le=this._changePolyState;l.eachItemGraphicEl(function(he){he&&(he.onHoverStateChange=le)}),this._polyline.onHoverStateChange=le,this._data=l,this._coordSys=i,this._stackedOnPoints=k,this._points=c,this._step=L,this._valueOrigin=_,t.get("triggerLineEvent")&&(this.packEventData(t,d),p&&this.packEventData(t,p))},e.prototype.packEventData=function(t,a){me(a).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,a,n,i){var o=t.getData(),l=Ln(o,i);if(this._changePolyState("emphasis"),!(l instanceof Array)&&l!=null&&l>=0){var s=o.getLayout("points"),u=o.getItemGraphicEl(l);if(!u){var c=s[l*2],h=s[l*2+1];if(isNaN(c)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,h))return;var v=t.get("zlevel")||0,f=t.get("z")||0;u=new pi(o,l),u.x=c,u.y=h,u.setZ(v,f);var d=u.getSymbolPath().getTextContent();d&&(d.zlevel=v,d.z=f,d.z2=this._polyline.z2+1),u.__temp=!0,o.setItemGraphicEl(l,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else St.prototype.highlight.call(this,t,a,n,i)},e.prototype.downplay=function(t,a,n,i){var o=t.getData(),l=Ln(o,i);if(this._changePolyState("normal"),l!=null&&l>=0){var s=o.getItemGraphicEl(l);s&&(s.__temp?(o.setItemGraphicEl(l,null),this.group.remove(s)):s.downplay())}else St.prototype.downplay.call(this,t,a,n,i)},e.prototype._changePolyState=function(t){var a=this._polygon;Fi(this._polyline,t),a&&Fi(a,t)},e.prototype._newPolyline=function(t){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new Vf({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},e.prototype._newPolygon=function(t,a){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Uf({shape:{points:t,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},e.prototype._initSymbolLabelAnimation=function(t,a,n){var i,o,l=a.getBaseAxis(),s=l.inverse;a.type==="cartesian2d"?(i=l.isHorizontal(),o=!1):a.type==="polar"&&(i=l.dim==="angle",o=!0);var u=t.hostModel,c=u.get("animationDuration");_e(c)&&(c=c(null));var h=u.get("animationDelay")||0,v=_e(h)?h(null):h;t.eachItemGraphicEl(function(f,d){var p=f;if(p){var y=[f.x,f.y],g=void 0,m=void 0,_=void 0;if(n)if(o){var b=n,k=a.pointToCoord(y);i?(g=b.startAngle,m=b.endAngle,_=-k[1]/180*Math.PI):(g=b.r0,m=b.r,_=k[0])}else{var x=n;i?(g=x.x,m=x.x+x.width,_=f.x):(g=x.y+x.height,m=x.y,_=f.y)}var S=m===g?0:(_-g)/(m-g);s&&(S=1-S);var T=_e(h)?h(d):c*S+v,D=p.getSymbolPath(),L=D.getTextContent();p.attr({scaleX:0,scaleY:0}),p.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:T}),L&&L.animateFrom({style:{opacity:0}},{duration:300,delay:T}),D.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,a,n){var i=t.getModel("endLabel");if(Kl(t)){var o=t.getData(),l=this._polyline,s=o.getLayout("points");if(!s){l.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Ct({z2:200}),u.ignoreClip=!0,l.setTextContent(this._endLabel),l.disableLabelAnimation=!0);var c=Qf(s);c>=0&&(Qt(l,Ht(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:c,defaultText:function(h,v,f){return f!=null?Fl(o,f):di(o,h)},enableTextSetter:!0},ed(i,a)),l.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,a,n,i,o,l,s){var u=this._endLabel,c=this._polyline;if(u){t<1&&i.originalX==null&&(i.originalX=u.x,i.originalY=u.y);var h=n.getLayout("points"),v=n.hostModel,f=v.get("connectNulls"),d=l.get("precision"),p=l.get("distance")||0,y=s.getBaseAxis(),g=y.isHorizontal(),m=y.inverse,_=a.shape,b=m?g?_.x:_.y+_.height:g?_.x+_.width:_.y,k=(g?p:0)*(m?-1:1),x=(g?0:-p)*(m?-1:1),S=g?"x":"y",T=Jf(h,b,S),D=T.range,L=D[1]-D[0],A=void 0;if(L>=1){if(L>1&&!f){var I=Ao(h,D[0]);u.attr({x:I[0]+k,y:I[1]+x}),o&&(A=v.getRawValue(D[0]))}else{var I=c.getPointOn(b,S);I&&u.attr({x:I[0]+k,y:I[1]+x});var C=v.getRawValue(D[0]),O=v.getRawValue(D[1]);o&&(A=ah(n,d,C,O,T.t))}i.lastFrameIndex=D[0]}else{var N=t===1||i.lastFrameIndex>0?D[0]:0,I=Ao(h,N);o&&(A=v.getRawValue(N)),u.attr({x:I[0]+k,y:I[1]+x})}if(o){var V=qs(u);typeof V.setLabelText=="function"&&V.setLabelText(A)}}},e.prototype._doUpdateAnimation=function(t,a,n,i,o,l,s){var u=this._polyline,c=this._polygon,h=t.hostModel,v=Ff(this._data,t,this._stackedOnPoints,a,this._coordSys,n,this._valueOrigin),f=v.current,d=v.stackedOnCurrent,p=v.next,y=v.stackedOnNext;if(o&&(d=mt(v.stackedOnCurrent,v.current,n,o,s),f=mt(v.current,null,n,o,s),y=mt(v.stackedOnNext,v.next,n,o,s),p=mt(v.next,null,n,o,s)),wo(f,p)>3e3||c&&wo(d,y)>3e3){u.stopAnimation(),u.setShape({points:p}),c&&(c.stopAnimation(),c.setShape({points:p,stackedOnPoints:y}));return}u.shape.__points=v.current,u.shape.points=f;var g={shape:{points:p}};v.current!==f&&(g.shape.__points=v.next),u.stopAnimation(),Pe(u,g,h),c&&(c.setShape({points:f,stackedOnPoints:d}),c.stopAnimation(),Pe(c,{shape:{stackedOnPoints:y}},h),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var m=[],_=v.status,b=0;b<_.length;b++){var k=_[b].cmd;if(k==="="){var x=t.getItemGraphicEl(_[b].idx1);x&&m.push({el:x,ptIdx:b})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var S=u.shape.__points,T=0;T<m.length;T++){var D=m[T].el,L=m[T].ptIdx*2;D.x=S[L],D.y=S[L+1],D.markRedraw()}})},e.prototype.remove=function(t){var a=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(i,o){i.__temp&&(a.remove(i),n.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e})(St);function gi(r,e){return{seriesType:r,plan:Oa(),reset:function(t){var a=t.getData(),n=t.coordinateSystem,i=t.pipelineContext,o=e||i.large;if(n){var l=re(n.dimensions,function(f){return a.mapDimension(f)}).slice(0,2),s=l.length,u=a.getCalculationInfo("stackResultDimension");zt(a,l[0])&&(l[0]=u),zt(a,l[1])&&(l[1]=u);var c=a.getStore(),h=a.getDimensionIndex(l[0]),v=a.getDimensionIndex(l[1]);return s&&{progress:function(f,d){for(var p=f.end-f.start,y=o&&Qe(p*s),g=[],m=[],_=f.start,b=0;_<f.end;_++){var k=void 0;if(s===1){var x=c.get(h,_);k=n.dataToPoint(x,null,m)}else g[0]=c.get(h,_),g[1]=c.get(v,_),k=n.dataToPoint(g,null,m);o?(y[b++]=k[0],y[b++]=k[1]):d.setItemLayout(_,k.slice())}o&&d.setLayout("points",y)}}}}}}var rd={average:function(r){for(var e=0,t=0,a=0;a<r.length;a++)isNaN(r[a])||(e+=r[a],t++);return t===0?NaN:e/t},sum:function(r){for(var e=0,t=0;t<r.length;t++)e+=r[t]||0;return e},max:function(r){for(var e=-1/0,t=0;t<r.length;t++)r[t]>e&&(e=r[t]);return isFinite(e)?e:NaN},min:function(r){for(var e=1/0,t=0;t<r.length;t++)r[t]<e&&(e=r[t]);return isFinite(e)?e:NaN},nearest:function(r){return r[0]}},ad=function(r){return Math.round(r.length/2)};function jl(r){return{seriesType:r,reset:function(e,t,a){var n=e.getData(),i=e.get("sampling"),o=e.coordinateSystem,l=n.count();if(l>10&&o.type==="cartesian2d"&&i){var s=o.getBaseAxis(),u=o.getOtherAxis(s),c=s.getExtent(),h=a.getDevicePixelRatio(),v=Math.abs(c[1]-c[0])*(h||1),f=Math.round(l/v);if(isFinite(f)&&f>1){i==="lttb"?e.setData(n.lttbDownSample(n.mapDimension(u.dim),1/f)):i==="minmax"&&e.setData(n.minmaxDownSample(n.mapDimension(u.dim),1/f));var d=void 0;ve(i)?d=rd[i]:_e(i)&&(d=i),d&&e.setData(n.downSample(n.mapDimension(u.dim),1/f,d,ad))}}}}}function nd(r){r.registerChartView(td),r.registerSeriesModel($f),r.registerLayout(gi("line",!0)),r.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),a=e.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",a)}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,jl("line"))}var $n=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,a){return za(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,a,n){var i=this.coordinateSystem;if(i&&i.clampData){var o=i.clampData(t),l=i.dataToPoint(o);if(n)M(i.getAxes(),function(v,f){if(v.type==="category"&&a!=null){var d=v.getTicksCoords(),p=v.getTickModel().get("alignWithLabel"),y=o[f],g=a[f]==="x1"||a[f]==="y1";if(g&&!p&&(y+=1),d.length<2)return;if(d.length===2){l[f]=v.toGlobalCoord(v.getExtent()[g?1:0]);return}for(var m=void 0,_=void 0,b=1,k=0;k<d.length;k++){var x=d[k].coord,S=k===d.length-1?d[k-1].tickValue+b:d[k].tickValue;if(S===y){_=x;break}else if(S<y)m=x;else if(m!=null&&S>y){_=(x+m)/2;break}k===1&&(b=S-d[0].tickValue)}_==null&&(m?m&&(_=d[d.length-1].coord):_=d[0].coord),l[f]=v.toGlobalCoord(_)}});else{var s=this.getData(),u=s.getLayout("offset"),c=s.getLayout("size"),h=i.getBaseAxis().isHorizontal()?0:1;l[h]+=u+c/2}return l}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",defaultBarGap:"10%"},e})(Nt);Nt.registerClass($n);var id=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return za(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),a=this.get("largeThreshold");return a>t&&(t=a),t},e.prototype.brushSelector=function(t,a,n){return n.rect(a.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Ks($n.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:Q.color.primary,borderWidth:2}},realtimeSort:!1}),e})($n),od=(function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r})(),Co=(function(r){X(e,r);function e(t){var a=r.call(this,t)||this;return a.type="sausage",a}return e.prototype.getDefaultShape=function(){return new od},e.prototype.buildPath=function(t,a){var n=a.cx,i=a.cy,o=Math.max(a.r0||0,0),l=Math.max(a.r,0),s=(l-o)*.5,u=o+s,c=a.startAngle,h=a.endAngle,v=a.clockwise,f=Math.PI*2,d=v?h-c<f:c-h<f;d||(c=h-(v?f:-f));var p=Math.cos(c),y=Math.sin(c),g=Math.cos(h),m=Math.sin(h);d?(t.moveTo(p*o+n,y*o+i),t.arc(p*u+n,y*u+i,s,-Math.PI+c,c,!v)):t.moveTo(p*l+n,y*l+i),t.arc(n,i,l,c,h,!v),t.arc(g*u+n,m*u+i,s,h-Math.PI*2,h-Math.PI,!v),o!==0&&t.arc(n,i,o,h,c,v)},e})(Tt);function sd(r,e){e=e||{};var t=e.isRoundCap;return function(a,n,i){var o=n.position;if(!o||o instanceof Array)return Vi(a,n,i);var l=r(o),s=n.distance!=null?n.distance:5,u=this.shape,c=u.cx,h=u.cy,v=u.r,f=u.r0,d=(v+f)/2,p=u.startAngle,y=u.endAngle,g=(p+y)/2,m=t?Math.abs(v-f)/2:0,_=Math.cos,b=Math.sin,k=c+v*_(p),x=h+v*b(p),S="left",T="top";switch(l){case"startArc":k=c+(f-s)*_(g),x=h+(f-s)*b(g),S="center",T="top";break;case"insideStartArc":k=c+(f+s)*_(g),x=h+(f+s)*b(g),S="center",T="bottom";break;case"startAngle":k=c+d*_(p)+Ur(p,s+m,!1),x=h+d*b(p)+Zr(p,s+m,!1),S="right",T="middle";break;case"insideStartAngle":k=c+d*_(p)+Ur(p,-s+m,!1),x=h+d*b(p)+Zr(p,-s+m,!1),S="left",T="middle";break;case"middle":k=c+d*_(g),x=h+d*b(g),S="center",T="middle";break;case"endArc":k=c+(v+s)*_(g),x=h+(v+s)*b(g),S="center",T="bottom";break;case"insideEndArc":k=c+(v-s)*_(g),x=h+(v-s)*b(g),S="center",T="top";break;case"endAngle":k=c+d*_(y)+Ur(y,s+m,!0),x=h+d*b(y)+Zr(y,s+m,!0),S="left",T="middle";break;case"insideEndAngle":k=c+d*_(y)+Ur(y,-s+m,!0),x=h+d*b(y)+Zr(y,-s+m,!0),S="right",T="middle";break;default:return Vi(a,n,i)}return a=a||{},a.x=k,a.y=x,a.align=S,a.verticalAlign=T,a}}function ld(r,e,t,a){if(st(a)){r.setTextConfig({rotation:a});return}else if(J(e)){r.setTextConfig({rotation:0});return}var n=r.shape,i=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,l=(i+o)/2,s,u=t(e);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":s=l;break;case"startAngle":case"insideStartAngle":s=i;break;case"endAngle":case"insideEndAngle":s=o;break;default:r.setTextConfig({rotation:0});return}var c=Math.PI*1.5-s;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),r.setTextConfig({rotation:c})}function Ur(r,e,t){return e*Math.sin(r)*(t?-1:1)}function Zr(r,e,t){return e*Math.cos(r)*(t?1:-1)}function ud(r,e,t){var a=r.get("borderRadius");if(a==null)return{cornerRadius:0};J(a)||(a=[a,a,a,a]);var n=Math.abs(e.r||0-e.r0||0);return{cornerRadius:re(a,function(i){return An(i,n)})}}var an=Math.max,nn=Math.min;function cd(r,e){var t=r.getArea&&r.getArea();if(Jt(r,"cartesian2d")){var a=r.getBaseAxis();if(a.type!=="category"||!a.onBand){var n=e.getLayout("bandWidth");a.isHorizontal()?(t.x-=n,t.width+=n*2):(t.y-=n,t.height+=n*2)}}return t}var hd=(function(r){X(e,r);function e(){var t=r.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,a,n,i){this._model=t,this._removeOnRenderedListener(n),this._updateDrawMode(t);var o=t.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,a,n):this._renderNormal(t,a,n,i))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,a){this._progressiveEls=[],this._incrementalRenderLarge(t,a)},e.prototype.eachRendered=function(t){Ba(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var a=t.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},e.prototype._renderNormal=function(t,a,n,i){var o=this.group,l=t.getData(),s=this._data,u=t.coordinateSystem,c=u.getBaseAxis(),h;u.type==="cartesian2d"?h=c.isHorizontal():u.type==="polar"&&(h=c.dim==="angle");var v=t.isAnimationEnabled()?t:null,f=vd(t,u);f&&this._enableRealtimeSort(f,l,n);var d=t.get("clip",!0)||f,p=cd(u,l);o.removeClipPath();var y=t.get("roundCap",!0),g=t.get("showBackground",!0),m=t.getModel("backgroundStyle"),_=m.get("borderRadius")||0,b=[],k=this._backgroundEls,x=i&&i.isInitSort,S=i&&i.type==="changeAxisOrder";function T(A){var I=Xr[u.type](l,A);if(!I)return null;var C=_d(u,h,I);return C.useStyle(m.getItemStyle()),u.type==="cartesian2d"?C.setShape("r",_):C.setShape("cornerRadius",_),b[A]=C,C}l.diff(s).add(function(A){var I=l.getItemModel(A),C=Xr[u.type](l,A,I);if(C&&(g&&T(A),!(!l.hasValue(A)||!Mo[u.type](C)))){var O=!1;d&&(O=Do[u.type](p,C));var N=Lo[u.type](t,l,A,C,h,v,c.model,!1,y);f&&(N.forceLabelAnimation=!0),Po(N,l,A,I,C,t,h,u.type==="polar"),x?N.attr({shape:C}):f?To(f,v,N,C,A,h,!1,!1):Je(N,{shape:C},t,A),l.setItemGraphicEl(A,N),o.add(N),N.ignore=O}}).update(function(A,I){var C=l.getItemModel(A),O=Xr[u.type](l,A,C);if(O){if(g){var N=void 0;k.length===0?N=T(I):(N=k[I],N.useStyle(m.getItemStyle()),u.type==="cartesian2d"?N.setShape("r",_):N.setShape("cornerRadius",_),b[A]=N);var V=Xr[u.type](l,A),K=Jl(h,V,u);Pe(N,{shape:K},v,A)}var $=s.getItemGraphicEl(I);if(!l.hasValue(A)||!Mo[u.type](O)){o.remove($);return}var Z=!1;d&&(Z=Do[u.type](p,O),Z&&o.remove($));var Y=$&&($.type==="sector"&&y||$.type==="sausage"&&!y);if(Y&&($&&Ua($,t,I),$=null),$?ri($):$=Lo[u.type](t,l,A,O,h,v,c.model,!0,y),f&&($.forceLabelAnimation=!0),S){var F=$.getTextContent();if(F){var q=qs(F);q.prevValue!=null&&(q.prevValue=q.value)}}else Po($,l,A,C,O,t,h,u.type==="polar");x?$.attr({shape:O}):f?To(f,v,$,O,A,h,!0,S):Pe($,{shape:O},t,A,null),l.setItemGraphicEl(A,$),$.ignore=Z,o.add($)}}).remove(function(A){var I=s.getItemGraphicEl(A);I&&Ua(I,t,A)}).execute();var D=this._backgroundGroup||(this._backgroundGroup=new Ae);D.removeAll();for(var L=0;L<b.length;++L)D.add(b[L]);o.add(D),this._backgroundEls=b,this._data=l},e.prototype._renderLarge=function(t,a,n){this._clear(),Ro(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,a){this._removeBackground(),Ro(a,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var a=t.get("clip",!0)&&ql(t.coordinateSystem,!1,t),n=this.group;a?n.setClipPath(a):n.removeClipPath()},e.prototype._enableRealtimeSort=function(t,a,n){var i=this;if(a.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(a,t,n),this._isFirstFrame=!1;else{var l=function(s){var u=a.getItemGraphicEl(s),c=u&&u.shape;return c&&Math.abs(o.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){i._updateSortWithinSameData(a,l,o,n)},n.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,a,n){var i=[];return t.each(t.mapDimension(a.dim),function(o,l){var s=n(l);s=s??NaN,i.push({dataIndex:l,mappedValue:s,ordinalNumber:o})}),i.sort(function(o,l){return l.mappedValue-o.mappedValue}),{ordinalNumbers:re(i,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,a,n){for(var i=n.scale,o=t.mapDimension(n.dim),l=Number.MAX_VALUE,s=0,u=i.getOrdinalMeta().categories.length;s<u;++s){var c=t.rawIndexOf(o,i.getRawOrdinalNumber(s)),h=c<0?Number.MIN_VALUE:a(t.indexOfRawIndex(c));if(h>l)return!0;l=h}return!1},e.prototype._isOrderDifferentInView=function(t,a){for(var n=a.scale,i=n.getExtent(),o=Math.max(0,i[0]),l=Math.min(i[1],n.getOrdinalMeta().categories.length-1);o<=l;++o)if(t.ordinalNumbers[o]!==n.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(t,a,n,i){if(this._isOrderChangedWithinSameData(t,a,n)){var o=this._dataSort(t,n,a);this._isOrderDifferentInView(o,n)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(t,a,n){var i=a.baseAxis,o=this._dataSort(t,i,function(l){return t.get(t.mapDimension(a.otherAxis.dim),l)});n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:o})},e.prototype.remove=function(t,a){this._clear(this._model),this._removeOnRenderedListener(a)},e.prototype.dispose=function(t,a){this._removeOnRenderedListener(a)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var a=this.group,n=this._data;t&&t.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(i){Ua(i,t,me(i).dataIndex)})):a.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e})(St),Do={cartesian2d:function(r,e){var t=e.width<0?-1:1,a=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),a<0&&(e.y+=e.height,e.height=-e.height);var n=r.x+r.width,i=r.y+r.height,o=an(e.x,r.x),l=nn(e.x+e.width,n),s=an(e.y,r.y),u=nn(e.y+e.height,i),c=l<o,h=u<s;return e.x=c&&o>n?l:o,e.y=h&&s>i?u:s,e.width=c?0:l-o,e.height=h?0:u-s,t<0&&(e.x+=e.width,e.width=-e.width),a<0&&(e.y+=e.height,e.height=-e.height),c||h},polar:function(r,e){var t=e.r0<=e.r?1:-1;if(t<0){var a=e.r;e.r=e.r0,e.r0=a}var n=nn(e.r,r.r),i=an(e.r0,r.r0);e.r=n,e.r0=i;var o=n-i<0;if(t<0){var a=e.r;e.r=e.r0,e.r0=a}return o}},Lo={cartesian2d:function(r,e,t,a,n,i,o,l,s){var u=new qe({shape:se({},a),z2:1});if(u.__dataIndex=t,u.name="item",i){var c=u.shape,h=n?"height":"width";c[h]=0}return u},polar:function(r,e,t,a,n,i,o,l,s){var u=!n&&s?Co:ni,c=new u({shape:a,z2:1});c.name="item";var h=Ql(n);if(c.calculateTextPosition=sd(h,{isRoundCap:u===Co}),i){var v=c.shape,f=n?"r":"endAngle",d={};v[f]=n?a.r0:a.startAngle,d[f]=a[f],(l?Pe:Je)(c,{shape:d},i)}return c}};function vd(r,e){var t=r.get("realtimeSort",!0),a=e.getBaseAxis();if(t&&a.type==="category"&&e.type==="cartesian2d")return{baseAxis:a,otherAxis:e.getOtherAxis(a)}}function To(r,e,t,a,n,i,o,l){var s,u;i?(u={x:a.x,width:a.width},s={y:a.y,height:a.height}):(u={y:a.y,height:a.height},s={x:a.x,width:a.width}),l||(o?Pe:Je)(t,{shape:s},e,n,null);var c=e?r.baseAxis.model:null;(o?Pe:Je)(t,{shape:u},c,n)}function Io(r,e){for(var t=0;t<e.length;t++)if(!isFinite(r[e[t]]))return!0;return!1}var fd=["x","y","width","height"],dd=["cx","cy","r","startAngle","endAngle"],Mo={cartesian2d:function(r){return!Io(r,fd)},polar:function(r){return!Io(r,dd)}},Xr={cartesian2d:function(r,e,t){var a=r.getItemLayout(e);if(!a)return null;var n=t?gd(t,a):0,i=a.width>0?1:-1,o=a.height>0?1:-1;return{x:a.x+i*n/2,y:a.y+o*n/2,width:a.width-i*n,height:a.height-o*n}},polar:function(r,e,t){var a=r.getItemLayout(e);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}}};function pd(r){return r.startAngle!=null&&r.endAngle!=null&&r.startAngle===r.endAngle}function Ql(r){return(function(e){var t=e?"Arc":"Angle";return function(a){switch(a){case"start":case"insideStart":case"end":case"insideEnd":return a+t;default:return a}}})(r)}function Po(r,e,t,a,n,i,o,l){var s=e.getItemVisual(t,"style");if(l){if(!i.get("roundCap")){var c=r.shape,h=ud(a.getModel("itemStyle"),c);se(c,h),r.setShape(c)}}else{var u=a.get(["itemStyle","borderRadius"])||0;r.setShape("r",u)}r.useStyle(s);var v=a.getShallow("cursor");v&&r.attr("cursor",v);var f=l?o?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":o?n.height>=0?"bottom":"top":n.width>=0?"right":"left",d=Ht(a);Qt(r,d,{labelFetcher:i,labelDataIndex:t,defaultText:di(i.getData(),t),inheritColor:s.fill,defaultOpacity:s.opacity,defaultOutsidePosition:f});var p=r.getTextContent();if(l&&p){var y=a.get(["label","position"]);r.textConfig.inside=y==="middle"?!0:null,ld(r,y==="outside"?f:y,Ql(o),a.get(["label","rotate"]))}oh(p,d,i.getRawValue(t),function(m){return Fl(e,m)});var g=a.getModel(["emphasis"]);$t(r,g.get("focus"),g.get("blurScope"),g.get("disabled")),Sr(r,a),pd(n)&&(r.style.fill="none",r.style.stroke="none",M(r.states,function(m){m.style&&(m.style.fill=m.style.stroke="none")}))}function gd(r,e){var t=r.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var a=r.get(["itemStyle","borderWidth"])||0,n=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),i=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(a,n,i)}var md=(function(){function r(){}return r})(),Eo=(function(r){X(e,r);function e(t){var a=r.call(this,t)||this;return a.type="largeBar",a}return e.prototype.getDefaultShape=function(){return new md},e.prototype.buildPath=function(t,a){for(var n=a.points,i=this.baseDimIdx,o=1-this.baseDimIdx,l=[],s=[],u=this.barWidth,c=0;c<n.length;c+=3)s[i]=u,s[o]=n[c+2],l[i]=n[c+i],l[o]=n[c+o],t.rect(l[0],l[1],s[0],s[1])},e})(Tt);function Ro(r,e,t,a){var n=r.getData(),i=n.getLayout("valueAxisHorizontal")?1:0,o=n.getLayout("largeDataIndices"),l=n.getLayout("size"),s=r.getModel("backgroundStyle"),u=n.getLayout("largeBackgroundPoints");if(u){var c=new Eo({shape:{points:u},incremental:!!a,silent:!0,z2:0});c.baseDimIdx=i,c.largeDataIndices=o,c.barWidth=l,c.useStyle(s.getItemStyle()),e.add(c),t&&t.push(c)}var h=new Eo({shape:{points:n.getLayout("largePoints")},incremental:!!a,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=i,h.largeDataIndices=o,h.barWidth=l,e.add(h),h.useStyle(n.getVisual("style")),h.style.stroke=null,me(h).seriesIndex=r.seriesIndex,r.get("silent")||(h.on("mousedown",Oo),h.on("mousemove",Oo)),t&&t.push(h)}var Oo=sh(function(r){var e=this,t=yd(e,r.offsetX,r.offsetY);me(e).dataIndex=t>=0?t:null},30,!1);function yd(r,e,t){for(var a=r.baseDimIdx,n=1-a,i=r.shape.points,o=r.largeDataIndices,l=[],s=[],u=r.barWidth,c=0,h=i.length/3;c<h;c++){var v=c*3;if(s[a]=u,s[n]=i[v+2],l[a]=i[v+a],l[n]=i[v+n],s[n]<0&&(l[n]+=s[n],s[n]=-s[n]),e>=l[0]&&e<=l[0]+s[0]&&t>=l[1]&&t<=l[1]+s[1])return o[c]}return-1}function Jl(r,e,t){if(Jt(t,"cartesian2d")){var a=e,n=t.getArea();return{x:r?a.x:n.x,y:r?n.y:a.y,width:r?a.width:n.width,height:r?n.height:a.height}}else{var n=t.getArea(),i=e;return{cx:n.cx,cy:n.cy,r0:r?n.r0:i.r0,r:r?n.r:i.r,startAngle:r?i.startAngle:0,endAngle:r?i.endAngle:Math.PI*2}}}function _d(r,e,t){var a=r.type==="polar"?ni:qe;return new a({shape:Jl(e,t,r),silent:!0,z2:0})}function bd(r){r.registerChartView(hd),r.registerSeriesModel(id),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,fe(Vv,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Wv("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,jl("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var a=e.componentType||"series";t.eachComponent({mainType:a,query:e},function(n){e.sortInfo&&n.axis.setCategorySortInfo(e.sortInfo)})})}function xd(r,e,t){e=J(e)&&{coordDimensions:e}||se({encodeDefine:r.getEncode()},e);var a=r.getSource(),n=_l(a,e).dimensions,i=new Rt(n,r);return i.initData(a,t),i}var Sd=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,a){return za(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,a,n){return n.point(a.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:Q.color.primary}},universalTransition:{divideShape:"clone"}},e})(Nt),eu=4,wd=(function(){function r(){}return r})(),kd=(function(r){X(e,r);function e(t){var a=r.call(this,t)||this;return a._off=0,a.hoverDataIdx=-1,a}return e.prototype.getDefaultShape=function(){return new wd},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,a){var n=a.points,i=a.size,o=this.symbolProxy,l=o.shape,s=t.getContext?t.getContext():t,u=s&&i[0]<eu,c=this.softClipShape,h;if(u){this._ctx=s;return}for(this._ctx=null,h=this._off;h<n.length;){var v=n[h++],f=n[h++];isNaN(v)||isNaN(f)||c&&!c.contain(v,f)||(l.x=v-i[0]/2,l.y=f-i[1]/2,l.width=i[0],l.height=i[1],o.buildPath(t,l,!0))}this.incremental&&(this._off=h,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,a=t.points,n=t.size,i=this._ctx,o=this.softClipShape,l;if(i){for(l=this._off;l<a.length;){var s=a[l++],u=a[l++];isNaN(s)||isNaN(u)||o&&!o.contain(s,u)||i.fillRect(s-n[0]/2,u-n[1]/2,n[0],n[1])}this.incremental&&(this._off=l,this.notClear=!0)}},e.prototype.findDataIndex=function(t,a){for(var n=this.shape,i=n.points,o=n.size,l=Math.max(o[0],4),s=Math.max(o[1],4),u=i.length/2-1;u>=0;u--){var c=u*2,h=i[c]-l/2,v=i[c+1]-s/2;if(t>=h&&a>=v&&t<=h+l&&a<=v+s)return u}return-1},e.prototype.contain=function(t,a){var n=this.transformCoordToLocal(t,a),i=this.getBoundingRect();if(t=n[0],a=n[1],i.contain(t,a)){var o=this.hoverDataIdx=this.findDataIndex(t,a);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var a=this.shape,n=a.points,i=a.size,o=i[0],l=i[1],s=1/0,u=1/0,c=-1/0,h=-1/0,v=0;v<n.length;){var f=n[v++],d=n[v++];s=Math.min(f,s),c=Math.max(f,c),u=Math.min(d,u),h=Math.max(d,h)}t=this._rect=new ze(s-o/2,u-l/2,c-s+o,h-u+l)}return t},e})(Tt),Ad=(function(){function r(){this.group=new Ae}return r.prototype.updateData=function(e,t){this._clear();var a=this._create();a.setShape({points:e.getLayout("points")}),this._setCommon(a,e,t)},r.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var n=(a.endIndex-a.startIndex)*2,i=a.startIndex*4*2;t=new Float32Array(t.buffer,i,n)}a.setShape("points",t),a.reset()})},r.prototype.incrementalPrepareUpdate=function(e){this._clear()},r.prototype.incrementalUpdate=function(e,t,a){var n=this._newAdded[0],i=t.getLayout("points"),o=n&&n.shape.points;if(o&&o.length<2e4){var l=o.length,s=new Float32Array(l+i.length);s.set(o),s.set(i,l),n.endIndex=e.end,n.setShape({points:s})}else{this._newAdded=[];var u=this._create();u.startIndex=e.start,u.endIndex=e.end,u.incremental=!0,u.setShape({points:i}),this._setCommon(u,t,a)}},r.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},r.prototype._create=function(){var e=new kd({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},r.prototype._setCommon=function(e,t,a){var n=t.hostModel;a=a||{};var i=t.getVisual("symbolSize");e.setShape("size",i instanceof Array?i:[i,i]),e.softClipShape=a.clipShape||null,e.symbolProxy=Bt(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<eu;e.useStyle(n.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var l=t.getVisual("style"),s=l&&l.fill;s&&e.setColor(s);var u=me(e);u.seriesIndex=n.seriesIndex,e.on("mousemove",function(c){u.dataIndex=null;var h=e.hoverDataIdx;h>=0&&(u.dataIndex=h+(e.startIndex||0))})},r.prototype.remove=function(){this._clear()},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r})(),Cd=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,n){var i=t.getData(),o=this._updateSymbolDraw(i,t);o.updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,a,n){var i=t.getData(),o=this._updateSymbolDraw(i,t);o.incrementalPrepareUpdate(i),this._finished=!1},e.prototype.incrementalRender=function(t,a,n){this._symbolDraw.incrementalUpdate(t,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=t.end===a.getData().count()},e.prototype.updateTransform=function(t,a,n){var i=t.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var o=gi("").reset(t,a,n);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var a=t.coordinateSystem;return a&&a.getArea&&a.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,a){var n=this._symbolDraw,i=a.pipelineContext,o=i.large;return(!n||o!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=o?new Ad:new Vl,this._isLargeDraw=o,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(t,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e})(St),tu={left:0,right:0,top:0,bottom:0},wa=["25%","25%"],Dd=(function(r){X(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.mergeDefaultAndTheme=function(t,a){var n=ii(t.outerBounds);r.prototype.mergeDefaultAndTheme.apply(this,arguments),n&&t.outerBounds&&va(t.outerBounds,n)},e.prototype.mergeOption=function(t,a){r.prototype.mergeOption.apply(this,arguments),this.option.outerBounds&&t.outerBounds&&va(this.option.outerBounds,t.outerBounds)},e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"15%",top:65,right:"10%",bottom:80,containLabel:!1,outerBoundsMode:"auto",outerBounds:tu,outerBoundsContain:"all",outerBoundsClampWidth:wa[0],outerBoundsClampHeight:wa[1],backgroundColor:Q.color.transparent,borderWidth:1,borderColor:Q.color.neutral30},e})(ot),zn=(function(r){X(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",at).models[0]},e.type="cartesian2dAxis",e})(ot);oi(zn,vf);var ru={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:Q.color.axisLine,width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15],breakLine:!0},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12,color:Q.color.axisLabel,textMargin:[0,3]},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:Q.color.axisSplitLine,width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:[Q.color.backgroundTint,Q.color.backgroundTransparent]}},breakArea:{show:!0,itemStyle:{color:Q.color.neutral00,borderColor:Q.color.border,borderWidth:1,borderType:[3,3],opacity:.6},zigzagAmplitude:4,zigzagMinSpan:4,zigzagMaxSpan:20,zigzagZ:100,expandOnClick:!0},breakLabelLayout:{moveOverlap:"auto"}},Ld=Ie({boundaryGap:!0,deduplication:null,jitter:0,jitterOverlap:!0,jitterMargin:2,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto",show:"auto"},axisLabel:{interval:"auto"}},ru),mi=Ie({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:Q.color.axisMinorSplitLine,width:1}}},ru),Td=Ie({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},mi),Id=Be({logBase:10},mi);const Md={category:Ld,value:mi,time:Td,log:Id};var Pd={value:1,category:1,time:1,log:1},Ed=null;function Rd(){return Ed}function No(r,e,t,a){M(Pd,function(n,i){var o=Ie(Ie({},Md[i],!0),a,!0),l=(function(s){X(u,s);function u(){var c=s!==null&&s.apply(this,arguments)||this;return c.type=e+"Axis."+i,c}return u.prototype.mergeDefaultAndTheme=function(c,h){var v=lh(this),f=v?ii(c):{},d=h.getTheme();Ie(c,d.get(i+"Axis")),Ie(c,this.getDefaultOption()),c.type=Bo(c),v&&va(c,f,v)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=Rn.createByAxisModel(this))},u.prototype.getCategories=function(c){var h=this.option;if(h.type==="category")return c?h.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.prototype.updateAxisBreaks=function(c){return{breaks:[]}},u.type=e+"Axis."+i,u.defaultOption=o,u})(t);r.registerComponentModel(l)}),r.registerSubTypeDefaulter(e+"Axis",Bo)}function Bo(r){return r.type||(r.data?"category":"value")}var Od=(function(){function r(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return r.prototype.getAxis=function(e){return this._axes[e]},r.prototype.getAxes=function(){return re(this._dimList,function(e){return this._axes[e]},this)},r.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),lt(this.getAxes(),function(t){return t.scale.type===e})},r.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},r})(),Gn=["x","y"];function $o(r){return(r.type==="interval"||r.type==="time")&&!r.hasBreaks()}var Nd=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=Gn,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,a=this.getAxis("y").scale;if(!(!$o(t)||!$o(a))){var n=t.getExtent(),i=a.getExtent(),o=this.dataToPoint([n[0],i[0]]),l=this.dataToPoint([n[1],i[1]]),s=n[1]-n[0],u=i[1]-i[0];if(!(!s||!u)){var c=(l[0]-o[0])/s,h=(l[1]-o[1])/u,v=o[0]-n[0]*c,f=o[1]-i[0]*h,d=this._transform=[c,0,0,h,v,f];this._invTransform=js([],d)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var a=this.getAxis("x"),n=this.getAxis("y");return a.contain(a.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,a){var n=this.dataToPoint(t),i=this.dataToPoint(a),o=this.getArea(),l=new ze(n[0],n[1],i[0]-n[0],i[1]-n[1]);return o.intersect(l)},e.prototype.dataToPoint=function(t,a,n){n=n||[];var i=t[0],o=t[1];if(this._transform&&i!=null&&isFinite(i)&&o!=null&&isFinite(o))return Yt(n,t,this._transform);var l=this.getAxis("x"),s=this.getAxis("y");return n[0]=l.toGlobalCoord(l.dataToCoord(i,a)),n[1]=s.toGlobalCoord(s.dataToCoord(o,a)),n},e.prototype.clampData=function(t,a){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,o=n.getExtent(),l=i.getExtent(),s=n.parse(t[0]),u=i.parse(t[1]);return a=a||[],a[0]=Math.min(Math.max(Math.min(o[0],o[1]),s),Math.max(o[0],o[1])),a[1]=Math.min(Math.max(Math.min(l[0],l[1]),u),Math.max(l[0],l[1])),a},e.prototype.pointToData=function(t,a,n){if(n=n||[],this._invTransform)return Yt(n,t,this._invTransform);var i=this.getAxis("x"),o=this.getAxis("y");return n[0]=i.coordToData(i.toLocalCoord(t[0]),a),n[1]=o.coordToData(o.toLocalCoord(t[1]),a),n},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var a=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(a[0],a[1])-t,o=Math.min(n[0],n[1])-t,l=Math.max(a[0],a[1])-i+t,s=Math.max(n[0],n[1])-o+t;return new ze(i,o,l,s)},e})(Od),Bd=(function(r){X(e,r);function e(t,a,n,i,o){var l=r.call(this,t,a,n)||this;return l.index=0,l.type=i||"value",l.position=o||"bottom",l}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var a=this.getExtent();return a[0]=this.toGlobalCoord(a[0]),a[1]=this.toGlobalCoord(a[1]),t&&a[0]>a[1]&&a.reverse(),a},e.prototype.pointToData=function(t,a){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),a)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e})(Cf),$d="expandAxisBreak",xt=Math.PI,zd=[[1,2,1,2],[5,3,5,3],[8,3,8,3]],Gd=[[0,1,0,1],[0,3,0,3],[0,3,0,3]],Lr=$e(),au=$e(),nu=(function(){function r(e){this.recordMap={},this.resolveAxisNameOverlap=e}return r.prototype.ensureRecord=function(e){var t=e.axis.dim,a=e.componentIndex,n=this.recordMap,i=n[t]||(n[t]=[]);return i[a]||(i[a]={ready:{}})},r})();function Hd(r,e,t,a){var n=t.axis,i=e.ensureRecord(t),o=[],l,s=yi(r.axisName)&&jt(r.nameLocation);M(a,function(d){var p=Dt(d);if(!(!p||p.label.ignore)){o.push(p);var y=i.transGroup;s&&(y.transform?js(cr,y.transform):ch(cr),p.transform&&hh(cr,cr,p.transform),ze.copy(Yr,p.localRect),Yr.applyTransform(cr),l?l.union(Yr):ze.copy(l=new ze(0,0,0,0),Yr))}});var u=Math.abs(i.dirVec.x)>.1?"x":"y",c=i.transGroup[u];if(o.sort(function(d,p){return Math.abs(d.label[u]-c)-Math.abs(p.label[u]-c)}),s&&l){var h=n.getExtent(),v=Math.min(h[0],h[1]),f=Math.max(h[0],h[1])-v;l.union(new ze(v,0,f,1))}i.stOccupiedRect=l,i.labelInfoList=o}var cr=li(),Yr=new ze(0,0,0,0),iu=function(r,e,t,a,n,i){if(jt(r.nameLocation)){var o=i.stOccupiedRect;o&&ou(If({},o,i.transGroup.transform),a,n)}else su(i.labelInfoList,i.dirVec,a,n)};function ou(r,e,t){var a=new wr;fi(r,e,a,{direction:Math.atan2(t.y,t.x),bidirectional:!1,touchThreshold:.05})&&Mf(e,a)}function su(r,e,t,a){for(var n=wr.dot(a,e)>=0,i=0,o=r.length;i<o;i++){var l=r[n?i:o-1-i];l.label.ignore||ou(l,t,a)}}var wt=(function(){function r(e,t,a,n){this.group=new Ae,this._axisModel=e,this._api=t,this._local={},this._shared=n||new nu(iu),this._resetCfgDetermined(a)}return r.prototype.updateCfg=function(e){var t=this._cfg.raw;t.position=e.position,t.labelOffset=e.labelOffset,this._resetCfgDetermined(t)},r.prototype.__getRawCfg=function(){return this._cfg.raw},r.prototype._resetCfgDetermined=function(e){var t=this._axisModel,a=t.getDefaultOption?t.getDefaultOption():{},n=ue(e.axisName,t.get("name")),i=t.get("nameMoveOverlap");(i==null||i==="auto")&&(i=ue(e.defaultNameMoveOverlap,!0));var o={raw:e,position:e.position,rotation:e.rotation,nameDirection:ue(e.nameDirection,1),tickDirection:ue(e.tickDirection,1),labelDirection:ue(e.labelDirection,1),labelOffset:ue(e.labelOffset,0),silent:ue(e.silent,!0),axisName:n,nameLocation:uh(t.get("nameLocation"),a.nameLocation,"end"),shouldNameMoveOverlap:yi(n)&&i,optionHideOverlap:t.get(["axisLabel","hideOverlap"]),showMinorTicks:t.get(["minorTick","show"])};this._cfg=o;var l=new Ae({x:o.position[0],y:o.position[1],rotation:o.rotation});l.updateTransform(),this._transformGroup=l;var s=this._shared.ensureRecord(t);s.transGroup=this._transformGroup,s.dirVec=new wr(Math.cos(-o.rotation),Math.sin(-o.rotation))},r.prototype.build=function(e,t){var a=this;return e||(e={axisLine:!0,axisTickLabelEstimate:!1,axisTickLabelDetermine:!0,axisName:!0}),M(Fd,function(n){e[n]&&Vd[n](a._cfg,a._local,a._shared,a._axisModel,a.group,a._transformGroup,a._api,t||{})}),this},r.innerTextLayout=function(e,t,a){var n=Js(t-e),i,o;return da(n)?(o=a>0?"top":"bottom",i="center"):da(n-xt)?(o=a>0?"bottom":"top",i="center"):(o="middle",n>0&&n<xt?i=a>0?"right":"left":i=a>0?"left":"right"),{rotation:n,textAlign:i,textVerticalAlign:o}},r.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},r.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},r})(),Fd=["axisLine","axisTickLabelEstimate","axisTickLabelDetermine","axisName"],Vd={axisLine:function(r,e,t,a,n,i,o){var l=a.get(["axisLine","show"]);if(l==="auto"&&(l=!0,r.raw.axisLineAutoShow!=null&&(l=!!r.raw.axisLineAutoShow)),!!l){var s=a.axis.getExtent(),u=i.transform,c=[s[0],0],h=[s[1],0],v=c[0]>h[0];u&&(Yt(c,c,u),Yt(h,h,u));var f=se({lineCap:"round"},a.getModel(["axisLine","lineStyle"]).getLineStyle()),d={strokeContainThreshold:r.raw.strokeContainThreshold||5,silent:!0,z2:1,style:f};if(a.get(["axisLine","breakLine"])&&a.axis.scale.hasBreaks())Rd().buildAxisBreakLine(a,n,i,d);else{var p=new kr(se({shape:{x1:c[0],y1:c[1],x2:h[0],y2:h[1]}},d));fa(p.shape,p.style.lineWidth),p.anid="line",n.add(p)}var y=a.get(["axisLine","symbol"]);if(y!=null){var g=a.get(["axisLine","symbolSize"]);ve(y)&&(y=[y,y]),(ve(g)||st(g))&&(g=[g,g]);var m=Na(a.get(["axisLine","symbolOffset"])||0,g),_=g[0],b=g[1];M([{rotate:r.rotation+Math.PI/2,offset:m[0],r:0},{rotate:r.rotation-Math.PI/2,offset:m[1],r:Math.sqrt((c[0]-h[0])*(c[0]-h[0])+(c[1]-h[1])*(c[1]-h[1]))}],function(k,x){if(y[x]!=="none"&&y[x]!=null){var S=Bt(y[x],-_/2,-b/2,_,b,f.stroke,!0),T=k.r+k.offset,D=v?h:c;S.attr({rotation:k.rotate,x:D[0]+T*Math.cos(r.rotation),y:D[1]-T*Math.sin(r.rotation),silent:!0,z2:11}),n.add(S)}})}}},axisTickLabelEstimate:function(r,e,t,a,n,i,o,l){var s=Go(e,n,l);s&&zo(r,e,t,a,n,i,o,Ye.estimate)},axisTickLabelDetermine:function(r,e,t,a,n,i,o,l){var s=Go(e,n,l);s&&zo(r,e,t,a,n,i,o,Ye.determine);var u=Xd(r,n,i,a);Zd(r,e.labelLayoutList,u),Yd(r,n,i,a,r.tickDirection)},axisName:function(r,e,t,a,n,i,o,l){var s=t.ensureRecord(a);e.nameEl&&(n.remove(e.nameEl),e.nameEl=s.nameLayout=s.nameLocation=null);var u=r.axisName;if(yi(u)){var c=r.nameLocation,h=r.nameDirection,v=a.getModel("nameTextStyle"),f=a.get("nameGap")||0,d=a.axis.getExtent(),p=a.axis.inverse?-1:1,y=new wr(0,0),g=new wr(0,0);c==="start"?(y.x=d[0]-p*f,g.x=-p):c==="end"?(y.x=d[1]+p*f,g.x=p):(y.x=(d[0]+d[1])/2,y.y=r.labelOffset+h*f,g.y=h);var m=li();g.transform(Qs(m,m,r.rotation));var _=a.get("nameRotate");_!=null&&(_=_*xt/180);var b,k;jt(c)?b=wt.innerTextLayout(r.rotation,_??r.rotation,h):(b=Wd(r.rotation,c,_||0,d),k=r.raw.axisNameAvailableWidth,k!=null&&(k=Math.abs(k/Math.sin(b.rotation)),!isFinite(k)&&(k=null)));var x=v.getFont(),S=a.get("nameTruncate",!0)||{},T=S.ellipsis,D=nt(r.raw.nameTruncateMaxWidth,S.maxWidth,k),L=l.nameMarginLevel||0,A=new Ct({x:y.x,y:y.y,rotation:b.rotation,silent:wt.isLabelSilent(a),style:$a(v,{text:u,font:x,overflow:"truncate",width:D,ellipsis:T,fill:v.getTextColor()||a.get(["axisLine","lineStyle","color"]),align:v.get("align")||b.textAlign,verticalAlign:v.get("verticalAlign")||b.textVerticalAlign}),z2:1});if(si({el:A,componentModel:a,itemName:u}),A.__fullText=u,A.anid="name",a.get("triggerEvent")){var I=wt.makeAxisEventDataBase(a);I.targetType="axisName",I.name=u,me(A).eventData=I}i.add(A),A.updateTransform(),e.nameEl=A;var C=s.nameLayout=Dt({label:A,priority:A.z2,defaultAttr:{ignore:A.ignore},marginDefault:jt(c)?zd[L]:Gd[L]});if(s.nameLocation=c,n.add(A),A.decomposeTransform(),r.shouldNameMoveOverlap&&C){var O=t.ensureRecord(a);t.resolveAxisNameOverlap(r,t,a,C,g,O)}}}};function zo(r,e,t,a,n,i,o,l){uu(e)||qd(r,e,n,l,a,o);var s=e.labelLayoutList;Kd(r,a,s,i),r.rotation;var u=r.optionHideOverlap;Ud(a,s,u),u&&Pf(lt(s,function(c){return c&&!c.label.ignore})),Hd(r,t,a,s)}function Wd(r,e,t,a){var n=Js(t-r),i,o,l=a[0]>a[1],s=e==="start"&&!l||e!=="start"&&l;return da(n-xt/2)?(o=s?"bottom":"top",i="center"):da(n-xt*1.5)?(o=s?"top":"bottom",i="center"):(o="middle",n<xt*1.5&&n>xt/2?i=s?"left":"right":i=s?"right":"left"),{rotation:n,textAlign:i,textVerticalAlign:o}}function Ud(r,e,t){if(Ml(r.axis))return;function a(l,s,u){var c=Dt(e[s]),h=Dt(e[u]);if(!(!c||!h)){if(l===!1||c.suggestIgnore){gr(c.label);return}if(h.suggestIgnore){gr(h.label);return}var v=.1;if(!t){var f=[0,0,0,0];c=po({marginForce:f},c),h=po({marginForce:f},h)}fi(c,h,null,{touchThreshold:v})&&gr(l?h.label:c.label)}}var n=r.get(["axisLabel","showMinLabel"]),i=r.get(["axisLabel","showMaxLabel"]),o=e.length;a(n,0,1),a(i,o-1,o-2)}function Zd(r,e,t){r.showMinorTicks||M(e,function(a){if(a&&a.label.ignore)for(var n=0;n<t.length;n++){var i=t[n],o=au(i),l=Lr(a.label);if(o.tickValue!=null&&!o.onBand&&o.tickValue===l.tickValue){gr(i);return}}})}function gr(r){r&&(r.ignore=!0)}function lu(r,e,t,a,n){for(var i=[],o=[],l=[],s=0;s<r.length;s++){var u=r[s].coord;o[0]=u,o[1]=0,l[0]=u,l[1]=t,e&&(Yt(o,o,e),Yt(l,l,e));var c=new kr({shape:{x1:o[0],y1:o[1],x2:l[0],y2:l[1]},style:a,z2:2,autoBatch:!0,silent:!0});fa(c.shape,c.style.lineWidth),c.anid=n+"_"+r[s].tickValue,i.push(c);var h=au(c);h.onBand=!!r[s].onBand,h.tickValue=r[s].tickValue}return i}function Xd(r,e,t,a){var n=a.axis,i=a.getModel("axisTick"),o=i.get("show");if(o==="auto"&&(o=!0,r.raw.axisTickAutoShow!=null&&(o=!!r.raw.axisTickAutoShow)),!o||n.scale.isBlank())return[];for(var l=i.getModel("lineStyle"),s=r.tickDirection*i.get("length"),u=n.getTicksCoords(),c=lu(u,t.transform,s,Be(l.getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])}),"ticks"),h=0;h<c.length;h++)e.add(c[h]);return c}function Yd(r,e,t,a,n){var i=a.axis,o=a.getModel("minorTick");if(!(!r.showMinorTicks||i.scale.isBlank())){var l=i.getMinorTicksCoords();if(l.length)for(var s=o.getModel("lineStyle"),u=n*o.get("length"),c=Be(s.getLineStyle(),Be(a.getModel("axisTick").getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])})),h=0;h<l.length;h++)for(var v=lu(l[h],t.transform,u,c,"minorticks_"+h),f=0;f<v.length;f++)e.add(v[f])}}function Go(r,e,t){if(uu(r)){var a=r.axisLabelsCreationContext,n=a.out.noPxChangeTryDetermine;if(t.noPxChange){for(var i=!0,o=0;o<n.length;o++)i=i&&n[o]();if(i)return!1}n.length&&(e.remove(r.labelGroup),Hn(r,null,null,null))}return!0}function qd(r,e,t,a,n,i){var o=n.axis,l=nt(r.raw.axisLabelShow,n.get(["axisLabel","show"])),s=new Ae;t.add(s);var u=ba(a);if(!l||o.scale.isBlank()){Hn(e,[],s,u);return}var c=n.getModel("axisLabel"),h=o.getViewLabels(u),v=(nt(r.raw.labelRotate,c.get("rotate"))||0)*xt/180,f=wt.innerTextLayout(r.rotation,v,r.labelDirection),d=n.getCategories&&n.getCategories(!0),p=[],y=n.get("triggerEvent"),g=1/0,m=-1/0;M(h,function(b,k){var x,S=o.scale.type==="ordinal"?o.scale.getRawOrdinalNumber(b.tickValue):b.tickValue,T=b.formattedLabel,D=b.rawLabel,L=c;if(d&&d[S]){var A=d[S];ke(A)&&A.textStyle&&(L=new bt(A.textStyle,c,n.ecModel))}var I=L.getTextColor()||n.get(["axisLine","lineStyle","color"]),C=L.getShallow("align",!0)||f.textAlign,O=ue(L.getShallow("alignMinLabel",!0),C),N=ue(L.getShallow("alignMaxLabel",!0),C),V=L.getShallow("verticalAlign",!0)||L.getShallow("baseline",!0)||f.textVerticalAlign,K=ue(L.getShallow("verticalAlignMinLabel",!0),V),$=ue(L.getShallow("verticalAlignMaxLabel",!0),V),Z=10+(((x=b.time)===null||x===void 0?void 0:x.level)||0);g=Math.min(g,Z),m=Math.max(m,Z);var Y=new Ct({x:0,y:0,rotation:0,silent:wt.isLabelSilent(n),z2:Z,style:$a(L,{text:T,align:k===0?O:k===h.length-1?N:C,verticalAlign:k===0?K:k===h.length-1?$:V,fill:_e(I)?I(o.type==="category"?D:o.type==="value"?S+"":S,k):I})});Y.anid="label_"+S;var F=Lr(Y);if(F.break=b.break,F.tickValue=S,F.layoutRotation=f.rotation,si({el:Y,componentModel:n,itemName:T,formatterParamsExtra:{isTruncated:function(){return Y.isTruncated},value:D,tickIndex:k}}),y){var q=wt.makeAxisEventDataBase(n);q.targetType="axisLabel",q.value=D,q.tickIndex=k,b.break&&(q.break={start:b.break.parsedBreak.vmin,end:b.break.parsedBreak.vmax}),o.type==="category"&&(q.dataIndex=S),me(Y).eventData=q,b.break&&Qd(n,i,Y,b.break)}p.push(Y),s.add(Y)});var _=re(p,function(b){return{label:b,priority:Lr(b).break?b.z2+(m-g+1):b.z2,defaultAttr:{ignore:b.ignore}}});Hn(e,_,s,u)}function uu(r){return!!r.labelLayoutList}function Hn(r,e,t,a){r.labelLayoutList=e,r.labelGroup=t,r.axisLabelsCreationContext=a}function Kd(r,e,t,a){var n=e.get(["axisLabel","margin"]);M(t,function(i,o){var l=Dt(i);if(l){var s=l.label,u=Lr(s);l.suggestIgnore=s.ignore,s.ignore=!1,Wi(tt,jd),tt.x=e.axis.dataToCoord(u.tickValue),tt.y=r.labelOffset+r.labelDirection*n,tt.rotation=u.layoutRotation,a.add(tt),tt.updateTransform(),a.remove(tt),tt.decomposeTransform(),Wi(s,tt),s.markRedraw(),Sa(l,!0),Dt(l)}})}var tt=new qe,jd=new qe;function yi(r){return!!r}function Qd(r,e,t,a){t.on("click",function(n){var i={type:$d,breaks:[{start:a.parsedBreak.breakOption.start,end:a.parsedBreak.breakOption.end}]};i[r.axis.dim+"AxisIndex"]=r.componentIndex,e.dispatchAction(i)})}function ka(r,e,t){t=t||{};var a=e.axis,n={},i=a.getAxesOnZeroOf()[0],o=a.position,l=i?"onZero":o,s=a.dim,u=[r.x,r.x+r.width,r.y,r.y+r.height],c={left:0,right:1,top:0,bottom:1,onZero:2},h=e.get("offset")||0,v=s==="x"?[u[2]-h,u[3]+h]:[u[0]-h,u[1]+h];if(i){var f=i.toGlobalCoord(i.dataToCoord(0));v[c.onZero]=Math.max(Math.min(f,v[1]),v[0])}n.position=[s==="y"?v[c[l]]:u[0],s==="x"?v[c[l]]:u[3]],n.rotation=Math.PI/2*(s==="x"?0:1);var d={top:-1,bottom:1,left:-1,right:1};n.labelDirection=n.tickDirection=n.nameDirection=d[o],n.labelOffset=i?v[c[o]]-v[c.onZero]:0,e.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),nt(t.labelInside,e.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var p=e.get(["axisLabel","rotate"]);return n.labelRotate=l==="top"?-p:p,n.z2=1,n}function Jd(r){return r.coordinateSystem&&r.coordinateSystem.type==="cartesian2d"}function Ho(r){var e={xAxisModel:null,yAxisModel:null};return M(e,function(t,a){var n=a.replace(/Model$/,""),i=r.getReferringComponents(n,at).models[0];e[a]=i}),e}function ep(r,e,t,a,n,i){for(var o=ka(r,t),l=!1,s=!1,u=0;u<e.length;u++)Pn(e[u].getOtherAxis(t.axis).scale)&&(l=s=!0,t.axis.type==="category"&&t.axis.onBand&&(s=!1));return o.axisLineAutoShow=l,o.axisTickAutoShow=s,o.defaultNameMoveOverlap=i,new wt(t,a,o,n)}function tp(r,e,t){var a=ka(e,t);r.updateCfg(a)}function rp(r,e,t){var a=Kt.prototype,n=a.getTicks.call(t),i=a.getTicks.call(t,{expandToNicedExtent:!0}),o=n.length-1,l=a.getInterval.call(t),s=Il(r,e),u=s.extent,c=s.fixMin,h=s.fixMax;r.type==="log"&&(u=En(r.base,u,!0)),r.setBreaksFromOption(Pl(e)),r.setExtent(u[0],u[1]),r.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:h});var v=a.getExtent.call(r);c&&(u[0]=v[0]),h&&(u[1]=v[1]);var f=a.getInterval.call(r),d=u[0],p=u[1];if(c&&h)f=(p-d)/o;else if(c)for(p=u[0]+f*o;p<u[1]&&isFinite(p)&&isFinite(u[1]);)f=ja(f),p=u[0]+f*o;else if(h)for(d=u[1]-f*o;d>u[0]&&isFinite(d)&&isFinite(u[0]);)f=ja(f),d=u[1]-f*o;else{var y=r.getTicks().length-1;y>o&&(f=ja(f));var g=f*o;p=Math.ceil(u[1]/f)*f,d=De(p-g),d<0&&u[0]>=0?(d=0,p=De(g)):p>0&&u[1]<=0&&(p=0,d=-De(g))}var m=(n[0].value-i[0].value)/l,_=(n[o].value-i[o].value)/l;a.setExtent.call(r,d+f*m,p+f*_),a.setInterval.call(r,f),(m||_)&&a.setNiceExtent.call(r,d+f,p-f)}var Fo=[[3,1],[0,2]],ap=(function(){function r(e,t,a){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Gn,this._initCartesian(e,t,a),this.model=e}return r.prototype.getRect=function(){return this._rect},r.prototype.update=function(e,t){var a=this._axesMap;this._updateScale(e,this.model);function n(o){var l,s=Ea(o),u=s.length;if(u){for(var c=[],h=u-1;h>=0;h--){var v=+s[h],f=o[v],d=f.model,p=f.scale;Pn(p)&&d.get("alignTicks")&&d.get("interval")==null?c.push(f):(uo(p,d),Pn(p)&&(l=f))}c.length&&(l||(l=c.pop(),uo(l.scale,l.model)),M(c,function(y){rp(y.scale,y.model,l.scale)}))}}n(a.x),n(a.y);var i={};M(a.x,function(o){Vo(a,"y",o,i)}),M(a.y,function(o){Vo(a,"x",o,i)}),this.resize(this.model,t)},r.prototype.resize=function(e,t,a){var n=el(e,t),i=this._rect=Ar(e.getBoxLayoutParams(),n.refContainer),o=this._axesMap,l=this._coordsList,s=e.get("containLabel");if(cu(o,i),!a){var u=ip(i,l,o,s,t),c=void 0;if(s)c=Zo(i.clone(),"axisLabel",null,i,o,u,n);else{var h=op(e,i,n),v=h.outerBoundsRect,f=h.parsedOuterBoundsContain,d=h.outerBoundsClamp;v&&(c=Zo(v,f,d,i,o,u,n))}hu(i,o,Ye.determine,null,c,n)}M(this._coordsList,function(p){p.calcAffineTransform()})},r.prototype.getAxis=function(e,t){var a=this._axesMap[e];if(a!=null)return a[t||0]},r.prototype.getAxes=function(){return this._axesList.slice()},r.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var a="x"+e+"y"+t;return this._coordsMap[a]}ke(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var n=0,i=this._coordsList;n<i.length;n++)if(i[n].getAxis("x").index===e||i[n].getAxis("y").index===t)return i[n]},r.prototype.getCartesians=function(){return this._coordsList.slice()},r.prototype.convertToPixel=function(e,t,a){var n=this._findConvertTarget(t);return n.cartesian?n.cartesian.dataToPoint(a):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(a)):null},r.prototype.convertFromPixel=function(e,t,a){var n=this._findConvertTarget(t);return n.cartesian?n.cartesian.pointToData(a):n.axis?n.axis.coordToData(n.axis.toLocalCoord(a)):null},r.prototype._findConvertTarget=function(e){var t=e.seriesModel,a=e.xAxisModel||t&&t.getReferringComponents("xAxis",at).models[0],n=e.yAxisModel||t&&t.getReferringComponents("yAxis",at).models[0],i=e.gridModel,o=this._coordsList,l,s;if(t)l=t.coordinateSystem,Oe(o,l)<0&&(l=null);else if(a&&n)l=this.getCartesian(a.componentIndex,n.componentIndex);else if(a)s=this.getAxis("x",a.componentIndex);else if(n)s=this.getAxis("y",n.componentIndex);else if(i){var u=i.coordinateSystem;u===this&&(l=this._coordsList[0])}return{cartesian:l,axis:s}},r.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},r.prototype._initCartesian=function(e,t,a){var n=this,i=this,o={left:!1,right:!1,top:!1,bottom:!1},l={x:{},y:{}},s={x:0,y:0};if(t.eachComponent("xAxis",u("x"),this),t.eachComponent("yAxis",u("y"),this),!s.x||!s.y){this._axesMap={},this._axesList=[];return}this._axesMap=l,M(l.x,function(c,h){M(l.y,function(v,f){var d="x"+h+"y"+f,p=new Nd(d);p.master=n,p.model=e,n._coordsMap[d]=p,n._coordsList.push(p),p.addAxis(c),p.addAxis(v)})});function u(c){return function(h,v){if(on(h,e)){var f=h.get("position");c==="x"?f!=="top"&&f!=="bottom"&&(f=o.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=o.left?"right":"left"),o[f]=!0;var d=new Bd(c,uf(h),[0,0],h.get("type"),f),p=d.type==="category";d.onBand=p&&h.get("boundaryGap"),d.inverse=h.get("inverse"),h.axis=d,d.model=h,d.grid=i,d.index=v,i._axesList.push(d),l[c][v]=d,s[c]++}}}},r.prototype._updateScale=function(e,t){M(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var i=n.model.get("categorySortInfo");n.scale.setSortInfo(i)}}),e.eachSeries(function(n){if(Jd(n)){var i=Ho(n),o=i.xAxisModel,l=i.yAxisModel;if(!on(o,t)||!on(l,t))return;var s=this.getCartesian(o.componentIndex,l.componentIndex),u=n.getData(),c=s.getAxis("x"),h=s.getAxis("y");a(u,c),a(u,h)}},this);function a(n,i){M(hf(n,i.dim),function(o){i.scale.unionExtentFromData(n,o)})}},r.prototype.getTooltipAxes=function(e){var t=[],a=[];return M(this.getCartesians(),function(n){var i=e!=null&&e!=="auto"?n.getAxis(e):n.getBaseAxis(),o=n.getOtherAxis(i);Oe(t,i)<0&&t.push(i),Oe(a,o)<0&&a.push(o)}),{baseAxes:t,otherAxes:a}},r.create=function(e,t){var a=[];return e.eachComponent("grid",function(n,i){var o=new r(n,e,t);o.name="grid_"+i,o.resize(n,t,!0),n.coordinateSystem=o,a.push(o)}),e.eachSeries(function(n){vh({targetModel:n,coordSysType:"cartesian2d",coordSysProvider:i});function i(){var o=Ho(n),l=o.xAxisModel,s=o.yAxisModel,u=l.getCoordSysModel(),c=u.coordinateSystem;return c.getCartesian(l.componentIndex,s.componentIndex)}}),a},r.dimensions=Gn,r})();function on(r,e){return r.getCoordSysModel()===e}function Vo(r,e,t,a){t.getAxesOnZeroOf=function(){return i?[i]:[]};var n=r[e],i,o=t.model,l=o.get(["axisLine","onZero"]),s=o.get(["axisLine","onZeroAxisIndex"]);if(!l)return;if(s!=null)Wo(n[s])&&(i=n[s]);else for(var u in n)if(n.hasOwnProperty(u)&&Wo(n[u])&&!a[c(n[u])]){i=n[u];break}i&&(a[c(i)]=!0);function c(h){return h.dim+"_"+h.index}}function Wo(r){return r&&r.type!=="category"&&r.type!=="time"&&cf(r)}function np(r,e){var t=r.getExtent(),a=t[0]+t[1];r.toGlobalCoord=r.dim==="x"?function(n){return n+e}:function(n){return a-n+e},r.toLocalCoord=r.dim==="x"?function(n){return n-e}:function(n){return a-n+e}}function cu(r,e){M(r.x,function(t){return Uo(t,e.x,e.width)}),M(r.y,function(t){return Uo(t,e.y,e.height)})}function Uo(r,e,t){var a=[0,t],n=r.inverse?1:0;r.setExtent(a[n],a[1-n]),np(r,e)}function Zo(r,e,t,a,n,i,o){hu(a,n,Ye.estimate,e,!1,o);var l=[0,0,0,0];u(0),u(1),c(a,0,NaN),c(a,1,NaN);var s=fh(l,function(v){return v>0})==null;return Cn(a,l,!0,!0,t),cu(n,a),s;function u(v){M(n[Zt[v]],function(f){if(Dr(f.model)){var d=i.ensureRecord(f.model),p=d.labelInfoList;if(p)for(var y=0;y<p.length;y++){var g=p[y],m=f.scale.normalize(Lr(g.label).tickValue);m=v===1?1-m:m,c(g.rect,v,m),c(g.rect,1-v,NaN)}var _=d.nameLayout;if(_){var m=jt(d.nameLocation)?.5:NaN;c(_.rect,v,m),c(_.rect,1-v,NaN)}}})}function c(v,f,d){var p=r[Zt[f]]-v[Zt[f]],y=v[pa[f]]+v[Zt[f]]-(r[pa[f]]+r[Zt[f]]);p=h(p,1-d),y=h(y,d);var g=Fo[f][0],m=Fo[f][1];l[g]=Ui(l[g],p),l[m]=Ui(l[m],y)}function h(v,f){return v>0&&!ua(f)&&f>1e-4&&(v/=f),v}}function ip(r,e,t,a,n){var i=new nu(sp);return M(t,function(o){return M(o,function(l){if(Dr(l.model)){var s=!a;l.axisBuilder=ep(r,e,l.model,n,i,s)}})}),i}function hu(r,e,t,a,n,i){var o=t===Ye.determine;M(e,function(u){return M(u,function(c){Dr(c.model)&&(tp(c.axisBuilder,r,c.model),c.axisBuilder.build(o?{axisTickLabelDetermine:!0}:{axisTickLabelEstimate:!0},{noPxChange:n}))})});var l={x:0,y:0};s(0),s(1);function s(u){l[Zt[1-u]]=r[pa[u]]<=i.refContainer[pa[u]]*.5?0:1-u===1?2:1}M(e,function(u,c){return M(u,function(h){Dr(h.model)&&((a==="all"||o)&&h.axisBuilder.build({axisName:!0},{nameMarginLevel:l[c]}),o&&h.axisBuilder.build({axisLine:!0}))})})}function op(r,e,t){var a,n=r.get("outerBoundsMode",!0);n==="same"?a=e.clone():(n==null||n==="auto")&&(a=Ar(r.get("outerBounds",!0)||tu,t.refContainer));var i=r.get("outerBoundsContain",!0),o;i==null||i==="auto"||Oe(["all","axisLabel"],i)<0?o="all":o=i;var l=[Zi(ue(r.get("outerBoundsClampWidth",!0),wa[0]),e.width),Zi(ue(r.get("outerBoundsClampHeight",!0),wa[1]),e.height)];return{outerBoundsRect:a,parsedOuterBoundsContain:o,outerBoundsClamp:l}}var sp=function(r,e,t,a,n,i){var o=t.axis.dim==="x"?"y":"x";iu(r,e,t,a,n,i),jt(r.nameLocation)||M(e.recordMap[o],function(l){l&&l.labelInfoList&&l.dirVec&&su(l.labelInfoList,l.dirVec,a,n)})};function lp(r,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return up(t,r,e),t.seriesInvolved&&hp(t,r),t}function up(r,e,t){var a=e.getComponent("tooltip"),n=e.getComponent("axisPointer"),i=n.get("link",!0)||[],o=[];M(t.getCoordinateSystems(),function(l){if(!l.axisPointerEnabled)return;var s=Tr(l.model),u=r.coordSysAxesInfo[s]={};r.coordSysMap[s]=l;var c=l.model,h=c.getModel("tooltip",a);if(M(l.getAxes(),fe(p,!1,null)),l.getTooltipAxes&&a&&h.get("show")){var v=h.get("trigger")==="axis",f=h.get(["axisPointer","type"])==="cross",d=l.getTooltipAxes(h.get(["axisPointer","axis"]));(v||f)&&M(d.baseAxes,fe(p,f?"cross":!0,v)),f&&M(d.otherAxes,fe(p,"cross",!1))}function p(y,g,m){var _=m.model.getModel("axisPointer",n),b=_.get("show");if(!(!b||b==="auto"&&!y&&!Fn(_))){g==null&&(g=_.get("triggerTooltip")),_=y?cp(m,h,n,e,y,g):_;var k=_.get("snap"),x=_.get("triggerEmphasis"),S=Tr(m.model),T=g||k||m.type==="category",D=r.axesInfo[S]={key:S,axis:m,coordSys:l,axisPointerModel:_,triggerTooltip:g,triggerEmphasis:x,involveSeries:T,snap:k,useHandle:Fn(_),seriesModels:[],linkGroup:null};u[S]=D,r.seriesInvolved=r.seriesInvolved||T;var L=vp(i,m);if(L!=null){var A=o[L]||(o[L]={axesInfo:{}});A.axesInfo[S]=D,A.mapper=i[L].mapper,D.linkGroup=A}}}})}function cp(r,e,t,a,n,i){var o=e.getModel("axisPointer"),l=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],s={};M(l,function(v){s[v]=kt(o.get(v))}),s.snap=r.type!=="category"&&!!i,o.get("type")==="cross"&&(s.type="line");var u=s.label||(s.label={});if(u.show==null&&(u.show=!1),n==="cross"){var c=o.get(["label","show"]);if(u.show=c??!0,!i){var h=s.lineStyle=o.get("crossStyle");h&&Be(u,h.textStyle)}}return r.model.getModel("axisPointer",new bt(s,t,a))}function hp(r,e){e.eachSeries(function(t){var a=t.coordinateSystem,n=t.get(["tooltip","trigger"],!0),i=t.get(["tooltip","show"],!0);!a||!a.model||n==="none"||n===!1||n==="item"||i===!1||t.get(["axisPointer","show"],!0)===!1||M(r.coordSysAxesInfo[Tr(a.model)],function(o){var l=o.axis;a.getAxis(l.dim)===l&&(o.seriesModels.push(t),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=t.getData().count())})})}function vp(r,e){for(var t=e.model,a=e.dim,n=0;n<r.length;n++){var i=r[n]||{};if(sn(i[a+"AxisId"],t.id)||sn(i[a+"AxisIndex"],t.componentIndex)||sn(i[a+"AxisName"],t.name))return n}}function sn(r,e){return r==="all"||J(r)&&Oe(r,e)>=0||r===e}function fp(r){var e=_i(r);if(e){var t=e.axisPointerModel,a=e.axis.scale,n=t.option,i=t.get("status"),o=t.get("value");o!=null&&(o=a.parse(o));var l=Fn(t);i==null&&(n.status=l?"show":"hide");var s=a.getExtent().slice();s[0]>s[1]&&s.reverse(),(o==null||o>s[1])&&(o=s[1]),o<s[0]&&(o=s[0]),n.value=o,l&&(n.status=e.axis.scale.isBlank()?"hide":"show")}}function _i(r){var e=(r.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Tr(r)]}function dp(r){var e=_i(r);return e&&e.axisPointerModel}function Fn(r){return!!r.get(["handle","show"])}function Tr(r){return r.type+"||"+r.id}var Xo={},vu=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,n,i){this.axisPointerClass&&fp(t),r.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,n,!0)},e.prototype.updateAxisPointer=function(t,a,n,i){this._doUpdateAxisPointerClass(t,n,!1)},e.prototype.remove=function(t,a){var n=this._axisPointer;n&&n.remove(a)},e.prototype.dispose=function(t,a){this._disposeAxisPointer(a),r.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,a,n){var i=e.getAxisPointerClass(this.axisPointerClass);if(i){var o=dp(t);o?(this._axisPointer||(this._axisPointer=new i)).render(t,o,a,n):this._disposeAxisPointer(a)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,a){Xo[t]=a},e.getAxisPointerClass=function(t){return t&&Xo[t]},e.type="axis",e})(At),Vn=$e();function pp(r,e,t,a){var n=t.axis;if(!n.scale.isBlank()){var i=t.getModel("splitArea"),o=i.getModel("areaStyle"),l=o.get("color"),s=a.coordinateSystem.getRect(),u=n.getTicksCoords({tickModel:i,clamp:!0,breakTicks:"none",pruneByBreak:"preserve_extent_bound"});if(u.length){var c=l.length,h=Vn(r).splitAreaColors,v=Ne(),f=0;if(h)for(var d=0;d<u.length;d++){var p=h.get(u[d].tickValue);if(p!=null){f=(p+(c-1)*d)%c;break}}var y=n.toGlobalCoord(u[0].coord),g=o.getAreaStyle();l=J(l)?l:[l];for(var d=1;d<u.length;d++){var m=n.toGlobalCoord(u[d].coord),_=void 0,b=void 0,k=void 0,x=void 0;n.isHorizontal()?(_=y,b=s.y,k=m-_,x=s.height,y=_+k):(_=s.x,b=y,k=s.width,x=m-b,y=b+x);var S=u[d-1].tickValue;S!=null&&v.set(S,f),e.add(new qe({anid:S!=null?"area_"+S:null,shape:{x:_,y:b,width:k,height:x},style:Be({fill:l[f]},g),autoBatch:!0,silent:!0})),f=(f+1)%c}Vn(r).splitAreaColors=v}}}function gp(r){Vn(r).splitAreaColors=null}var mp=["splitArea","splitLine","minorSplitLine","breakArea"],fu=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,a,n,i){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Ae,this.group.add(this._axisGroup),!!Dr(t)){this._axisGroup.add(t.axis.axisBuilder.group),M(mp,function(s){t.get([s,"show"])&&yp[s](this,this._axisGroup,t,t.getCoordSysModel(),n)},this);var l=i&&i.type==="changeAxisOrder"&&i.isInitSort;l||dh(o,this._axisGroup,t),r.prototype.render.call(this,t,a,n,i)}},e.prototype.remove=function(){gp(this)},e.type="cartesianAxis",e})(vu),yp={splitLine:function(r,e,t,a,n){var i=t.axis;if(!i.scale.isBlank()){var o=t.getModel("splitLine"),l=o.getModel("lineStyle"),s=l.get("color"),u=o.get("showMinLine")!==!1,c=o.get("showMaxLine")!==!1;s=J(s)?s:[s];for(var h=a.coordinateSystem.getRect(),v=i.isHorizontal(),f=0,d=i.getTicksCoords({tickModel:o,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),p=[],y=[],g=l.getLineStyle(),m=0;m<d.length;m++){var _=i.toGlobalCoord(d[m].coord);if(!(m===0&&!u||m===d.length-1&&!c)){var b=d[m].tickValue;v?(p[0]=_,p[1]=h.y,y[0]=_,y[1]=h.y+h.height):(p[0]=h.x,p[1]=_,y[0]=h.x+h.width,y[1]=_);var k=f++%s.length,x=new kr({anid:b!=null?"line_"+b:null,autoBatch:!0,shape:{x1:p[0],y1:p[1],x2:y[0],y2:y[1]},style:Be({stroke:s[k]},g),silent:!0});fa(x.shape,g.lineWidth),e.add(x)}}}},minorSplitLine:function(r,e,t,a,n){var i=t.axis,o=t.getModel("minorSplitLine"),l=o.getModel("lineStyle"),s=a.coordinateSystem.getRect(),u=i.isHorizontal(),c=i.getMinorTicksCoords();if(c.length)for(var h=[],v=[],f=l.getLineStyle(),d=0;d<c.length;d++)for(var p=0;p<c[d].length;p++){var y=i.toGlobalCoord(c[d][p].coord);u?(h[0]=y,h[1]=s.y,v[0]=y,v[1]=s.y+s.height):(h[0]=s.x,h[1]=y,v[0]=s.x+s.width,v[1]=y);var g=new kr({anid:"minor_line_"+c[d][p].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:v[0],y2:v[1]},style:f,silent:!0});fa(g.shape,f.lineWidth),e.add(g)}},splitArea:function(r,e,t,a,n){pp(r,e,t,a)},breakArea:function(r,e,t,a,n){t.axis.scale}},du=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e})(fu),_p=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=du.type,t}return e.type="yAxis",e})(fu),bp=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,a){this.group.removeAll(),t.get("show")&&this.group.add(new qe({shape:t.coordinateSystem.getRect(),style:Be({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e})(At),Yo={offset:0};function pu(r){r.registerComponentView(bp),r.registerComponentModel(Dd),r.registerCoordinateSystem("cartesian2d",ap),No(r,"x",zn,Yo),No(r,"y",zn,Yo),r.registerComponentView(du),r.registerComponentView(_p),r.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function xp(r){ut(pu),r.registerSeriesModel(Sd),r.registerChartView(Cd),r.registerLayout(gi("scatter"))}var qo=kr.prototype,ln=ph.prototype,gu=(function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r})();(function(r){X(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})(gu);function un(r){return isNaN(+r.cpx1)||isNaN(+r.cpy1)}var Sp=(function(r){X(e,r);function e(t){var a=r.call(this,t)||this;return a.type="ec-line",a}return e.prototype.getDefaultStyle=function(){return{stroke:Q.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new gu},e.prototype.buildPath=function(t,a){un(a)?qo.buildPath.call(this,t,a):ln.buildPath.call(this,t,a)},e.prototype.pointAt=function(t){return un(this.shape)?qo.pointAt.call(this,t):ln.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var a=this.shape,n=un(a)?[a.x2-a.x1,a.y2-a.y1]:ln.tangentAt.call(this,t);return tl(n,n)},e})(Tt),cn=["fromSymbol","toSymbol"];function Ko(r){return"_"+r+"Type"}function jo(r,e,t){var a=e.getItemVisual(t,r);if(!a||a==="none")return a;var n=e.getItemVisual(t,r+"Size"),i=e.getItemVisual(t,r+"Rotate"),o=e.getItemVisual(t,r+"Offset"),l=e.getItemVisual(t,r+"KeepAspect"),s=ai(n),u=Na(o||0,s);return a+s+u+(i||"")+(l||"")}function Qo(r,e,t){var a=e.getItemVisual(t,r);if(!(!a||a==="none")){var n=e.getItemVisual(t,r+"Size"),i=e.getItemVisual(t,r+"Rotate"),o=e.getItemVisual(t,r+"Offset"),l=e.getItemVisual(t,r+"KeepAspect"),s=ai(n),u=Na(o||0,s),c=Bt(a,-s[0]/2+u[0],-s[1]/2+u[1],s[0],s[1],null,l);return c.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,c.name=r,c}}function wp(r){var e=new Sp({name:"line",subPixelOptimize:!0});return Wn(e.shape,r),e}function Wn(r,e){r.x1=e[0][0],r.y1=e[0][1],r.x2=e[1][0],r.y2=e[1][1],r.percent=1;var t=e[2];t?(r.cpx1=t[0],r.cpy1=t[1]):(r.cpx1=NaN,r.cpy1=NaN)}var kp=(function(r){X(e,r);function e(t,a,n){var i=r.call(this)||this;return i._createLine(t,a,n),i}return e.prototype._createLine=function(t,a,n){var i=t.hostModel,o=t.getItemLayout(a),l=t.getItemVisual(a,"z2"),s=wp(o);s.shape.percent=0,Je(s,{z2:ue(l,0),shape:{percent:1}},i,a),this.add(s),M(cn,function(u){var c=Qo(u,t,a);this.add(c),this[Ko(u)]=jo(u,t,a)},this),this._updateCommonStl(t,a,n)},e.prototype.updateData=function(t,a,n){var i=t.hostModel,o=this.childOfName("line"),l=t.getItemLayout(a),s={shape:{}};Wn(s.shape,l),Pe(o,s,i,a),M(cn,function(u){var c=jo(u,t,a),h=Ko(u);if(this[h]!==c){this.remove(this.childOfName(u));var v=Qo(u,t,a);this.add(v)}this[h]=c},this),this._updateCommonStl(t,a,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,a,n){var i=t.hostModel,o=this.childOfName("line"),l=n&&n.emphasisLineStyle,s=n&&n.blurLineStyle,u=n&&n.selectLineStyle,c=n&&n.labelStatesModels,h=n&&n.emphasisDisabled,v=n&&n.focus,f=n&&n.blurScope;if(!n||t.hasItemOption){var d=t.getItemModel(a),p=d.getModel("emphasis");l=p.getModel("lineStyle").getLineStyle(),s=d.getModel(["blur","lineStyle"]).getLineStyle(),u=d.getModel(["select","lineStyle"]).getLineStyle(),h=p.get("disabled"),v=p.get("focus"),f=p.get("blurScope"),c=Ht(d)}var y=t.getItemVisual(a,"style"),g=y.stroke;o.useStyle(y),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=l,o.ensureState("blur").style=s,o.ensureState("select").style=u,M(cn,function(x){var S=this.childOfName(x);if(S){S.setColor(g),S.style.opacity=y.opacity;for(var T=0;T<ha.length;T++){var D=ha[T],L=o.getState(D);if(L){var A=L.style||{},I=S.ensureState(D),C=I.style||(I.style={});A.stroke!=null&&(C[S.__isEmptyBrush?"stroke":"fill"]=A.stroke),A.opacity!=null&&(C.opacity=A.opacity)}}S.markRedraw()}},this);var m=i.getRawValue(a);Qt(this,c,{labelDataIndex:a,labelFetcher:{getFormattedLabel:function(x,S){return i.getFormattedLabel(x,S,t.dataType)}},inheritColor:g||Q.color.neutral99,defaultOpacity:y.opacity,defaultText:(m==null?t.getName(a):isFinite(m)?De(m):m)+""});var _=this.getTextContent();if(_){var b=c.normal;_.__align=_.style.align,_.__verticalAlign=_.style.verticalAlign,_.__position=b.get("position")||"middle";var k=b.get("distance");J(k)||(k=[k,k]),_.__labelDistance=k}this.setTextConfig({position:null,local:!0,inside:!1}),$t(this,v,f,h)},e.prototype.highlight=function(){Xs(this)},e.prototype.downplay=function(){Ys(this)},e.prototype.updateLayout=function(t,a){this.setLinePoints(t.getItemLayout(a))},e.prototype.setLinePoints=function(t){var a=this.childOfName("line");Wn(a.shape,t),a.dirty()},e.prototype.beforeUpdate=function(){var t=this,a=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),i=t.getTextContent();if(!a&&!n&&(!i||i.ignore))return;for(var o=1,l=this.parent;l;)l.scaleX&&(o/=l.scaleX),l=l.parent;var s=t.childOfName("line");if(!this.__dirty&&!s.__dirty)return;var u=s.shape.percent,c=s.pointAt(0),h=s.pointAt(u),v=gh([],h,c);tl(v,v);function f(L,A){var I=L.__specifiedRotation;if(I==null){var C=s.tangentAt(A);L.attr("rotation",(A===1?-1:1)*Math.PI/2-Math.atan2(C[1],C[0]))}else L.attr("rotation",I)}if(a&&(a.setPosition(c),f(a,0),a.scaleX=a.scaleY=o*u,a.markRedraw()),n&&(n.setPosition(h),f(n,1),n.scaleX=n.scaleY=o*u,n.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var d=void 0,p=void 0,y=i.__labelDistance,g=y[0]*o,m=y[1]*o,_=u/2,b=s.tangentAt(_),k=[b[1],-b[0]],x=s.pointAt(_);k[1]>0&&(k[0]=-k[0],k[1]=-k[1]);var S=b[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var T=-Math.atan2(b[1],b[0]);h[0]<c[0]&&(T=Math.PI+T),i.rotation=T}var D=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":D=-m,p="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":D=m,p="top";break;default:D=0,p="middle"}switch(i.__position){case"end":i.x=v[0]*g+h[0],i.y=v[1]*m+h[1],d=v[0]>.8?"left":v[0]<-.8?"right":"center",p=v[1]>.8?"top":v[1]<-.8?"bottom":"middle";break;case"start":i.x=-v[0]*g+c[0],i.y=-v[1]*m+c[1],d=v[0]>.8?"right":v[0]<-.8?"left":"center",p=v[1]>.8?"bottom":v[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=g*S+c[0],i.y=c[1]+D,d=b[0]<0?"right":"left",i.originX=-g*S,i.originY=-D;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=x[0],i.y=x[1]+D,d="center",i.originY=-D;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-g*S+h[0],i.y=h[1]+D,d=b[0]>=0?"right":"left",i.originX=g*S,i.originY=-D;break}i.scaleX=i.scaleY=o,i.setStyle({verticalAlign:i.__verticalAlign||p,align:i.__align||d})}},e})(Ae),Ap=(function(){function r(e){this.group=new Ae,this._LineCtor=e||kp}return r.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var a=this,n=a.group,i=a._lineData;a._lineData=e,i||n.removeAll();var o=Jo(e);e.diff(i).add(function(l){t._doAdd(e,l,o)}).update(function(l,s){t._doUpdate(i,e,s,l,o)}).remove(function(l){n.remove(i.getItemGraphicEl(l))}).execute()},r.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,a){t.updateLayout(e,a)},this)},r.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Jo(e),this._lineData=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function a(l){!l.isGroup&&!Cp(l)&&(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var n=e.start;n<e.end;n++){var i=t.getItemLayout(n);if(hn(i)){var o=new this._LineCtor(t,n,this._seriesScope);o.traverse(a),this.group.add(o),t.setItemGraphicEl(n,o),this._progressiveEls.push(o)}}},r.prototype.remove=function(){this.group.removeAll()},r.prototype.eachRendered=function(e){Ba(this._progressiveEls||this.group,e)},r.prototype._doAdd=function(e,t,a){var n=e.getItemLayout(t);if(hn(n)){var i=new this._LineCtor(e,t,a);e.setItemGraphicEl(t,i),this.group.add(i)}},r.prototype._doUpdate=function(e,t,a,n,i){var o=e.getItemGraphicEl(a);if(!hn(t.getItemLayout(n))){this.group.remove(o);return}o?o.updateData(t,n,i):o=new this._LineCtor(t,n,i),t.setItemGraphicEl(n,o),this.group.add(o)},r})();function Cp(r){return r.animators&&r.animators.length>0}function Jo(r){var e=r.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:Ht(e)}}function es(r){return isNaN(r[0])||isNaN(r[1])}function hn(r){return r&&!es(r[0])&&!es(r[1])}var Dp=(function(){function r(){}return r.prototype._hasEncodeRule=function(e){var t=this.getEncode();return t&&t.get(e)!=null},r.prototype.getInitialData=function(e,t){var a,n=t.getComponent("xAxis",this.get("xAxisIndex")),i=t.getComponent("yAxis",this.get("yAxisIndex")),o=n.get("type"),l=i.get("type"),s;o==="category"?(e.layout="horizontal",a=n.getOrdinalMeta(),s=!this._hasEncodeRule("x")):l==="category"?(e.layout="vertical",a=i.getOrdinalMeta(),s=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var u=["x","y"],c=e.layout==="horizontal"?0:1,h=this._baseAxisDim=u[c],v=u[1-c],f=[n,i],d=f[c].get("type"),p=f[1-c].get("type"),y=e.data;if(y&&s){var g=[];M(y,function(b,k){var x;J(b)?(x=b.slice(),b.unshift(k)):J(b.value)?(x=se({},b),x.value=x.value.slice(),b.value.unshift(k)):x=b,g.push(x)}),e.data=g}var m=this.defaultValueDimensions,_=[{name:h,type:Mn(d),ordinalMeta:a,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:v,type:Mn(p),dimsDef:m.slice()}];return xd(this,{coordDimensions:_,dimensionsCount:m.length+1,encodeDefaulter:fe(Bs,_,this)})},r.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},r})(),Lp=["itemStyle","borderColor"],Tp=["itemStyle","borderColor0"],Ip=["itemStyle","borderColorDoji"],Mp=["itemStyle","color"],Pp=["itemStyle","color0"];function bi(r,e){return e.get(r>0?Mp:Pp)}function xi(r,e){return e.get(r===0?Ip:r>0?Lp:Tp)}var Ep={seriesType:"candlestick",plan:Oa(),performRawSeries:!0,reset:function(r,e){if(!e.isSeriesFiltered(r)){var t=r.pipelineContext.large;return!t&&{progress:function(a,n){for(var i;(i=a.next())!=null;){var o=n.getItemModel(i),l=n.getItemLayout(i).sign,s=o.getItemStyle();s.fill=bi(l,o),s.stroke=xi(l,o)||s.fill;var u=n.ensureUniqueItemVisual(i,"style");se(u,s)}}}}}},Rp=["color","borderColor"],Op=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,a,n){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,a,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,a):this._incrementalRenderNormal(t,a)},e.prototype.eachRendered=function(t){Ba(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var a=t.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},e.prototype._renderNormal=function(t){var a=t.getData(),n=this._data,i=this.group,o=a.getLayout("isSimpleBox"),l=t.get("clip",!0),s=t.coordinateSystem,u=s.getArea&&s.getArea();this._data||i.removeAll(),a.diff(n).add(function(c){if(a.hasValue(c)){var h=a.getItemLayout(c);if(l&&ts(u,h))return;var v=vn(h,c,!0);Je(v,{shape:{points:h.ends}},t,c),fn(v,a,c,o),i.add(v),a.setItemGraphicEl(c,v)}}).update(function(c,h){var v=n.getItemGraphicEl(h);if(!a.hasValue(c)){i.remove(v);return}var f=a.getItemLayout(c);if(l&&ts(u,f)){i.remove(v);return}v?(Pe(v,{shape:{points:f.ends}},t,c),ri(v)):v=vn(f),fn(v,a,c,o),i.add(v),a.setItemGraphicEl(c,v)}).remove(function(c){var h=n.getItemGraphicEl(c);h&&i.remove(h)}).execute(),this._data=a},e.prototype._renderLarge=function(t){this._clear(),rs(t,this.group);var a=t.get("clip",!0)?ql(t.coordinateSystem,!1,t):null;a?this.group.setClipPath(a):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,a){for(var n=a.getData(),i=n.getLayout("isSimpleBox"),o;(o=t.next())!=null;){var l=n.getItemLayout(o),s=vn(l);fn(s,n,o,i),s.incremental=!0,this.group.add(s),this._progressiveEls.push(s)}},e.prototype._incrementalRenderLarge=function(t,a){rs(a,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e})(St),Np=(function(){function r(){}return r})(),Bp=(function(r){X(e,r);function e(t){var a=r.call(this,t)||this;return a.type="normalCandlestickBox",a}return e.prototype.getDefaultShape=function(){return new Np},e.prototype.buildPath=function(t,a){var n=a.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))},e})(Tt);function vn(r,e,t){var a=r.ends;return new Bp({shape:{points:t?$p(a,r):a},z2:100})}function ts(r,e){for(var t=!0,a=0;a<e.ends.length;a++)if(r.contain(e.ends[a][0],e.ends[a][1])){t=!1;break}return t}function fn(r,e,t,a){var n=e.getItemModel(t);r.useStyle(e.getItemVisual(t,"style")),r.style.strokeNoScale=!0,r.__simpleBox=a,Sr(r,n);var i=e.getItemLayout(t).sign;M(r.states,function(l,s){var u=n.getModel(s),c=bi(i,u),h=xi(i,u)||c,v=l.style||(l.style={});c&&(v.fill=c),h&&(v.stroke=h)});var o=n.getModel("emphasis");$t(r,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function $p(r,e){return re(r,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var zp=(function(){function r(){}return r})(),dn=(function(r){X(e,r);function e(t){var a=r.call(this,t)||this;return a.type="largeCandlestickBox",a}return e.prototype.getDefaultShape=function(){return new zp},e.prototype.buildPath=function(t,a){for(var n=a.points,i=0;i<n.length;)if(this.__sign===n[i++]){var o=n[i++];t.moveTo(o,n[i++]),t.lineTo(o,n[i++])}else i+=3},e})(Tt);function rs(r,e,t,a){var n=r.getData(),i=n.getLayout("largePoints"),o=new dn({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});e.add(o);var l=new dn({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});e.add(l);var s=new dn({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});e.add(s),pn(1,o,r),pn(-1,l,r),pn(0,s,r),a&&(o.incremental=!0,l.incremental=!0),t&&t.push(o,l)}function pn(r,e,t,a){var n=xi(r,t)||bi(r,t),i=t.getModel("itemStyle").getItemStyle(Rp);e.useStyle(i),e.style.fill=null,e.style.stroke=n}var mu=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,a,n){var i=a.getItemLayout(t);return i&&n.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e})(Nt);oi(mu,Dp,!0);function Gp(r){!r||!J(r.series)||M(r.series,function(e){ke(e)&&e.type==="k"&&(e.type="candlestick")})}var Hp={seriesType:"candlestick",plan:Oa(),reset:function(r){var e=r.coordinateSystem,t=r.getData(),a=Fp(r,t),n=0,i=1,o=["x","y"],l=t.getDimensionIndex(t.mapDimension(o[n])),s=re(t.mapDimensionsAll(o[i]),t.getDimensionIndex,t),u=s[0],c=s[1],h=s[2],v=s[3];if(t.setLayout({candleWidth:a,isSimpleBox:a<=1.3}),l<0||s.length<4)return;return{progress:r.pipelineContext.large?d:f};function f(p,y){for(var g,m=y.getStore();(g=p.next())!=null;){var _=m.get(l,g),b=m.get(u,g),k=m.get(c,g),x=m.get(h,g),S=m.get(v,g),T=Math.min(b,k),D=Math.max(b,k),L=K(T,_),A=K(D,_),I=K(x,_),C=K(S,_),O=[];$(O,A,0),$(O,L,1),O.push(Y(C),Y(A),Y(I),Y(L));var N=y.getItemModel(g),V=!!N.get(["itemStyle","borderColorDoji"]);y.setItemLayout(g,{sign:as(m,g,b,k,c,V),initBaseline:b>k?A[i]:L[i],ends:O,brushRect:Z(x,S,_)})}function K(F,q){var j=[];return j[n]=q,j[i]=F,isNaN(q)||isNaN(F)?[NaN,NaN]:e.dataToPoint(j)}function $(F,q,j){var le=q.slice(),he=q.slice();le[n]=Za(le[n]+a/2,1,!1),he[n]=Za(he[n]-a/2,1,!0),j?F.push(le,he):F.push(he,le)}function Z(F,q,j){var le=K(F,j),he=K(q,j);return le[n]-=a/2,he[n]-=a/2,{x:le[0],y:le[1],width:a,height:he[1]-le[1]}}function Y(F){return F[n]=Za(F[n],1),F}}function d(p,y){for(var g=Qe(p.count*4),m=0,_,b=[],k=[],x,S=y.getStore(),T=!!r.get(["itemStyle","borderColorDoji"]);(x=p.next())!=null;){var D=S.get(l,x),L=S.get(u,x),A=S.get(c,x),I=S.get(h,x),C=S.get(v,x);if(isNaN(D)||isNaN(I)||isNaN(C)){g[m++]=NaN,m+=3;continue}g[m++]=as(S,x,L,A,c,T),b[n]=D,b[i]=I,_=e.dataToPoint(b,null,k),g[m++]=_?_[0]:NaN,g[m++]=_?_[1]:NaN,b[i]=C,_=e.dataToPoint(b,null,k),g[m++]=_?_[1]:NaN}y.setLayout("largePoints",g)}}};function as(r,e,t,a,n,i){var o;return t>a?o=-1:t<a?o=1:o=i?0:e>0?r.get(n,e-1)<=a?1:-1:1,o}function Fp(r,e){var t=r.getBaseAxis(),a,n=t.type==="category"?t.getBandWidth():(a=t.getExtent(),Math.abs(a[1]-a[0])/e.count()),i=Me(ue(r.get("barMaxWidth"),n),n),o=Me(ue(r.get("barMinWidth"),1),n),l=r.get("barWidth");return l!=null?Me(l,n):Math.max(Math.min(n/2,i),o)}function Vp(r){r.registerChartView(Op),r.registerSeriesModel(mu),r.registerPreprocessor(Gp),r.registerVisual(Ep),r.registerLayout(Hp)}var Et=$e(),ns=kt,gn=we,Wp=(function(){function r(){this._dragging=!1,this.animationThreshold=15}return r.prototype.render=function(e,t,a,n){var i=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=a,!(!n&&this._lastValue===i&&this._lastStatus===o)){this._lastValue=i,this._lastStatus=o;var l=this._group,s=this._handle;if(!o||o==="hide"){l&&l.hide(),s&&s.hide();return}l&&l.show(),s&&s.show();var u={};this.makeElOption(u,i,e,t,a);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(a),this._lastGraphicKey=c;var h=this._moveAnimation=this.determineAnimation(e,t);if(!l)l=this._group=new Ae,this.createPointerEl(l,u,e,t),this.createLabelEl(l,u,e,t),a.getZr().add(l);else{var v=fe(is,t,h);this.updatePointerEl(l,u,v),this.updateLabelEl(l,u,v,t)}ss(l,t,!0),this._renderHandle(i)}},r.prototype.remove=function(e){this.clear(e)},r.prototype.dispose=function(e){this.clear(e)},r.prototype.determineAnimation=function(e,t){var a=t.get("animation"),n=e.axis,i=n.type==="category",o=t.get("snap");if(!o&&!i)return!1;if(a==="auto"||a==null){var l=this.animationThreshold;if(i&&n.getBandWidth()>l)return!0;if(o){var s=_i(e).seriesDataCount,u=n.getExtent();return Math.abs(u[0]-u[1])/s>l}return!1}return a===!0},r.prototype.makeElOption=function(e,t,a,n,i){},r.prototype.createPointerEl=function(e,t,a,n){var i=t.pointer;if(i){var o=Et(e).pointerEl=new mh[i.type](ns(t.pointer));e.add(o)}},r.prototype.createLabelEl=function(e,t,a,n){if(t.label){var i=Et(e).labelEl=new Ct(ns(t.label));e.add(i),os(i,n)}},r.prototype.updatePointerEl=function(e,t,a){var n=Et(e).pointerEl;n&&t.pointer&&(n.setStyle(t.pointer.style),a(n,{shape:t.pointer.shape}))},r.prototype.updateLabelEl=function(e,t,a,n){var i=Et(e).labelEl;i&&(i.setStyle(t.label.style),a(i,{x:t.label.x,y:t.label.y}),os(i,n))},r.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,a=this._api.getZr(),n=this._handle,i=t.getModel("handle"),o=t.get("status");if(!i.get("show")||!o||o==="hide"){n&&a.remove(n),this._handle=null;return}var l;this._handle||(l=!0,n=this._handle=rl(i.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){yh(u.event)},onmousedown:gn(this._onHandleDragMove,this,0,0),drift:gn(this._onHandleDragMove,this),ondragend:gn(this._onHandleDragEnd,this)}),a.add(n)),ss(n,t,!1),n.setStyle(i.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=i.get("size");J(s)||(s=[s,s]),n.scaleX=s[0]/2,n.scaleY=s[1]/2,al(this,"_doDispatchAxisPointer",i.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,l)}},r.prototype._moveHandleToValue=function(e,t){is(this._axisPointerModel,!t&&this._moveAnimation,this._handle,mn(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},r.prototype._onHandleDragMove=function(e,t){var a=this._handle;if(a){this._dragging=!0;var n=this.updateHandleTransform(mn(a),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=n,a.stopAnimation(),a.attr(mn(n)),Et(a).lastProp=null,this._doDispatchAxisPointer()}},r.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,a=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:a.axis.dim,axisIndex:a.componentIndex}]})}},r.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},r.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),a=this._group,n=this._handle;t&&a&&(this._lastGraphicKey=null,a&&t.remove(a),n&&t.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),Tn(this,"_doDispatchAxisPointer")},r.prototype.doClear=function(){},r.prototype.buildLabel=function(e,t,a){return a=a||0,{x:e[a],y:e[1-a],width:t[a],height:t[1-a]}},r})();function is(r,e,t,a){yu(Et(t).lastProp,a)||(Et(t).lastProp=a,e?Pe(t,a,r):(t.stopAnimation(),t.attr(a)))}function yu(r,e){if(ke(r)&&ke(e)){var t=!0;return M(e,function(a,n){t=t&&yu(r[n],a)}),!!t}else return r===e}function os(r,e){r[e.get(["label","show"])?"show":"hide"]()}function mn(r){return{x:r.x||0,y:r.y||0,rotation:r.rotation||0}}function ss(r,e,t){var a=e.get("z"),n=e.get("zlevel");r&&r.traverse(function(i){i.type!=="group"&&(a!=null&&(i.z=a),n!=null&&(i.zlevel=n),i.silent=t)})}function Up(r){var e=r.get("type"),t=r.getModel(e+"Style"),a;return e==="line"?(a=t.getLineStyle(),a.fill=null):e==="shadow"&&(a=t.getAreaStyle(),a.stroke=null),a}function Zp(r,e,t,a,n){var i=t.get("value"),o=_u(i,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),l=t.getModel("label"),s=ui(l.get("padding")||0),u=l.getFont(),c=Fs(o,u),h=n.position,v=c.width+s[1]+s[3],f=c.height+s[0]+s[2],d=n.align;d==="right"&&(h[0]-=v),d==="center"&&(h[0]-=v/2);var p=n.verticalAlign;p==="bottom"&&(h[1]-=f),p==="middle"&&(h[1]-=f/2),Xp(h,v,f,a);var y=l.get("backgroundColor");(!y||y==="auto")&&(y=e.get(["axisLine","lineStyle","color"])),r.label={x:h[0],y:h[1],style:$a(l,{text:o,font:u,fill:l.getTextColor(),padding:s,backgroundColor:y}),z2:10}}function Xp(r,e,t,a){var n=a.getWidth(),i=a.getHeight();r[0]=Math.min(r[0]+e,n)-e,r[1]=Math.min(r[1]+t,i)-t,r[0]=Math.max(r[0],0),r[1]=Math.max(r[1],0)}function _u(r,e,t,a,n){r=e.scale.parse(r);var i=e.scale.getLabel({value:r},{precision:n.precision}),o=n.formatter;if(o){var l={value:_a(e,{value:r}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};M(a,function(s){var u=t.getSeriesByIndex(s.seriesIndex),c=s.dataIndexInside,h=u&&u.getDataParams(c);h&&l.seriesData.push(h)}),ve(o)?i=o.replace("{value}",i):_e(o)&&(i=o(l))}return i}function bu(r,e,t){var a=li();return Qs(a,a,t.rotation),_h(a,a,t.position),bh([r.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],a)}function Yp(r,e,t,a,n,i){var o=wt.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=n.get(["label","margin"]),Zp(e,a,n,i,{position:bu(a.axis,r,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function qp(r,e,t){return t=t||0,{x1:r[t],y1:r[1-t],x2:e[t],y2:e[1-t]}}function Kp(r,e,t){return t=t||0,{x:r[t],y:r[1-t],width:e[t],height:e[1-t]}}var jp=(function(r){X(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,a,n,i,o){var l=n.axis,s=l.grid,u=i.get("type"),c=ls(s,l).getOtherAxis(l).getGlobalExtent(),h=l.toGlobalCoord(l.dataToCoord(a,!0));if(u&&u!=="none"){var v=Up(i),f=Qp[u](l,h,c);f.style=v,t.graphicKey=f.type,t.pointer=f}var d=ka(s.getRect(),n);Yp(a,t,d,n,i,o)},e.prototype.getHandleTransform=function(t,a,n){var i=ka(a.axis.grid.getRect(),a,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var o=bu(a.axis,t,i);return{x:o[0],y:o[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,a,n,i){var o=n.axis,l=o.grid,s=o.getGlobalExtent(!0),u=ls(l,o).getOtherAxis(o).getGlobalExtent(),c=o.dim==="x"?0:1,h=[t.x,t.y];h[c]+=a[c],h[c]=Math.min(s[1],h[c]),h[c]=Math.max(s[0],h[c]);var v=(u[1]+u[0])/2,f=[v,v];f[c]=h[c];var d=[{verticalAlign:"middle"},{align:"center"}];return{x:h[0],y:h[1],rotation:t.rotation,cursorPoint:f,tooltipOption:d[c]}},e})(Wp);function ls(r,e){var t={};return t[e.dim+"AxisIndex"]=e.index,r.getCartesian(t)}var Qp={line:function(r,e,t){var a=qp([e,t[0]],[e,t[1]],us(r));return{type:"Line",subPixelOptimize:!0,shape:a}},shadow:function(r,e,t){var a=Math.max(1,r.getBandWidth()),n=t[1]-t[0];return{type:"Rect",shape:Kp([e-a/2,t[0]],[a,n],us(r))}}};function us(r){return r.dim==="x"?0:1}var Jp=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:Q.color.border,width:1,type:"dashed"},shadowStyle:{color:Q.color.shadowTint},label:{show:!0,formatter:null,precision:"auto",margin:3,color:Q.color.neutral00,padding:[5,7,5,7],backgroundColor:Q.color.accent60,borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:Q.color.accent40,throttle:40}},e})(ot),it=$e(),eg=M;function xu(r,e,t){if(!Le.node){var a=e.getZr();it(a).records||(it(a).records={}),tg(a,e);var n=it(a).records[r]||(it(a).records[r]={});n.handler=t}}function tg(r,e){if(it(r).initialized)return;it(r).initialized=!0,t("click",fe(cs,"click")),t("mousemove",fe(cs,"mousemove")),t("globalout",ag);function t(a,n){r.on(a,function(i){var o=ng(e);eg(it(r).records,function(l){l&&n(l,i,o.dispatchAction)}),rg(o.pendings,e)})}}function rg(r,e){var t=r.showTip.length,a=r.hideTip.length,n;t?n=r.showTip[t-1]:a&&(n=r.hideTip[a-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}function ag(r,e,t){r.handler("leave",null,t)}function cs(r,e,t,a){e.handler(r,t,a)}function ng(r){var e={showTip:[],hideTip:[]},t=function(a){var n=e[a.type];n?n.push(a):(a.dispatchAction=t,r.dispatchAction(a))};return{dispatchAction:t,pendings:e}}function Un(r,e){if(!Le.node){var t=e.getZr(),a=(it(t).records||{})[r];a&&(it(t).records[r]=null)}}var ig=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,n){var i=a.getComponent("tooltip"),o=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";xu("axisPointer",n,function(l,s,u){o!=="none"&&(l==="leave"||o.indexOf(l)>=0)&&u({type:"updateAxisPointer",currTrigger:l,x:s&&s.offsetX,y:s&&s.offsetY})})},e.prototype.remove=function(t,a){Un("axisPointer",a)},e.prototype.dispose=function(t,a){Un("axisPointer",a)},e.type="axisPointer",e})(At);function Su(r,e){var t=[],a=r.seriesIndex,n;if(a==null||!(n=e.getSeriesByIndex(a)))return{point:[]};var i=n.getData(),o=Ln(i,r);if(o==null||o<0||J(o))return{point:[]};var l=i.getItemGraphicEl(o),s=n.coordinateSystem;if(n.getTooltipPosition)t=n.getTooltipPosition(o)||[];else if(s&&s.dataToPoint)if(r.isStacked){var u=s.getBaseAxis(),c=s.getOtherAxis(u),h=c.dim,v=u.dim,f=h==="x"||h==="radius"?1:0,d=i.mapDimension(v),p=[];p[f]=i.get(d,o),p[1-f]=i.get(i.getCalculationInfo("stackResultDimension"),o),t=s.dataToPoint(p)||[]}else t=s.dataToPoint(i.getValues(re(s.dimensions,function(g){return i.mapDimension(g)}),o))||[];else if(l){var y=l.getBoundingRect().clone();y.applyTransform(l.transform),t=[y.x+y.width/2,y.y+y.height/2]}return{point:t,el:l}}var hs=$e();function og(r,e,t){var a=r.currTrigger,n=[r.x,r.y],i=r,o=r.dispatchAction||we(t.dispatchAction,t),l=e.getComponent("axisPointer").coordSysAxesInfo;if(l){oa(n)&&(n=Su({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},e).point);var s=oa(n),u=i.axesInfo,c=l.axesInfo,h=a==="leave"||oa(n),v={},f={},d={list:[],map:{}},p={showPointer:fe(lg,f),showTooltip:fe(ug,d)};M(l.coordSysMap,function(g,m){var _=s||g.containPoint(n);M(l.coordSysAxesInfo[m],function(b,k){var x=b.axis,S=fg(u,b);if(!h&&_&&(!u||S)){var T=S&&S.value;T==null&&!s&&(T=x.pointToData(n)),T!=null&&vs(b,T,p,!1,v)}})});var y={};return M(c,function(g,m){var _=g.linkGroup;_&&!f[m]&&M(_.axesInfo,function(b,k){var x=f[k];if(b!==g&&x){var S=x.value;_.mapper&&(S=g.axis.scale.parse(_.mapper(S,fs(b),fs(g)))),y[g.key]=S}})}),M(y,function(g,m){vs(c[m],g,p,!0,v)}),cg(f,c,v),hg(d,n,r,o),vg(c,o,t),v}}function vs(r,e,t,a,n){var i=r.axis;if(!(i.scale.isBlank()||!i.containData(e))){if(!r.involveSeries){t.showPointer(r,e);return}var o=sg(e,r),l=o.payloadBatch,s=o.snapToValue;l[0]&&n.seriesIndex==null&&se(n,l[0]),!a&&r.snap&&i.containData(s)&&s!=null&&(e=s),t.showPointer(r,e,l),t.showTooltip(r,o,s)}}function sg(r,e){var t=e.axis,a=t.dim,n=r,i=[],o=Number.MAX_VALUE,l=-1;return M(e.seriesModels,function(s,u){var c=s.getData().mapDimensionsAll(a),h,v;if(s.getAxisTooltipData){var f=s.getAxisTooltipData(c,r,t);v=f.dataIndices,h=f.nestestValue}else{if(v=s.indicesOfNearest(a,c[0],r,t.type==="category"?.5:null),!v.length)return;h=s.getData().get(c[0],v[0])}if(!(h==null||!isFinite(h))){var d=r-h,p=Math.abs(d);p<=o&&((p<o||d>=0&&l<0)&&(o=p,l=d,n=h,i.length=0),M(v,function(y){i.push({seriesIndex:s.seriesIndex,dataIndexInside:y,dataIndex:s.getData().getRawIndex(y)})}))}}),{payloadBatch:i,snapToValue:n}}function lg(r,e,t,a){r[e.key]={value:t,payloadBatch:a}}function ug(r,e,t,a){var n=t.payloadBatch,i=e.axis,o=i.model,l=e.axisPointerModel;if(!(!e.triggerTooltip||!n.length)){var s=e.coordSys.model,u=Tr(s),c=r.map[u];c||(c=r.map[u]={coordSysId:s.id,coordSysIndex:s.componentIndex,coordSysType:s.type,coordSysMainType:s.mainType,dataByAxis:[]},r.list.push(c)),c.dataByAxis.push({axisDim:i.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:a,valueLabelOpt:{precision:l.get(["label","precision"]),formatter:l.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function cg(r,e,t){var a=t.axesInfo=[];M(e,function(n,i){var o=n.axisPointerModel.option,l=r[i];l?(!n.useHandle&&(o.status="show"),o.value=l.value,o.seriesDataIndices=(l.payloadBatch||[]).slice()):!n.useHandle&&(o.status="hide"),o.status==="show"&&a.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:o.value})})}function hg(r,e,t,a){if(oa(e)||!r.list.length){a({type:"hideTip"});return}var n=((r.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};a({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:r.list})}function vg(r,e,t){var a=t.getZr(),n="axisPointerLastHighlights",i=hs(a)[n]||{},o=hs(a)[n]={};M(r,function(u,c){var h=u.axisPointerModel.option;h.status==="show"&&u.triggerEmphasis&&M(h.seriesDataIndices,function(v){var f=v.seriesIndex+" | "+v.dataIndex;o[f]=v})});var l=[],s=[];M(i,function(u,c){!o[c]&&s.push(u)}),M(o,function(u,c){!i[c]&&l.push(u)}),s.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:s}),l.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:l})}function fg(r,e){for(var t=0;t<(r||[]).length;t++){var a=r[t];if(e.axis.dim===a.axisDim&&e.axis.model.componentIndex===a.axisIndex)return a}}function fs(r){var e=r.axis.model,t={},a=t.axisDim=r.axis.dim;return t.axisIndex=t[a+"AxisIndex"]=e.componentIndex,t.axisName=t[a+"AxisName"]=e.name,t.axisId=t[a+"AxisId"]=e.id,t}function oa(r){return!r||r[0]==null||isNaN(r[0])||r[1]==null||isNaN(r[1])}function wu(r){vu.registerAxisPointerClass("CartesianAxisPointer",jp),r.registerComponentModel(Jp),r.registerComponentView(ig),r.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!J(t)&&(e.axisPointer.link=[t])}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=lp(e,t)}),r.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},og)}function dg(r){ut(pu),ut(wu)}function pg(r,e){var t=ui(e.get("padding")),a=e.getItemStyle(["color","opacity"]);a.fill=e.get("backgroundColor");var n=new qe({shape:{x:r.x-t[3],y:r.y-t[0],width:r.width+t[1]+t[3],height:r.height+t[0]+t[2],r:e.get("borderRadius")},style:a,silent:!0,z2:-1});return n}var gg=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,displayTransition:!0,enterable:!1,backgroundColor:Q.color.neutral00,shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,defaultBorderColor:Q.color.border,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:Q.color.borderShade,width:1,type:"dashed",textStyle:{}}},textStyle:{color:Q.color.tertiary,fontSize:14}},e})(ot);function ku(r){var e=r.get("confine");return e!=null?!!e:r.get("renderMode")==="richText"}function Au(r){if(Le.domSupported){for(var e=document.documentElement.style,t=0,a=r.length;t<a;t++)if(r[t]in e)return r[t]}}var Cu=Au(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),mg=Au(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Du(r,e){if(!r)return e;e=nl(e,!0);var t=r.indexOf(e);return r=t===-1?e:"-"+r.slice(0,t)+"-"+e,r.toLowerCase()}function yg(r,e){var t=r.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(r);return t?t[e]:null}var _g=Du(mg,"transition"),Si=Du(Cu,"transform"),bg="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Le.transform3dSupported?"will-change:transform;":"");function xg(r){return r=r==="left"?"right":r==="right"?"left":r==="top"?"bottom":"top",r}function Sg(r,e,t){if(!ve(t)||t==="inside")return"";var a=r.get("backgroundColor"),n=r.get("borderWidth");e=Xt(e);var i=xg(t),o=Math.max(Math.round(n)*1.5,6),l="",s=Si+":",u;Oe(["left","right"],i)>-1?(l+="top:50%",s+="translateY(-50%) rotate("+(u=i==="left"?-225:-45)+"deg)"):(l+="left:50%",s+="translateX(-50%) rotate("+(u=i==="top"?225:45)+"deg)");var c=u*Math.PI/180,h=o+n,v=h*Math.abs(Math.cos(c))+h*Math.abs(Math.sin(c)),f=Math.round(((v-Math.SQRT2*n)/2+Math.SQRT2*n-(v-h)/2)*100)/100;l+=";"+i+":-"+f+"px";var d=e+" solid "+n+"px;",p=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",l+";"+s+";","border-bottom:"+d,"border-right:"+d,"background-color:"+a+";"];return'<div style="'+p.join("")+'"></div>'}function wg(r,e,t){var a="cubic-bezier(0.23,1,0.32,1)",n="",i="";return t&&(n=" "+r/2+"s "+a,i="opacity"+n+",visibility"+n),e||(n=" "+r+"s "+a,i+=(i.length?",":"")+(Le.transformSupported?""+Si+n:",left"+n+",top"+n)),_g+":"+i}function ds(r,e,t){var a=r.toFixed(0)+"px",n=e.toFixed(0)+"px";if(!Le.transformSupported)return t?"top:"+n+";left:"+a+";":[["top",n],["left",a]];var i=Le.transform3dSupported,o="translate"+(i?"3d":"")+"("+a+","+n+(i?",0":"")+")";return t?"top:0;left:0;"+Si+":"+o+";":[["top",0],["left",0],[Cu,o]]}function kg(r){var e=[],t=r.get("fontSize"),a=r.getTextColor();a&&e.push("color:"+a),e.push("font:"+r.getFont());var n=ue(r.get("lineHeight"),Math.round(t*3/2));t&&e.push("line-height:"+n+"px");var i=r.get("textShadowColor"),o=r.get("textShadowBlur")||0,l=r.get("textShadowOffsetX")||0,s=r.get("textShadowOffsetY")||0;return i&&o&&e.push("text-shadow:"+l+"px "+s+"px "+o+"px "+i),M(["decoration","align"],function(u){var c=r.get(u);c&&e.push("text-"+u+":"+c)}),e.join(";")}function Ag(r,e,t,a){var n=[],i=r.get("transitionDuration"),o=r.get("backgroundColor"),l=r.get("shadowBlur"),s=r.get("shadowColor"),u=r.get("shadowOffsetX"),c=r.get("shadowOffsetY"),h=r.getModel("textStyle"),v=il(r,"html"),f=u+"px "+c+"px "+l+"px "+s;return n.push("box-shadow:"+f),e&&i>0&&n.push(wg(i,t,a)),o&&n.push("background-color:"+o),M(["width","color","radius"],function(d){var p="border-"+d,y=nl(p),g=r.get(y);g!=null&&n.push(p+":"+g+(d==="color"?"":"px"))}),n.push(kg(h)),v!=null&&n.push("padding:"+ui(v).join("px ")+"px"),n.join(";")+";"}function ps(r,e,t,a,n){var i=e&&e.painter;if(t){var o=i&&i.getViewportRoot();o&&Sh(r,o,t,a,n)}else{r[0]=a,r[1]=n;var l=i&&i.getViewportRootOffset();l&&(r[0]+=l.offsetLeft,r[1]+=l.offsetTop)}r[2]=r[0]/e.getWidth(),r[3]=r[1]/e.getHeight()}var Cg=(function(){function r(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Le.wxa)return null;var a=document.createElement("div");a.domBelongToZr=!0,this.el=a;var n=this._zr=e.getZr(),i=t.appendTo,o=i&&(ve(i)?document.querySelector(i):Xi(i)?i:_e(i)&&i(e.getDom()));ps(this._styleCoord,n,o,e.getWidth()/2,e.getHeight()/2),(o||e.getDom()).appendChild(a),this._api=e,this._container=o;var l=this;a.onmouseenter=function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0},a.onmousemove=function(s){if(s=s||window.event,!l._enterable){var u=n.handler,c=n.painter.getViewportRoot();xh(c,s,!0),u.dispatch("mousemove",s)}},a.onmouseleave=function(){l._inContent=!1,l._enterable&&l._show&&l.hideLater(l._hideDelay)}}return r.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),a=yg(t,"position"),n=t.style;n.position!=="absolute"&&a!=="absolute"&&(n.position="relative")}var i=e.get("alwaysShowContent");i&&this._moveIfResized(),this._alwaysShowContent=i,this._enableDisplayTransition=e.get("displayTransition")&&e.get("transitionDuration")>0,this.el.className=e.get("className")||""},r.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var a=this.el,n=a.style,i=this._styleCoord;a.innerHTML?n.cssText=bg+Ag(e,!this._firstShow,this._longHide,this._enableDisplayTransition)+ds(i[0],i[1],!0)+("border-color:"+Xt(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},r.prototype.setContent=function(e,t,a,n,i){var o=this.el;if(e==null){o.innerHTML="";return}var l="";if(ve(i)&&a.get("trigger")==="item"&&!ku(a)&&(l=Sg(a,n,i)),ve(e))o.innerHTML=e+l;else if(e){o.innerHTML="",J(e)||(e=[e]);for(var s=0;s<e.length;s++)Xi(e[s])&&e[s].parentNode!==o&&o.appendChild(e[s]);if(l&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=l,o.appendChild(u)}}},r.prototype.setEnterable=function(e){this._enterable=e},r.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},r.prototype.moveTo=function(e,t){if(this.el){var a=this._styleCoord;if(ps(a,this._zr,this._container,e,t),a[0]!=null&&a[1]!=null){var n=this.el.style,i=ds(a[0],a[1]);M(i,function(o){n[o[0]]=o[1]})}}},r.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},r.prototype.hide=function(){var e=this,t=this.el.style;this._enableDisplayTransition?(t.visibility="hidden",t.opacity="0"):t.display="none",Le.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},r.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(we(this.hide,this),e)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this._zr;wh(e&&e.painter&&e.painter.getViewportRoot(),this._container);var t=this.el;if(t){t.onmouseenter=t.onmousemove=t.onmouseleave=null;var a=t.parentNode;a&&a.removeChild(t)}this.el=this._container=null},r})(),Dg=(function(){function r(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),ms(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return r.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},r.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},r.prototype.setContent=function(e,t,a,n,i){var o=this;ke(e)&&kh(""),this.el&&this._zr.remove(this.el);var l=a.getModel("textStyle");this.el=new Ct({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:l.get("textShadowColor"),fill:a.get(["textStyle","color"]),padding:il(a,"richText"),verticalAlign:"top",align:"left"},z:a.get("z")}),M(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=a.get(u)}),M(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=l.get(u)||0}),this._zr.add(this.el);var s=this;this.el.on("mouseover",function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0}),this.el.on("mouseout",function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1})},r.prototype.setEnterable=function(e){this._enterable=e},r.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),a=gs(e.style);return[t.width+a.left+a.right,t.height+a.top+a.bottom]},r.prototype.moveTo=function(e,t){var a=this.el;if(a){var n=this._styleCoord;ms(n,this._zr,e,t),e=n[0],t=n[1];var i=a.style,o=yt(i.borderWidth||0),l=gs(i);a.x=e+o+l.left,a.y=t+o+l.top,a.markRedraw()}},r.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},r.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},r.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(we(this.hide,this),e)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){this._zr.remove(this.el)},r})();function yt(r){return Math.max(0,r)}function gs(r){var e=yt(r.shadowBlur||0),t=yt(r.shadowOffsetX||0),a=yt(r.shadowOffsetY||0);return{left:yt(e-t),right:yt(e+t),top:yt(e-a),bottom:yt(e+a)}}function ms(r,e,t,a){r[0]=t,r[1]=a,r[2]=r[0]/e.getWidth(),r[3]=r[1]/e.getHeight()}var Lg=new qe({shape:{x:-1,y:-1,width:2,height:2}}),Tg=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,a){if(!(Le.node||!a.getDom())){var n=t.getComponent("tooltip"),i=this._renderMode=Ah(n.get("renderMode"));this._tooltipContent=i==="richText"?new Dg(a):new Cg(a,{appendTo:n.get("appendToBody",!0)?"body":n.get("appendTo",!0)})}},e.prototype.render=function(t,a,n){if(!(Le.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=a,this._api=n;var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?al(this,"_updatePosition",50,"fixRate"):Tn(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,a=t.get("triggerOn");xu("itemTooltip",this._api,we(function(n,i,o){a!=="none"&&(a.indexOf(n)>=0?this._tryShow(i,o):n==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,a=this._ecModel,n=this._api,i=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&i!=="none"&&i!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&o.manuallyShowTip(t,a,n,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,a,n,i){if(!(i.from===this.uid||Le.node||!n.getDom())){var o=ys(i,n);this._ticket="";var l=i.dataByCoordSys,s=Eg(i,a,n);if(s){var u=s.el.getBoundingRect().clone();u.applyTransform(s.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:s.el,position:i.position,positionDefault:"bottom"},o)}else if(i.tooltip&&i.x!=null&&i.y!=null){var c=Lg;c.x=i.x,c.y=i.y,c.update(),me(c).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:c},o)}else if(l)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:l,tooltipOption:i.tooltipOption},o);else if(i.seriesIndex!=null){if(this._manuallyAxisShowTip(t,a,n,i))return;var h=Su(i,a),v=h.point[0],f=h.point[1];v!=null&&f!=null&&this._tryShow({offsetX:v,offsetY:f,target:h.el,position:i.position,positionDefault:"bottom"},o)}else i.x!=null&&i.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},o))}},e.prototype.manuallyHideTip=function(t,a,n,i){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(ys(i,n))},e.prototype._manuallyAxisShowTip=function(t,a,n,i){var o=i.seriesIndex,l=i.dataIndex,s=a.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||l==null||s==null)){var u=a.getSeriesByIndex(o);if(u){var c=u.getData(),h=hr([c.getItemModel(l),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(h.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:l,position:i.position}),!0}}},e.prototype._tryShow=function(t,a){var n=t.target,i=this._tooltipModel;if(i){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(n){var l=me(n);if(l.ssrType==="legend")return;this._lastDataByCoordSys=null;var s,u;Ch(n,function(c){if(c.tooltipDisabled)return s=u=null,!0;s||u||(me(c).dataIndex!=null?s=c:me(c).tooltipConfig!=null&&(u=c))},!0),s?this._showSeriesItemTooltip(t,s,a):u?this._showComponentItemTooltip(t,u,a):this._hide(a)}else this._lastDataByCoordSys=null,this._hide(a)}},e.prototype._showOrMove=function(t,a){var n=t.get("showDelay");a=we(a,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(a,n):a()},e.prototype._showAxisTooltip=function(t,a){var n=this._ecModel,i=this._tooltipModel,o=[a.offsetX,a.offsetY],l=hr([a.tooltipOption],i),s=this._renderMode,u=[],c=ga("section",{blocks:[],noHeader:!0}),h=[],v=new Xa;M(t,function(m){M(m.dataByAxis,function(_){var b=n.getComponent(_.axisDim+"Axis",_.axisIndex),k=_.value;if(!(!b||k==null)){var x=_u(k,b.axis,n,_.seriesDataIndices,_.valueLabelOpt),S=ga("section",{header:x,noHeader:!Dh(x),sortBlocks:!0,blocks:[]});c.blocks.push(S),M(_.seriesDataIndices,function(T){var D=n.getSeriesByIndex(T.seriesIndex),L=T.dataIndexInside,A=D.getDataParams(L);if(!(A.dataIndex<0)){A.axisDim=_.axisDim,A.axisIndex=_.axisIndex,A.axisType=_.axisType,A.axisId=_.axisId,A.axisValue=_a(b.axis,{value:k}),A.axisValueLabel=x,A.marker=v.makeTooltipMarker("item",Xt(A.color),s);var I=Yi(D.formatTooltip(L,!0,null)),C=I.frag;if(C){var O=hr([D],i).get("valueFormatter");S.blocks.push(O?se({valueFormatter:O},C):C)}I.text&&h.push(I.text),u.push(A)}})}})}),c.blocks.reverse(),h.reverse();var f=a.position,d=l.get("order"),p=qi(c,v,s,d,n.get("useUTC"),l.get("textStyle"));p&&h.unshift(p);var y=s==="richText"?`

`:"<br/>",g=h.join(y);this._showOrMove(l,function(){this._updateContentNotChangedOnAxis(t,u)?this._updatePosition(l,f,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(l,g,u,Math.random()+"",o[0],o[1],f,null,v)})},e.prototype._showSeriesItemTooltip=function(t,a,n){var i=this._ecModel,o=me(a),l=o.seriesIndex,s=i.getSeriesByIndex(l),u=o.dataModel||s,c=o.dataIndex,h=o.dataType,v=u.getData(h),f=this._renderMode,d=t.positionDefault,p=hr([v.getItemModel(c),u,s&&(s.coordinateSystem||{}).model],this._tooltipModel,d?{position:d}:null),y=p.get("trigger");if(!(y!=null&&y!=="item")){var g=u.getDataParams(c,h),m=new Xa;g.marker=m.makeTooltipMarker("item",Xt(g.color),f);var _=Yi(u.formatTooltip(c,!1,h)),b=p.get("order"),k=p.get("valueFormatter"),x=_.frag,S=x?qi(k?se({valueFormatter:k},x):x,m,f,b,i.get("useUTC"),p.get("textStyle")):_.text,T="item_"+u.name+"_"+c;this._showOrMove(p,function(){this._showTooltipContent(p,S,g,T,t.offsetX,t.offsetY,t.position,t.target,m)}),n({type:"showTip",dataIndexInside:c,dataIndex:v.getRawIndex(c),seriesIndex:l,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,a,n){var i=this._renderMode==="html",o=me(a),l=o.tooltipConfig,s=l.option||{},u=s.encodeHTMLContent;if(ve(s)){var c=s;s={content:c,formatter:c},u=!0}u&&i&&s.content&&(s=kt(s),s.content=Lh(s.content));var h=[s],v=this._ecModel.getComponent(o.componentMainType,o.componentIndex);v&&h.push(v),h.push({formatter:s.content});var f=t.positionDefault,d=hr(h,this._tooltipModel,f?{position:f}:null),p=d.get("content"),y=Math.random()+"",g=new Xa;this._showOrMove(d,function(){var m=kt(d.get("formatterParams")||{});this._showTooltipContent(d,p,m,y,t.offsetX,t.offsetY,t.position,a,g)}),n({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,a,n,i,o,l,s,u,c){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var h=this._tooltipContent;h.setEnterable(t.get("enterable"));var v=t.get("formatter");s=s||t.get("position");var f=a,d=this._getNearestPoint([o,l],n,t.get("trigger"),t.get("borderColor"),t.get("defaultBorderColor",!0)),p=d.color;if(v)if(ve(v)){var y=t.ecModel.get("useUTC"),g=J(n)?n[0]:n,m=g&&g.axisType&&g.axisType.indexOf("time")>=0;f=v,m&&(f=zs(g.axisValue,f,y)),f=Th(f,n,!0)}else if(_e(v)){var _=we(function(b,k){b===this._ticket&&(h.setContent(k,c,t,p,s),this._updatePosition(t,s,o,l,h,n,u))},this);this._ticket=i,f=v(n,i,_)}else f=v;h.setContent(f,c,t,p,s),h.show(t,p),this._updatePosition(t,s,o,l,h,n,u)}},e.prototype._getNearestPoint=function(t,a,n,i,o){if(n==="axis"||J(a))return{color:i||o};if(!J(a))return{color:i||a.color||a.borderColor}},e.prototype._updatePosition=function(t,a,n,i,o,l,s){var u=this._api.getWidth(),c=this._api.getHeight();a=a||t.get("position");var h=o.getSize(),v=t.get("align"),f=t.get("verticalAlign"),d=s&&s.getBoundingRect().clone();if(s&&d.applyTransform(s.transform),_e(a)&&(a=a([n,i],l,o.el,d,{viewSize:[u,c],contentSize:h.slice()})),J(a))n=Me(a[0],u),i=Me(a[1],c);else if(ke(a)){var p=a;p.width=h[0],p.height=h[1];var y=Ar(p,{width:u,height:c});n=y.x,i=y.y,v=null,f=null}else if(ve(a)&&s){var g=Pg(a,d,h,t.get("borderWidth"));n=g[0],i=g[1]}else{var g=Ig(n,i,o,u,c,v?null:20,f?null:20);n=g[0],i=g[1]}if(v&&(n-=_s(v)?h[0]/2:v==="right"?h[0]:0),f&&(i-=_s(f)?h[1]/2:f==="bottom"?h[1]:0),ku(t)){var g=Mg(n,i,o,u,c);n=g[0],i=g[1]}o.moveTo(n,i)},e.prototype._updateContentNotChangedOnAxis=function(t,a){var n=this._lastDataByCoordSys,i=this._cbParamsList,o=!!n&&n.length===t.length;return o&&M(n,function(l,s){var u=l.dataByAxis||[],c=t[s]||{},h=c.dataByAxis||[];o=o&&u.length===h.length,o&&M(u,function(v,f){var d=h[f]||{},p=v.seriesDataIndices||[],y=d.seriesDataIndices||[];o=o&&v.value===d.value&&v.axisType===d.axisType&&v.axisId===d.axisId&&p.length===y.length,o&&M(p,function(g,m){var _=y[m];o=o&&g.seriesIndex===_.seriesIndex&&g.dataIndex===_.dataIndex}),i&&M(v.seriesDataIndices,function(g){var m=g.seriesIndex,_=a[m],b=i[m];_&&b&&b.data!==_.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=a,!!o},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,a){Le.node||!a.getDom()||(Tn(this,"_updatePosition"),this._tooltipContent.dispose(),Un("itemTooltip",a))},e.type="tooltip",e})(At);function hr(r,e,t){var a=e.ecModel,n;t?(n=new bt(t,a,a),n=new bt(e.option,n,a)):n=e;for(var i=r.length-1;i>=0;i--){var o=r[i];o&&(o instanceof bt&&(o=o.get("tooltip",!0)),ve(o)&&(o={formatter:o}),o&&(n=new bt(o,n,a)))}return n}function ys(r,e){return r.dispatchAction||we(e.dispatchAction,e)}function Ig(r,e,t,a,n,i,o){var l=t.getSize(),s=l[0],u=l[1];return i!=null&&(r+s+i+2>a?r-=s+i:r+=i),o!=null&&(e+u+o>n?e-=u+o:e+=o),[r,e]}function Mg(r,e,t,a,n){var i=t.getSize(),o=i[0],l=i[1];return r=Math.min(r+o,a)-o,e=Math.min(e+l,n)-l,r=Math.max(r,0),e=Math.max(e,0),[r,e]}function Pg(r,e,t,a){var n=t[0],i=t[1],o=Math.ceil(Math.SQRT2*a)+8,l=0,s=0,u=e.width,c=e.height;switch(r){case"inside":l=e.x+u/2-n/2,s=e.y+c/2-i/2;break;case"top":l=e.x+u/2-n/2,s=e.y-i-o;break;case"bottom":l=e.x+u/2-n/2,s=e.y+c+o;break;case"left":l=e.x-n-o,s=e.y+c/2-i/2;break;case"right":l=e.x+u+o,s=e.y+c/2-i/2}return[l,s]}function _s(r){return r==="center"||r==="middle"}function Eg(r,e,t){var a=Ih(r).queryOptionMap,n=a.keys()[0];if(!(!n||n==="series")){var i=Mh(e,n,a.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),o=i.models[0];if(o){var l=t.getViewOfComponentModel(o),s;if(l.group.traverse(function(u){var c=me(u).tooltipConfig;if(c&&c.name===r.name)return s=u,!0}),s)return{componentMainType:n,componentIndex:o.componentIndex,el:s}}}}function Rg(r){ut(wu),r.registerComponentModel(gg),r.registerComponentView(Tg),r.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Ki),r.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Ki)}function Lu(r,e){if(!r)return!1;for(var t=J(r)?r:[r],a=0;a<t.length;a++)if(t[a]&&t[a][e])return!0;return!1}function qr(r){Ph(r,"label",["show"])}var Kr=$e(),Lt=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t.preventAutoZ=!0,t}return e.prototype.init=function(t,a,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(Le.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,a){this._mergeOption(t,a,!1,!1)},e.prototype._mergeOption=function(t,a,n,i){var o=this.mainType;n||a.eachSeries(function(l){var s=l.get(this.mainType,!0),u=Kr(l)[o];if(!s||!s.data){Kr(l)[o]=null;return}u?u._mergeOption(s,a,!0):(i&&qr(s),M(s.data,function(c){c instanceof Array?(qr(c[0]),qr(c[1])):qr(c)}),u=this.createMarkerModelFromSeries(s,this,a),se(u,{mainType:this.mainType,seriesIndex:l.seriesIndex,name:l.name,createdBySelf:!0}),u.__hostSeries=l),Kr(l)[o]=u},this)},e.prototype.formatTooltip=function(t,a,n){var i=this.getData(),o=this.getRawValue(t),l=i.getName(t);return ga("section",{header:this.name,blocks:[ga("nameValue",{name:l,value:o,noName:!l,noValue:o==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,a){var n=ol.prototype.getDataParams.call(this,t,a),i=this.__hostSeries;return i&&(n.seriesId=i.id,n.seriesName=i.name,n.seriesType=i.subType),n},e.getMarkerModelFromSeries=function(t,a){return Kr(t)[a]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e})(ot);oi(Lt,ol.prototype);function Zn(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}function Og(r){return!isNaN(parseFloat(r.x))&&!isNaN(parseFloat(r.y))}function jr(r,e,t,a,n,i,o){var l=[],s=zt(e,n),u=s?e.getCalculationInfo("stackResultDimension"):n,c=Da(e,u,r),h=e.hostModel,v=h.indicesOfNearest(t,u,c)[0];l[i]=e.get(a,v),l[o]=e.get(u,v);var f=e.get(n,v),d=Ra(e.get(n,v));return d=Math.min(d,20),d>=0&&(l[o]=+l[o].toFixed(d)),[l,f]}var Qr={min:fe(jr,"min"),max:fe(jr,"max"),average:fe(jr,"average"),median:fe(jr,"median")};function Aa(r,e){if(e){var t=r.getData(),a=r.coordinateSystem,n=a&&a.dimensions;if(!Og(e)&&!J(e.coord)&&J(n)){var i=Tu(e,t,a,r);if(e=kt(e),e.type&&Qr[e.type]&&i.baseAxis&&i.valueAxis){var o=Oe(n,i.baseAxis.dim),l=Oe(n,i.valueAxis.dim),s=Qr[e.type](t,i.valueAxis.dim,i.baseDataDim,i.valueDataDim,o,l);e.coord=s[0],e.value=s[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!J(n)){e.coord=[];var u=r.getBaseAxis();if(u&&e.type&&Qr[e.type]){var c=a.getOtherAxis(u);c&&(e.value=Da(t,t.mapDimension(c.dim),e.type))}}else for(var h=e.coord,v=0;v<2;v++)Qr[h[v]]&&(h[v]=Da(t,t.mapDimension(n[v]),h[v]));return e}}function Tu(r,e,t,a){var n={};return r.valueIndex!=null||r.valueDim!=null?(n.valueDataDim=r.valueIndex!=null?e.getDimension(r.valueIndex):r.valueDim,n.valueAxis=t.getAxis(Ng(a,n.valueDataDim)),n.baseAxis=t.getOtherAxis(n.valueAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim)):(n.baseAxis=a.getBaseAxis(),n.valueAxis=t.getOtherAxis(n.baseAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim),n.valueDataDim=e.mapDimension(n.valueAxis.dim)),n}function Ng(r,e){var t=r.getData().getDimensionInfo(e);return t&&t.coordDim}function Ca(r,e){return r&&r.containData&&e.coord&&!Zn(e)?r.containData(e.coord):!0}function Bg(r,e,t){return r&&r.containZone&&e.coord&&t.coord&&!Zn(e)&&!Zn(t)?r.containZone(e.coord,t.coord):!0}function $g(r,e){return r?function(t,a,n,i){var o=i<2?t.coord&&t.coord[i]:t.value;return ma(o,e[i])}:function(t,a,n,i){return ma(t.value,e[i])}}function Da(r,e,t){if(t==="average"){var a=0,n=0;return r.each(e,function(i,o){isNaN(i)||(a+=i,n++)}),a/n}else return t==="median"?r.getMedian(e):r.getDataExtent(e)[t==="max"?1:0]}var yn=$e(),Iu=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=Ne()},e.prototype.render=function(t,a,n){var i=this,o=this.markerGroupMap;o.each(function(l){yn(l).keep=!1}),a.eachSeries(function(l){var s=Lt.getMarkerModelFromSeries(l,i.type);s&&i.renderSeries(l,s,a,n)}),o.each(function(l){!yn(l).keep&&i.group.remove(l.group)}),zg(a,o,this.type)},e.prototype.markKeep=function(t){yn(t).keep=!0},e.prototype.toggleBlurSeries=function(t,a){var n=this;M(t,function(i){var o=Lt.getMarkerModelFromSeries(i,n.type);if(o){var l=o.getData();l.eachItemGraphicEl(function(s){s&&(a?Eh(s):Rh(s))})}})},e.type="marker",e})(At);function zg(r,e,t){r.eachSeries(function(a){var n=Lt.getMarkerModelFromSeries(a,t),i=e.get(a.id);if(n&&i&&i.group){var o=Oh(n),l=o.z,s=o.zlevel;Nh(i.group,l,s)}})}var Gg=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,a,n){return new e(t,a,n)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e})(Lt),Jr=$e(),Hg=function(r,e,t,a){var n=r.getData(),i;if(J(a))i=a;else{var o=a.type;if(o==="min"||o==="max"||o==="average"||o==="median"||a.xAxis!=null||a.yAxis!=null){var l=void 0,s=void 0;if(a.yAxis!=null||a.xAxis!=null)l=e.getAxis(a.yAxis!=null?"y":"x"),s=nt(a.yAxis,a.xAxis);else{var u=Tu(a,n,e,r);l=u.valueAxis;var c=bl(n,u.valueDataDim);s=Da(n,c,o)}var h=l.dim==="x"?0:1,v=1-h,f=kt(a),d={coord:[]};f.type=null,f.coord=[],f.coord[v]=-1/0,d.coord[v]=1/0;var p=t.get("precision");p>=0&&st(s)&&(s=+s.toFixed(Math.min(p,20))),f.coord[h]=d.coord[h]=s,i=[f,d,{type:o,valueIndex:a.valueIndex,value:s}]}else i=[]}var y=[Aa(r,i[0]),Aa(r,i[1]),se({},i[2])];return y[2].type=y[2].type||null,Ie(y[2],y[0]),Ie(y[2],y[1]),y};function La(r){return!isNaN(r)&&!isFinite(r)}function bs(r,e,t,a){var n=1-r,i=a.dimensions[r];return La(e[n])&&La(t[n])&&e[r]===t[r]&&a.getAxis(i).containData(e[r])}function Fg(r,e){if(r.type==="cartesian2d"){var t=e[0].coord,a=e[1].coord;if(t&&a&&(bs(1,t,a,r)||bs(0,t,a,r)))return!0}return Ca(r,e[0])&&Ca(r,e[1])}function _n(r,e,t,a,n){var i=a.coordinateSystem,o=r.getItemModel(e),l,s=Me(o.get("x"),n.getWidth()),u=Me(o.get("y"),n.getHeight());if(!isNaN(s)&&!isNaN(u))l=[s,u];else{if(a.getMarkerPosition)l=a.getMarkerPosition(r.getValues(r.dimensions,e));else{var c=i.dimensions,h=r.get(c[0],e),v=r.get(c[1],e);l=i.dataToPoint([h,v])}if(Jt(i,"cartesian2d")){var f=i.getAxis("x"),d=i.getAxis("y"),c=i.dimensions;La(r.get(c[0],e))?l[0]=f.toGlobalCoord(f.getExtent()[t?0:1]):La(r.get(c[1],e))&&(l[1]=d.toGlobalCoord(d.getExtent()[t?0:1]))}isNaN(s)||(l[0]=s),isNaN(u)||(l[1]=u)}r.setItemLayout(e,l)}var Vg=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,a,n){a.eachSeries(function(i){var o=Lt.getMarkerModelFromSeries(i,"markLine");if(o){var l=o.getData(),s=Jr(o).from,u=Jr(o).to;s.each(function(c){_n(s,c,!0,i,n),_n(u,c,!1,i,n)}),l.each(function(c){l.setItemLayout(c,[s.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,a,n,i){var o=t.coordinateSystem,l=t.id,s=t.getData(),u=this.markerGroupMap,c=u.get(l)||u.set(l,new Ap);this.group.add(c.group);var h=Wg(o,t,a),v=h.from,f=h.to,d=h.line;Jr(a).from=v,Jr(a).to=f,a.setData(d);var p=a.get("symbol"),y=a.get("symbolSize"),g=a.get("symbolRotate"),m=a.get("symbolOffset");J(p)||(p=[p,p]),J(y)||(y=[y,y]),J(g)||(g=[g,g]),J(m)||(m=[m,m]),h.from.each(function(b){_(v,b,!0),_(f,b,!1)}),d.each(function(b){var k=d.getItemModel(b),x=k.getModel("lineStyle").getLineStyle();d.setItemLayout(b,[v.getItemLayout(b),f.getItemLayout(b)]);var S=k.get("z2");x.stroke==null&&(x.stroke=v.getItemVisual(b,"style").fill),d.setItemVisual(b,{z2:ue(S,0),fromSymbolKeepAspect:v.getItemVisual(b,"symbolKeepAspect"),fromSymbolOffset:v.getItemVisual(b,"symbolOffset"),fromSymbolRotate:v.getItemVisual(b,"symbolRotate"),fromSymbolSize:v.getItemVisual(b,"symbolSize"),fromSymbol:v.getItemVisual(b,"symbol"),toSymbolKeepAspect:f.getItemVisual(b,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(b,"symbolOffset"),toSymbolRotate:f.getItemVisual(b,"symbolRotate"),toSymbolSize:f.getItemVisual(b,"symbolSize"),toSymbol:f.getItemVisual(b,"symbol"),style:x})}),c.updateData(d),h.line.eachItemGraphicEl(function(b){me(b).dataModel=a,b.traverse(function(k){me(k).dataModel=a})});function _(b,k,x){var S=b.getItemModel(k);_n(b,k,x,t,i);var T=S.getModel("itemStyle").getItemStyle();T.fill==null&&(T.fill=sl(s,"color")),b.setItemVisual(k,{symbolKeepAspect:S.get("symbolKeepAspect"),symbolOffset:ue(S.get("symbolOffset",!0),m[x?0:1]),symbolRotate:ue(S.get("symbolRotate",!0),g[x?0:1]),symbolSize:ue(S.get("symbolSize"),y[x?0:1]),symbol:ue(S.get("symbol",!0),p[x?0:1]),style:T})}this.markKeep(c),c.group.silent=a.get("silent")||t.get("silent")},e.type="markLine",e})(Iu);function Wg(r,e,t){var a;r?a=re(r&&r.dimensions,function(u){var c=e.getData().getDimensionInfo(e.getData().mapDimension(u))||{};return se(se({},c),{name:u,ordinalMeta:null})}):a=[{name:"value",type:"float"}];var n=new Rt(a,t),i=new Rt(a,t),o=new Rt([],t),l=re(t.get("data"),fe(Hg,e,r,t));r&&(l=lt(l,fe(Fg,r)));var s=$g(!!r,a);return n.initData(re(l,function(u){return u[0]}),null,s),i.initData(re(l,function(u){return u[1]}),null,s),o.initData(re(l,function(u){return u[2]})),o.hasItemOption=!0,{from:n,to:i,line:o}}function Ug(r){r.registerComponentModel(Gg),r.registerComponentView(Vg),r.registerPreprocessor(function(e){Lu(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var Zg=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,a,n){return new e(t,a,n)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e})(Lt),ea=$e(),Xg=function(r,e,t,a){var n=a[0],i=a[1];if(!(!n||!i)){var o=Aa(r,n),l=Aa(r,i),s=o.coord,u=l.coord;s[0]=nt(s[0],-1/0),s[1]=nt(s[1],-1/0),u[0]=nt(u[0],1/0),u[1]=nt(u[1],1/0);var c=Bh([{},o,l]);return c.coord=[o.coord,l.coord],c.x0=o.x,c.y0=o.y,c.x1=l.x,c.y1=l.y,c}};function Ta(r){return!isNaN(r)&&!isFinite(r)}function xs(r,e,t,a){var n=1-r;return Ta(e[n])&&Ta(t[n])}function Yg(r,e){var t=e.coord[0],a=e.coord[1],n={coord:t,x:e.x0,y:e.y0},i={coord:a,x:e.x1,y:e.y1};return Jt(r,"cartesian2d")?t&&a&&(xs(1,t,a)||xs(0,t,a))?!0:Bg(r,n,i):Ca(r,n)||Ca(r,i)}function Ss(r,e,t,a,n){var i=a.coordinateSystem,o=r.getItemModel(e),l,s=Me(o.get(t[0]),n.getWidth()),u=Me(o.get(t[1]),n.getHeight());if(!isNaN(s)&&!isNaN(u))l=[s,u];else{if(a.getMarkerPosition){var c=r.getValues(["x0","y0"],e),h=r.getValues(["x1","y1"],e),v=i.clampData(c),f=i.clampData(h),d=[];t[0]==="x0"?d[0]=v[0]>f[0]?h[0]:c[0]:d[0]=v[0]>f[0]?c[0]:h[0],t[1]==="y0"?d[1]=v[1]>f[1]?h[1]:c[1]:d[1]=v[1]>f[1]?c[1]:h[1],l=a.getMarkerPosition(d,t,!0)}else{var p=r.get(t[0],e),y=r.get(t[1],e),g=[p,y];i.clampData&&i.clampData(g,g),l=i.dataToPoint(g,!0)}if(Jt(i,"cartesian2d")){var m=i.getAxis("x"),_=i.getAxis("y"),p=r.get(t[0],e),y=r.get(t[1],e);Ta(p)?l[0]=m.toGlobalCoord(m.getExtent()[t[0]==="x0"?0:1]):Ta(y)&&(l[1]=_.toGlobalCoord(_.getExtent()[t[1]==="y0"?0:1]))}isNaN(s)||(l[0]=s),isNaN(u)||(l[1]=u)}return l}var ws=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],qg=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,a,n){a.eachSeries(function(i){var o=Lt.getMarkerModelFromSeries(i,"markArea");if(o){var l=o.getData();l.each(function(s){var u=re(ws,function(h){return Ss(l,s,h,i,n)});l.setItemLayout(s,u);var c=l.getItemGraphicEl(s);c.setShape("points",u)})}},this)},e.prototype.renderSeries=function(t,a,n,i){var o=t.coordinateSystem,l=t.id,s=t.getData(),u=this.markerGroupMap,c=u.get(l)||u.set(l,{group:new Ae});this.group.add(c.group),this.markKeep(c);var h=Kg(o,t,a);a.setData(h),h.each(function(v){var f=re(ws,function(L){return Ss(h,v,L,t,i)}),d=o.getAxis("x").scale,p=o.getAxis("y").scale,y=d.getExtent(),g=p.getExtent(),m=[d.parse(h.get("x0",v)),d.parse(h.get("x1",v))],_=[p.parse(h.get("y0",v)),p.parse(h.get("y1",v))];ji(m),ji(_);var b=!(y[0]>m[1]||y[1]<m[0]||g[0]>_[1]||g[1]<_[0]),k=!b;h.setItemLayout(v,{points:f,allClipped:k});var x=h.getItemModel(v),S=x.getModel("itemStyle").getItemStyle(),T=x.get("z2"),D=sl(s,"color");S.fill||(S.fill=D,ve(S.fill)&&(S.fill=Qi(S.fill,.4))),S.stroke||(S.stroke=D),h.setItemVisual(v,"style",S),h.setItemVisual(v,"z2",ue(T,0))}),h.diff(ea(c).data).add(function(v){var f=h.getItemLayout(v),d=h.getItemVisual(v,"z2");if(!f.allClipped){var p=new Ji({z2:ue(d,0),shape:{points:f.points}});h.setItemGraphicEl(v,p),c.group.add(p)}}).update(function(v,f){var d=ea(c).data.getItemGraphicEl(f),p=h.getItemLayout(v),y=h.getItemVisual(v,"z2");p.allClipped?d&&c.group.remove(d):(d?Pe(d,{z2:ue(y,0),shape:{points:p.points}},a,v):d=new Ji({shape:{points:p.points}}),h.setItemGraphicEl(v,d),c.group.add(d))}).remove(function(v){var f=ea(c).data.getItemGraphicEl(v);c.group.remove(f)}).execute(),h.eachItemGraphicEl(function(v,f){var d=h.getItemModel(f),p=h.getItemVisual(f,"style");v.useStyle(h.getItemVisual(f,"style")),Qt(v,Ht(d),{labelFetcher:a,labelDataIndex:f,defaultText:h.getName(f)||"",inheritColor:ve(p.fill)?Qi(p.fill,1):Q.color.neutral99}),Sr(v,d),$t(v,null,null,d.get(["emphasis","disabled"])),me(v).dataModel=a}),ea(c).data=h,c.group.silent=a.get("silent")||t.get("silent")},e.type="markArea",e})(Iu);function Kg(r,e,t){var a,n,i=["x0","y0","x1","y1"];if(r){var o=re(r&&r.dimensions,function(u){var c=e.getData(),h=c.getDimensionInfo(c.mapDimension(u))||{};return se(se({},h),{name:u,ordinalMeta:null})});n=re(i,function(u,c){return{name:u,type:o[c%2].type}}),a=new Rt(n,t)}else n=[{name:"value",type:"float"}],a=new Rt(n,t);var l=re(t.get("data"),fe(Xg,e,r,t));r&&(l=lt(l,fe(Yg,r)));var s=r?function(u,c,h,v){var f=u.coord[Math.floor(v/2)][v%2];return ma(f,n[v])}:function(u,c,h,v){return ma(u.value,n[v])};return a.initData(l,null,s),a.hasItemOption=!0,a}function jg(r){r.registerComponentModel(Zg),r.registerComponentView(qg),r.registerPreprocessor(function(e){Lu(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var Qg=function(r,e){if(e==="all")return{type:"all",title:r.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:r.getLocaleModel().get(["legend","selector","inverse"])}},Xn=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,a,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,a){r.prototype.mergeOption.call(this,t,a),this._updateSelector(t)},e.prototype._updateSelector=function(t){var a=t.selector,n=this.ecModel;a===!0&&(a=t.selector=["all","inverse"]),J(a)&&M(a,function(i,o){ve(i)&&(i={type:i}),a[o]=Ie(i,Qg(n,i.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var a=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),a=!0;break}}!a&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var a=[],n=[];t.eachRawSeries(function(s){var u=s.name;n.push(u);var c;if(s.legendVisualProvider){var h=s.legendVisualProvider,v=h.getAllNames();t.isSeriesFiltered(s)||(n=n.concat(v)),v.length?a=a.concat(v):c=!0}else c=!0;c&&$h(s)&&a.push(s.name)}),this._availableNames=n;var i=this.get("data")||a,o=Ne(),l=re(i,function(s){return(ve(s)||st(s))&&(s={name:s}),o.get(s.name)?null:(o.set(s.name,!0),new bt(s,this,this.ecModel))},this);this._data=lt(l,function(s){return!!s})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var a=this.option.selected,n=this.get("selectedMode");if(n==="single"){var i=this._data;M(i,function(o){a[o.get("name")]=!1})}a[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var a=this.option.selected;a.hasOwnProperty(t)||(a[t]=!0),this[a[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,a=this.option.selected;M(t,function(n){a[n.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,a=this.option.selected;M(t,function(n){var i=n.get("name",!0);a.hasOwnProperty(i)||(a[i]=!0),a[i]=!a[i]})},e.prototype.isSelected=function(t){var a=this.option.selected;return!(a.hasOwnProperty(t)&&!a[t])&&Oe(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",bottom:Q.size.m,align:"auto",backgroundColor:Q.color.transparent,borderColor:Q.color.border,borderRadius:0,borderWidth:0,padding:5,itemGap:8,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:Q.color.disabled,inactiveBorderColor:Q.color.disabled,inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:Q.color.disabled,inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:Q.color.secondary},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:Q.color.tertiary,borderWidth:1,borderColor:Q.color.border},emphasis:{selectorLabel:{show:!0,color:Q.color.quaternary}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1},triggerEvent:!1},e})(ot),Ut=fe,Yn=M,ta=Ae,Mu=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new ta),this.group.add(this._selectorGroup=new ta),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,a,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),l=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&l==="vertical"?"right":"left");var s=t.get("selector",!0),u=t.get("selectorPosition",!0);s&&(!u||u==="auto")&&(u=l==="horizontal"?"end":"start"),this.renderInner(o,t,a,n,s,l,u);var c=el(t,n).refContainer,h=t.getBoxLayoutParams(),v=t.get("padding"),f=Ar(h,c,v),d=this.layoutInner(t,o,f,i,s,u),p=Ar(Be({width:d.width,height:d.height},h),c,v);this.group.x=p.x-d.x,this.group.y=p.y-d.y,this.group.markRedraw(),this.group.add(this._backgroundEl=pg(d,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,a,n,i,o,l,s){var u=this.getContentGroup(),c=Ne(),h=a.get("selectedMode"),v=a.get("triggerEvent"),f=[];n.eachRawSeries(function(d){!d.get("legendHoverLink")&&f.push(d.id)}),Yn(a.getData(),function(d,p){var y=this,g=d.get("name");if(!this.newlineDisabled&&(g===""||g===`
`)){var m=new ta;m.newline=!0,u.add(m);return}var _=n.getSeriesByName(g)[0];if(!c.get(g))if(_){var b=_.getData(),k=b.getVisual("legendLineStyle")||{},x=b.getVisual("legendIcon"),S=b.getVisual("style"),T=this._createItem(_,g,p,d,a,t,k,S,x,h,i);T.on("click",Ut(ks,g,null,i,f)).on("mouseover",Ut(qn,_.name,null,i,f)).on("mouseout",Ut(Kn,_.name,null,i,f)),n.ssr&&T.eachChild(function(D){var L=me(D);L.seriesIndex=_.seriesIndex,L.dataIndex=p,L.ssrType="legend"}),v&&T.eachChild(function(D){y.packEventData(D,a,_,p,g)}),c.set(g,!0)}else n.eachRawSeries(function(D){var L=this;if(!c.get(g)&&D.legendVisualProvider){var A=D.legendVisualProvider;if(!A.containName(g))return;var I=A.indexOfName(g),C=A.getItemVisual(I,"style"),O=A.getItemVisual(I,"legendIcon"),N=zh(C.fill);N&&N[3]===0&&(N[3]=.2,C=se(se({},C),{fill:Gh(N,"rgba")}));var V=this._createItem(D,g,p,d,a,t,{},C,O,h,i);V.on("click",Ut(ks,null,g,i,f)).on("mouseover",Ut(qn,null,g,i,f)).on("mouseout",Ut(Kn,null,g,i,f)),n.ssr&&V.eachChild(function(K){var $=me(K);$.seriesIndex=D.seriesIndex,$.dataIndex=p,$.ssrType="legend"}),v&&V.eachChild(function(K){L.packEventData(K,a,D,p,g)}),c.set(g,!0)}},this)},this),o&&this._createSelector(o,a,i,l,s)},e.prototype.packEventData=function(t,a,n,i,o){var l={componentType:"legend",componentIndex:a.componentIndex,dataIndex:i,value:o,seriesIndex:n.seriesIndex};me(t).eventData=l},e.prototype._createSelector=function(t,a,n,i,o){var l=this.getSelectorGroup();Yn(t,function(u){var c=u.type,h=new Ct({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect",legendId:a.id})}});l.add(h);var v=a.getModel("selectorLabel"),f=a.getModel(["emphasis","selectorLabel"]);Qt(h,{normal:v,emphasis:f},{defaultText:u.title}),eo(h)})},e.prototype._createItem=function(t,a,n,i,o,l,s,u,c,h,v){var f=t.visualDrawType,d=o.get("itemWidth"),p=o.get("itemHeight"),y=o.isSelected(a),g=i.get("symbolRotate"),m=i.get("symbolKeepAspect"),_=i.get("icon");c=_||c||"roundRect";var b=Jg(c,i,s,u,f,y,v),k=new ta,x=i.getModel("textStyle");if(_e(t.getLegendIcon)&&(!_||_==="inherit"))k.add(t.getLegendIcon({itemWidth:d,itemHeight:p,icon:c,iconRotate:g,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:m}));else{var S=_==="inherit"&&t.getData().getVisual("symbol")?g==="inherit"?t.getData().getVisual("symbolRotate"):g:0;k.add(em({itemWidth:d,itemHeight:p,icon:c,iconRotate:S,itemStyle:b.itemStyle,symbolKeepAspect:m}))}var T=l==="left"?d+5:-5,D=l,L=o.get("formatter"),A=a;ve(L)&&L?A=L.replace("{name}",a??""):_e(L)&&(A=L(a));var I=y?x.getTextColor():i.get("inactiveColor");k.add(new Ct({style:$a(x,{text:A,x:T,y:p/2,fill:I,align:D,verticalAlign:"middle"},{inheritColor:I})}));var C=new qe({shape:k.getBoundingRect(),style:{fill:"transparent"}}),O=i.getModel("tooltip");return O.get("show")&&si({el:C,componentModel:o,itemName:a,itemTooltipOption:O.option}),k.add(C),k.eachChild(function(N){N.silent=!0}),C.silent=!h,this.getContentGroup().add(k),eo(k),k.__legendDataIndex=n,k},e.prototype.layoutInner=function(t,a,n,i,o,l){var s=this.getContentGroup(),u=this.getSelectorGroup();yr(t.get("orient"),s,t.get("itemGap"),n.width,n.height);var c=s.getBoundingRect(),h=[-c.x,-c.y];if(u.markRedraw(),s.markRedraw(),o){yr("horizontal",u,t.get("selectorItemGap",!0));var v=u.getBoundingRect(),f=[-v.x,-v.y],d=t.get("selectorButtonGap",!0),p=t.getOrient().index,y=p===0?"width":"height",g=p===0?"height":"width",m=p===0?"y":"x";l==="end"?f[p]+=c[y]+d:h[p]+=v[y]+d,f[1-p]+=c[g]/2-v[g]/2,u.x=f[0],u.y=f[1],s.x=h[0],s.y=h[1];var _={x:0,y:0};return _[y]=c[y]+d+v[y],_[g]=Math.max(c[g],v[g]),_[m]=Math.min(0,v[m]+f[1-p]),_}else return s.x=h[0],s.y=h[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e})(At);function Jg(r,e,t,a,n,i,o){function l(y,g){y.lineWidth==="auto"&&(y.lineWidth=g.lineWidth>0?2:0),Yn(y,function(m,_){y[_]==="inherit"&&(y[_]=g[_])})}var s=e.getModel("itemStyle"),u=s.getItemStyle(),c=r.lastIndexOf("empty",0)===0?"fill":"stroke",h=s.getShallow("decal");u.decal=!h||h==="inherit"?a.decal:Hh(h,o),u.fill==="inherit"&&(u.fill=a[n]),u.stroke==="inherit"&&(u.stroke=a[c]),u.opacity==="inherit"&&(u.opacity=(n==="fill"?a:t).opacity),l(u,a);var v=e.getModel("lineStyle"),f=v.getLineStyle();if(l(f,t),u.fill==="auto"&&(u.fill=a.fill),u.stroke==="auto"&&(u.stroke=a.fill),f.stroke==="auto"&&(f.stroke=a.fill),!i){var d=e.get("inactiveBorderWidth"),p=u[c];u.lineWidth=d==="auto"?a.lineWidth>0&&p?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),f.stroke=v.get("inactiveColor"),f.lineWidth=v.get("inactiveWidth")}return{itemStyle:u,lineStyle:f}}function em(r){var e=r.icon||"roundRect",t=Bt(e,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill,r.symbolKeepAspect);return t.setStyle(r.itemStyle),t.rotation=(r.iconRotate||0)*Math.PI/180,t.setOrigin([r.itemWidth/2,r.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill=Q.color.neutral00,t.style.lineWidth=2),t}function ks(r,e,t,a){Kn(r,e,t,a),t.dispatchAction({type:"legendToggleSelect",name:r??e}),qn(r,e,t,a)}function Pu(r){for(var e=r.getZr().storage.getDisplayList(),t,a=0,n=e.length;a<n&&!(t=e[a].states.emphasis);)a++;return t&&t.hoverLayer}function qn(r,e,t,a){Pu(t)||t.dispatchAction({type:"highlight",seriesName:r,name:e,excludeSeriesId:a})}function Kn(r,e,t,a){Pu(t)||t.dispatchAction({type:"downplay",seriesName:r,name:e,excludeSeriesId:a})}function tm(r){var e=r.findComponents({mainType:"legend"});e&&e.length&&r.filterSeries(function(t){for(var a=0;a<e.length;a++)if(!e[a].isSelected(t.name))return!1;return!0})}function vr(r,e,t){var a=r==="allSelect"||r==="inverseSelect",n={},i=[];t.eachComponent({mainType:"legend",query:e},function(l){a?l[r]():l[r](e.name),As(l,n),i.push(l.componentIndex)});var o={};return t.eachComponent("legend",function(l){M(n,function(s,u){l[s?"select":"unSelect"](u)}),As(l,o)}),a?{selected:o,legendIndex:i}:{name:e.name,selected:o}}function As(r,e){var t=e||{};return M(r.getData(),function(a){var n=a.get("name");if(!(n===`
`||n==="")){var i=r.isSelected(n);Fh(t,n)?t[n]=t[n]&&i:t[n]=i}}),t}function rm(r){r.registerAction("legendToggleSelect","legendselectchanged",fe(vr,"toggleSelected")),r.registerAction("legendAllSelect","legendselectall",fe(vr,"allSelect")),r.registerAction("legendInverseSelect","legendinverseselect",fe(vr,"inverseSelect")),r.registerAction("legendSelect","legendselected",fe(vr,"select")),r.registerAction("legendUnSelect","legendunselected",fe(vr,"unSelect"))}function Eu(r){r.registerComponentModel(Xn),r.registerComponentView(Mu),r.registerProcessor(r.PRIORITY.PROCESSOR.SERIES_FILTER,tm),r.registerSubTypeDefaulter("legend",function(){return"plain"}),rm(r)}var am=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,a,n){var i=ii(t);r.prototype.init.call(this,t,a,n),Cs(this,t,i)},e.prototype.mergeOption=function(t,a){r.prototype.mergeOption.call(this,t,a),Cs(this,this.option,t)},e.type="legend.scroll",e.defaultOption=Ks(Xn.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:Q.color.accent50,pageIconInactiveColor:Q.color.accent10,pageIconSize:15,pageTextStyle:{color:Q.color.tertiary},animationDurationUpdate:800}),e})(Xn);function Cs(r,e,t){var a=r.getOrient(),n=[1,1];n[a.index]=0,va(e,t,{type:"box",ignoreSize:!!n})}var Ds=Ae,bn=["width","height"],xn=["x","y"],nm=(function(r){X(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){r.prototype.init.call(this),this.group.add(this._containerGroup=new Ds),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Ds)},e.prototype.resetInner=function(){r.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,a,n,i,o,l,s){var u=this;r.prototype.renderInner.call(this,t,a,n,i,o,l,s);var c=this._controllerGroup,h=a.get("pageIconSize",!0),v=J(h)?h:[h,h];d("pagePrev",0);var f=a.getModel("pageTextStyle");c.add(new Ct({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),d("pageNext",1);function d(p,y){var g=p+"DataIndex",m=rl(a.get("pageIcons",!0)[a.getOrient().name][y],{onclick:we(u._pageGo,u,g,a,i)},{x:-v[0]/2,y:-v[1]/2,width:v[0],height:v[1]});m.name=p,c.add(m)}},e.prototype.layoutInner=function(t,a,n,i,o,l){var s=this.getSelectorGroup(),u=t.getOrient().index,c=bn[u],h=xn[u],v=bn[1-u],f=xn[1-u];o&&yr("horizontal",s,t.get("selectorItemGap",!0));var d=t.get("selectorButtonGap",!0),p=s.getBoundingRect(),y=[-p.x,-p.y],g=kt(n);o&&(g[c]=n[c]-p[c]-d);var m=this._layoutContentAndController(t,i,g,u,c,v,f,h);if(o){if(l==="end")y[u]+=m[c]+d;else{var _=p[c]+d;y[u]-=_,m[h]-=_}m[c]+=p[c]+d,y[1-u]+=m[f]+m[v]/2-p[v]/2,m[v]=Math.max(m[v],p[v]),m[f]=Math.min(m[f],p[f]+y[1-u]),s.x=y[0],s.y=y[1],s.markRedraw()}return m},e.prototype._layoutContentAndController=function(t,a,n,i,o,l,s,u){var c=this.getContentGroup(),h=this._containerGroup,v=this._controllerGroup;yr(t.get("orient"),c,t.get("itemGap"),i?n.width:null,i?null:n.height),yr("horizontal",v,t.get("pageButtonItemGap",!0));var f=c.getBoundingRect(),d=v.getBoundingRect(),p=this._showController=f[o]>n[o],y=[-f.x,-f.y];a||(y[i]=c[u]);var g=[0,0],m=[-d.x,-d.y],_=ue(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(p){var b=t.get("pageButtonPosition",!0);b==="end"?m[i]+=n[o]-d[o]:g[i]+=d[o]+_}m[1-i]+=f[l]/2-d[l]/2,c.setPosition(y),h.setPosition(g),v.setPosition(m);var k={x:0,y:0};if(k[o]=p?n[o]:f[o],k[l]=Math.max(f[l],d[l]),k[s]=Math.min(0,d[s]+m[1-i]),h.__rectSize=n[o],p){var x={x:0,y:0};x[o]=Math.max(n[o]-d[o]-_,0),x[l]=k[l],h.setClipPath(new qe({shape:x})),h.__rectSize=x[o]}else v.eachChild(function(T){T.attr({invisible:!0,silent:!0})});var S=this._getPageInfo(t);return S.pageIndex!=null&&Pe(c,{x:S.contentPosition[0],y:S.contentPosition[1]},p?t:null),this._updatePageInfoView(t,S),k},e.prototype._pageGo=function(t,a,n){var i=this._getPageInfo(a)[t];i!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:a.id})},e.prototype._updatePageInfoView=function(t,a){var n=this._controllerGroup;M(["pagePrev","pageNext"],function(c){var h=c+"DataIndex",v=a[h]!=null,f=n.childOfName(c);f&&(f.setStyle("fill",v?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),f.cursor=v?"pointer":"default")});var i=n.childOfName("pageText"),o=t.get("pageFormatter"),l=a.pageIndex,s=l!=null?l+1:0,u=a.pageCount;i&&o&&i.setStyle("text",ve(o)?o.replace("{current}",s==null?"":s+"").replace("{total}",u==null?"":u+""):o({current:s,total:u}))},e.prototype._getPageInfo=function(t){var a=t.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,o=t.getOrient().index,l=bn[o],s=xn[o],u=this._findTargetItemIndex(a),c=n.children(),h=c[u],v=c.length,f=v?1:0,d={contentPosition:[n.x,n.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return d;var p=b(h);d.contentPosition[o]=-p.s;for(var y=u+1,g=p,m=p,_=null;y<=v;++y)_=b(c[y]),(!_&&m.e>g.s+i||_&&!k(_,g.s))&&(m.i>g.i?g=m:g=_,g&&(d.pageNextDataIndex==null&&(d.pageNextDataIndex=g.i),++d.pageCount)),m=_;for(var y=u-1,g=p,m=p,_=null;y>=-1;--y)_=b(c[y]),(!_||!k(m,_.s))&&g.i<m.i&&(m=g,d.pagePrevDataIndex==null&&(d.pagePrevDataIndex=g.i),++d.pageCount,++d.pageIndex),g=_;return d;function b(x){if(x){var S=x.getBoundingRect(),T=S[s]+x[s];return{s:T,e:T+S[l],i:x.__legendDataIndex}}}function k(x,S){return x.e>=S&&x.s<=S+i}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var a,n=this.getContentGroup(),i;return n.eachChild(function(o,l){var s=o.__legendDataIndex;i==null&&s!=null&&(i=l),s===t&&(a=l)}),a??i},e.type="legend.scroll",e})(Mu);function im(r){r.registerAction("legendScroll","legendscroll",function(e,t){var a=e.scrollDataIndex;a!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(n){n.setScrollDataIndex(a)})})}function om(r){ut(Eu),r.registerComponentModel(am),r.registerComponentView(nm),im(r)}function sm(r){ut(Eu),ut(om)}const lm={class:"header"},um={class:"header-container"},cm={class:"header-top"},hm={class:"identity-section"},vm={class:"subtitle"},fm={class:"actions-section"},dm=["disabled"],pm=["disabled"],gm=["disabled"],mm={class:"header-context"},ym={class:"badge-group"},_m={class:"value"},bm={class:"badge-group"},xm={class:"value"},Sm={class:"badge-group"},wm={class:"badge-group"},km={key:0,class:"badge-separator"},Am={key:1,class:"badge-group full-width"},Cm={class:"theme-badge",title:"AI Generated Theme"},Dm={class:"header-metrics"},Lm={class:"metric-column"},Tm={class:"metric-grid"},Im={class:"metric-cell"},Mm={class:"metric-value"},Pm={class:"metric-cell"},Em={class:"metric-value"},Rm={class:"metric-column"},Om={class:"metric-grid"},Nm={class:"metric-cell"},Bm={class:"metric-value"},$m={class:"metric-cell"},zm={class:"metric-value"},Gm={class:"metric-column"},Hm={class:"metric-grid"},Fm={class:"metric-cell"},Vm={class:"metric-value"},Wm={__name:"AlertHeader",props:{alertData:{type:Object,required:!0},alertId:{type:[String,Number],required:!0},newsCount:{type:Number,default:0},validStatuses:{type:Array,default:()=>["NEEDS_REVIEW","ESCALATE_L2","DISMISS"]}},emits:["update-status","toggle-agent"],setup(r,{emit:e}){const t=e,a=i=>({NEEDS_REVIEW:"status-needs-review",ESCALATE_L2:"status-escalate-l2",DISMISS:"status-dismiss",Pending:"status-needs-review",Approved:"status-escalate-l2",Rejected:"status-dismiss"})[i]||"",n=i=>{t("update-status",i)};return(i,o)=>(P(),E("header",lm,[w("div",um,[w("div",cm,[w("div",hm,[w("h1",null,G(r.alertData.ticker),1),w("span",vm,G(r.alertData.instrument_name),1)]),w("div",fm,[w("button",{class:"action-btn ask-ai-btn",onClick:o[0]||(o[0]=l=>i.$emit("toggle-agent")),title:"Open AI Assistant"},[...o[4]||(o[4]=[w("span",{class:"icon"},"",-1),xe(" Ask AI ",-1)])]),r.validStatuses.includes("ESCALATE_L2")?(P(),E("button",{key:0,class:"action-btn escalate-btn",onClick:o[1]||(o[1]=l=>n("ESCALATE_L2")),disabled:r.alertData.status==="ESCALATE_L2"},[...o[5]||(o[5]=[w("span",{class:"icon"},"!",-1),xe(" Escalate L2 ",-1)])],8,dm)):oe("",!0),r.validStatuses.includes("DISMISS")?(P(),E("button",{key:1,class:"action-btn dismiss-btn",onClick:o[2]||(o[2]=l=>n("DISMISS")),disabled:r.alertData.status==="DISMISS"},[...o[6]||(o[6]=[w("span",{class:"icon"},"",-1),xe(" Dismiss ",-1)])],8,pm)):oe("",!0),r.validStatuses.includes("NEEDS_REVIEW")?(P(),E("button",{key:2,class:"action-btn review-btn",onClick:o[3]||(o[3]=l=>n("NEEDS_REVIEW")),disabled:r.alertData.status==="NEEDS_REVIEW"},[...o[7]||(o[7]=[w("span",{class:"icon"},"",-1),xe(" Needs Review ",-1)])],8,gm)):oe("",!0)])]),w("div",mm,[w("div",ym,[o[8]||(o[8]=w("span",{class:"label"},"ID",-1)),w("span",_m,G(r.alertId),1)]),w("div",bm,[o[9]||(o[9]=w("span",{class:"label"},"ISIN",-1)),w("span",xm,G(r.alertData.isin),1)]),o[11]||(o[11]=w("div",{class:"badge-separator"},null,-1)),w("div",Sm,[w("span",{class:ye(["tag type",r.alertData.trade_type?.toLowerCase()])},G(r.alertData.trade_type),3)]),w("div",wm,[w("span",{class:ye(["status-badge",a(r.alertData.status)])},G(r.alertData.status),3)]),r.alertData.narrative_theme?(P(),E("div",km)):oe("",!0),r.alertData.narrative_theme?(P(),E("div",Am,[w("div",Cm,[o[10]||(o[10]=w("span",{class:"theme-icon"},"",-1)),xe(" "+G(r.alertData.narrative_theme),1)])])):oe("",!0)]),w("div",Dm,[w("div",Lm,[o[15]||(o[15]=w("div",{class:"metric-label"},"TIMEFRAME",-1)),w("div",Tm,[w("div",Im,[o[12]||(o[12]=w("span",{class:"sub-label"},"Alert Date",-1)),w("span",Mm,G(r.alertData.alert_date),1)]),w("div",Pm,[o[14]||(o[14]=w("span",{class:"sub-label"},"Range",-1)),w("span",Em,[xe(G(r.alertData.start_date)+" ",1),o[13]||(o[13]=w("span",{class:"arrow"},"",-1)),xe(" "+G(r.alertData.end_date),1)])])])]),w("div",Rm,[o[18]||(o[18]=w("div",{class:"metric-label"},"VOLUME",-1)),w("div",Om,[w("div",Nm,[o[16]||(o[16]=w("span",{class:"sub-label"},"Buy",-1)),w("span",Bm,G(r.alertData.buy_quantity?.toLocaleString()||"-"),1)]),w("div",$m,[o[17]||(o[17]=w("span",{class:"sub-label"},"Sell",-1)),w("span",zm,G(r.alertData.sell_quantity?.toLocaleString()||"-"),1)])])]),w("div",Gm,[o[20]||(o[20]=w("div",{class:"metric-label"},"CONTENT",-1)),w("div",Hm,[w("div",Fm,[o[19]||(o[19]=w("span",{class:"sub-label"},"Articles",-1)),w("span",Vm,G(r.newsCount),1)])])])])])]))}},Um=ct(Wm,[["__scopeId","data-v-a47d6a27"]]),Zm={class:"card chart-panel"},Xm={class:"card-header chart-header"},Ym={class:"header-controls"},qm={class:"view-toggle chart-mode-toggle"},Km={class:"view-toggle price-mode-toggle"},jm=["disabled"],Qm={class:"period-selector"},Jm=["onClick"],ey={class:"card-body chart-wrapper"},ty={key:0,class:"loading-overlay"},ry={key:1,class:"table-container"},ay={class:"data-table"},ny={key:1,class:"empty-cell"},iy={key:2,class:"loading-state"},oy={__name:"AlertChart",props:{chartLabels:{type:Array,default:()=>[]},chartOptions:{type:Object,default:()=>({})},viewMode:{type:String,default:"chart"},chartType:{type:String,default:"line"},priceMode:{type:String,default:"actual"},selectedPeriod:{type:String,default:"alert"},isLoading:{type:Boolean,default:!1},tableData:{type:Array,default:()=>[]},activeMaterialityColumns:{type:Array,default:()=>[]},config:{type:Object,default:()=>({})}},emits:["update:viewMode","update:chartType","update:priceMode","update:selectedPeriod"],setup(r,{emit:e}){const t=r,a=e,n=l=>!t.config||!t.config.materiality_colors?"#808080":t.config.materiality_colors[l]||t.config.materiality_colors.DEFAULT||"#808080",i=[{label:"Alert",value:"alert"},{label:"1M",value:"1mo"},{label:"3M",value:"3mo"},{label:"6M",value:"6mo"},{label:"1Y",value:"1y"},{label:"YTD",value:"ytd"},{label:"Max",value:"max"}],o=je(()=>t.viewMode!=="chart"||t.chartType!=="line");return(l,s)=>(P(),E("div",Zm,[w("div",Xm,[s[5]||(s[5]=w("h3",null,"Price Performance",-1)),w("div",Ym,[w("div",qm,[w("button",{class:ye({active:r.viewMode==="chart"&&r.chartType==="line"}),onClick:s[0]||(s[0]=u=>{a("update:viewMode","chart"),a("update:chartType","line")})},"Line",2),w("button",{class:ye({active:r.viewMode==="chart"&&r.chartType==="candle"}),onClick:s[1]||(s[1]=u=>{a("update:viewMode","chart"),a("update:chartType","candle"),a("update:priceMode","actual")})},"Candle",2),w("button",{class:ye({active:r.viewMode==="table"}),onClick:s[2]||(s[2]=u=>{a("update:viewMode","table"),a("update:priceMode","actual")})},"Table",2)]),w("div",Km,[w("button",{class:ye({active:r.priceMode==="actual"}),onClick:s[3]||(s[3]=u=>a("update:priceMode","actual"))},"Actual",2),w("button",{class:ye({active:r.priceMode==="rebased",disabled:o.value}),disabled:o.value,onClick:s[4]||(s[4]=u=>!o.value&&a("update:priceMode","rebased"))},"Rebased",10,jm)]),w("div",Qm,[(P(),E(de,null,Se(i,u=>w("button",{key:u.value,class:ye({active:r.selectedPeriod===u.value}),onClick:c=>a("update:selectedPeriod",u.value)},G(u.label),11,Jm)),64))])])]),w("div",ey,[r.isLoading?(P(),E("div",ty,[...s[6]||(s[6]=[w("div",{class:"spinner"},null,-1)])])):oe("",!0),r.isLoading?oe("",!0):(P(),E(de,{key:1},[r.viewMode==="chart"&&r.chartLabels.length?(P(),sa(Vh(Wh),{key:`${r.chartType}-${r.priceMode}-${r.selectedPeriod}`,class:"chart",option:r.chartOptions,autoresize:""},null,8,["option"])):r.viewMode==="table"&&r.chartLabels.length?(P(),E("div",ry,[w("table",ay,[w("thead",null,[w("tr",null,[s[7]||(s[7]=w("th",null,"Date",-1)),s[8]||(s[8]=w("th",null,"Close",-1)),s[9]||(s[9]=w("th",null,"Rebased",-1)),s[10]||(s[10]=w("th",null,"Ind. Rebased",-1)),(P(!0),E(de,null,Se(r.activeMaterialityColumns,u=>(P(),E("th",{key:u,style:qt({color:n(u)})},G(u),5))),128))])]),w("tbody",null,[(P(!0),E(de,null,Se(r.tableData,u=>(P(),E("tr",{key:u.date},[w("td",null,G(u.date),1),w("td",null,G(u.tickerClose),1),w("td",null,G(u.tickerRebased),1),w("td",null,G(u.industryRebased),1),(P(!0),E(de,null,Se(r.activeMaterialityColumns,c=>(P(),E("td",{key:c,class:"count-cell"},[u.counts[c]>0?(P(),E("span",{key:0,class:"count-badge",style:qt({backgroundColor:n(c)})},G(u.counts[c]),5)):(P(),E("span",ny,"-"))]))),128))]))),128))])])])):(P(),E("div",iy,"No price data available."))],64))])]))}},sy=ct(oy,[["__scopeId","data-v-775458de"]]),ly={class:"executive-summary-wrapper"},uy={key:0,class:"executive-summary"},cy={class:"summary-header"},hy={class:"header-left-group"},vy={class:"summary-tabs"},fy=["disabled"],dy={key:0,class:"spinner-icon"},py={key:1},gy={key:0},my={class:"summary-text"},yy={class:"events-grid"},_y={key:0,class:"event-col bullish"},by={key:1,class:"event-col bearish"},xy={key:2,class:"event-col neutral"},Sy={key:1},wy={class:"rec-icon"},ky={key:0},Ay={key:1},Cy={key:2},Dy={class:"rec-text"},Ly={class:"rec-title"},Ty={class:"reasoning-section"},Iy={key:0},My={key:1,class:"empty-reasoning"},Py={class:"summary-meta"},Ey={key:1,class:"summary-placeholder"},Ry=["disabled"],Oy={key:0,class:"spinner-sm"},Ny={key:1},By={__name:"AlertSummary",props:{alertData:{type:Object,required:!0},isGeneratingSummary:{type:Boolean,default:!1}},emits:["refresh","analyze"],setup(r,{emit:e}){const t=r,a=e,n=H("narrative"),i=u=>{if(!u)return[];if(Array.isArray(u))return u.map(c=>typeof c=="string"?c.replace(/^[-*]\s*/,""):c);try{const c=JSON.parse(u);return Array.isArray(c)?c.map(h=>typeof h=="string"?h.replace(/^[-*]\s*/,""):h):[]}catch{return[]}},o=u=>{if(!u)return{intro:[],sections:[]};const c=u.split(`
`).map(d=>d.trim()).filter(d=>d.length>0),h=[],v=[];let f=null;for(const d of c){const p=d.replace(/^[-*]\s*/,"");if(p.endsWith(":")){f={title:p.slice(0,-1),items:[]},v.push(f);continue}f?f.items.push(p):h.push(p)}return{intro:h,sections:v}},l=je(()=>{if(!t.alertData||!t.alertData.recommendation)return"";const u=t.alertData.recommendation.toUpperCase();return u.includes("DISMISS")||u.includes("REJECT")?"reject":u.includes("ESCALATE_L2")||u.includes("APPROVE")||u.includes("UNEXPLAINED")?"approve_l2":(u.includes("NEEDS_REVIEW")||u.includes("PENDING"),"needs_review")}),s=je(()=>o(t.alertData?.recommendation_reason||""));return(u,c)=>(P(),E("div",ly,[r.alertData.narrative_summary?(P(),E("div",uy,[w("div",cy,[w("div",hy,[c[4]||(c[4]=w("h4",null,[w("span",{class:"ai-icon"},"AI"),xe(" Investigation Summary")],-1)),w("div",vy,[w("button",{class:ye({active:n.value==="narrative"}),onClick:c[0]||(c[0]=h=>n.value="narrative")},"Summary",2),w("button",{class:ye({active:n.value==="recommendation"}),onClick:c[1]||(c[1]=h=>n.value="recommendation")},"Recommendation",2)])]),w("button",{class:"refresh-btn",onClick:c[2]||(c[2]=h=>a("refresh")),disabled:r.isGeneratingSummary,title:"Regenerate Summary"},[r.isGeneratingSummary?(P(),E("div",dy)):(P(),E("span",py,""))],8,fy)]),w("div",{class:ye({dimmed:r.isGeneratingSummary})},[n.value==="narrative"?(P(),E("div",gy,[w("h4",null,[c[5]||(c[5]=w("span",{class:"theme-label"},"Theme:",-1)),xe(" "+G(r.alertData.narrative_theme),1)]),w("p",my,G(r.alertData.narrative_summary),1),w("div",yy,[i(r.alertData.bullish_events).length?(P(),E("div",_y,[c[6]||(c[6]=w("h5",null,[w("span",{class:"indicator"},"+"),xe(" Bullish Factors")],-1)),w("ul",null,[(P(!0),E(de,null,Se(i(r.alertData.bullish_events),(h,v)=>(P(),E("li",{key:v},G(h),1))),128))])])):oe("",!0),i(r.alertData.bearish_events).length?(P(),E("div",by,[c[7]||(c[7]=w("h5",null,[w("span",{class:"indicator"},"-"),xe(" Bearish Factors")],-1)),w("ul",null,[(P(!0),E(de,null,Se(i(r.alertData.bearish_events),(h,v)=>(P(),E("li",{key:v},G(h),1))),128))])])):oe("",!0),i(r.alertData.neutral_events).length?(P(),E("div",xy,[c[8]||(c[8]=w("h5",null,[w("span",{class:"indicator"},"~"),xe(" Neutral / Context")],-1)),w("ul",null,[(P(!0),E(de,null,Se(i(r.alertData.neutral_events),(h,v)=>(P(),E("li",{key:v},G(h),1))),128))])])):oe("",!0)])])):oe("",!0),n.value==="recommendation"?(P(),E("div",Sy,[r.alertData.recommendation?(P(),E("div",{key:0,class:ye(["recommendation-banner",l.value])},[w("div",wy,[l.value==="reject"?(P(),E("span",ky,"")):l.value==="approve_l2"?(P(),E("span",Ay,"")):(P(),E("span",Cy,""))]),w("div",Dy,[w("div",Ly,G(r.alertData.recommendation),1)])],2)):oe("",!0),w("div",Ty,[c[9]||(c[9]=w("h5",null,"Decision Logic & Evidence:",-1)),s.value.intro.length?(P(),E("ul",Iy,[(P(!0),E(de,null,Se(s.value.intro,(h,v)=>(P(),E("li",{key:`intro-${v}`},G(h),1))),128))])):oe("",!0),(P(!0),E(de,null,Se(s.value.sections,(h,v)=>(P(),E("div",{key:`section-${v}`,class:"reason-subsection"},[w("h6",null,G(h.title),1),w("ul",null,[(P(!0),E(de,null,Se(h.items,(f,d)=>(P(),E("li",{key:`item-${v}-${d}`},G(f),1))),128))])]))),128)),r.alertData.recommendation_reason?oe("",!0):(P(),E("div",My," No detailed reasoning available. Regenerate the summary to get facts. "))])])):oe("",!0)],2),w("span",Py,"Generated: "+G(new Date(r.alertData.summary_generated_at).toLocaleString()),1)])):(P(),E("div",Ey,[w("button",{class:"generate-btn",onClick:c[3]||(c[3]=h=>a("analyze")),disabled:r.isGeneratingSummary},[r.isGeneratingSummary?(P(),E("span",Oy)):(P(),E("span",Ny,"Analyze with AI"))],8,Ry)]))]))}},$y=ct(By,[["__scopeId","data-v-3e4bec72"]]),zy={class:"card news-panel"},Gy={class:"card-header news-header"},Hy={class:"theme-selector"},Fy=["value"],Vy={class:"card-body scrollable"},Wy={key:0,class:"news-feed"},Uy={class:"news-meta"},Zy={class:"news-date"},Xy={class:"news-theme"},Yy={class:"news-title"},qy={key:0,class:"analysis-block"},Ky={class:"analysis-content"},jy={key:1,class:"news-summary"},Qy={class:"news-footer"},Jy=["onMouseenter"],e0={class:"impact-label"},t0={key:0,class:"impact-score"},r0={key:1,class:"empty-state"},a0={__name:"AlertNews",props:{news:{type:Array,default:()=>[]},themes:{type:Array,default:()=>[]},activeTheme:{type:String,default:"All"},config:{type:Object,default:()=>({})}},emits:["update:activeTheme","hover-materiality","leave-materiality"],setup(r,{emit:e}){const t=r,a=e,n=je({get:()=>t.activeTheme,set:o=>a("update:activeTheme",o)}),i=o=>!t.config||!t.config.materiality_colors?"#808080":t.config.materiality_colors[o]||t.config.materiality_colors.DEFAULT||"#808080";return(o,l)=>(P(),E("div",zy,[w("div",Gy,[l[2]||(l[2]=w("h3",null,"Relevant News",-1)),w("div",Hy,[_r(w("select",{"onUpdate:modelValue":l[0]||(l[0]=s=>n.value=s),class:"theme-dropdown"},[(P(!0),E(de,null,Se(r.themes,s=>(P(),E("option",{key:s,value:s},G(s.replace(/_/g," ")),9,Fy))),128))],512),[[In,n.value]])])]),w("div",Vy,[Uh(o.$slots,"summary",{},void 0),r.news.length>0?(P(),E("div",Wy,[(P(!0),E(de,null,Se(r.news,s=>(P(),E("div",{key:s.art_id,class:ye(["news-item",{analyzed:s.analysis}])},[w("div",Uy,[w("span",Zy,G(s.created_date),1),w("span",Xy,G(s.theme.replace(/_/g," ")),1)]),w("h4",Yy,G(s.title),1),s.analysis?(P(),E("div",qy,[l[3]||(l[3]=w("div",{class:"analysis-label"},"AI Logic:",-1)),w("p",Ky,G(s.analysis),1)])):oe("",!0),s.summary?(P(),E("div",jy,G(s.summary),1)):oe("",!0),w("div",Qy,[w("span",{class:ye(["sentiment-indicator",s.sentiment.split(":")[0].toLowerCase()])},G(s.sentiment.split(":")[0]),3),r.config&&r.config.has_materiality&&s.materiality?(P(),E(de,{key:0},[l[4]||(l[4]=w("span",{class:"separator"},"",-1)),w("span",{class:"materiality-indicator",style:qt({color:i(s.materiality)}),onMouseenter:u=>a("hover-materiality",u,s.materiality_details),onMouseleave:l[1]||(l[1]=u=>a("leave-materiality"))},G(s.materiality),45,Jy)],64)):oe("",!0),s.impact_label?(P(),E(de,{key:1},[l[5]||(l[5]=w("span",{class:"separator"},"",-1)),w("span",{class:ye(["impact-badge",s.impact_label.toLowerCase()])},[w("span",e0,G(s.impact_label),1),s.impact_score?(P(),E("span",t0,"("+G(s.impact_score.toFixed(1))+")",1)):oe("",!0)],2)],64)):oe("",!0)])],2))),128))])):(P(),E("div",r0,"No news found for this specific theme."))])]))}},n0=ct(a0,[["__scopeId","data-v-6512541d"]]),i0={key:0,class:"detail-container"},o0={class:"dashboard-grid"},s0={key:1,class:"loading-screen"},l0={class:"tip-row"},u0={class:"tip-row"},c0={class:"tip-row"},h0={__name:"AlertDetail",props:{alertId:{type:[String,Number],required:!0}},emits:["toggle-agent"],setup(r,{emit:e}){ut([Bf,nd,xp,bd,Vp,dg,Rg,sm,jg,Ug]);const t=r,a=e,n=H(null),i=H({ticker:[],industry:[],industry_name:""}),o=H([]),l=H("All"),s=H("alert"),u=H(!1),c=H(null),h=H("chart"),v=H(!1),f=H(!1),d=H(null),p=H(""),y=H(""),g=(B,R,U)=>{p.value=B,y.value=R,d.value=U,f.value=!0},m=()=>{d.value&&d.value(),f.value=!1},_=()=>{f.value=!1},b=H([]),k=H([]),x=H([]),S=H([]),T=H([]),D=H([]),L=H([]),A=H([]),I=H("line"),C=H("actual"),O=B=>!c.value||!c.value.materiality_colors?"#808080":c.value.materiality_colors[B]||c.value.materiality_colors.DEFAULT||"#808080",N=H(!1),V=H(null),K=H({x:0,y:0}),$=(B,R)=>{if(!R)return;V.value=R,N.value=!0;const U=B.target.getBoundingClientRect();let te=U.left+U.width/2-140,pe=U.top-120;te<10&&(te=10),pe<10&&(pe=U.bottom+10),K.value={x:te,y:pe}},Z=()=>{N.value=!1},Y=je(()=>{if(!b.value.length)return{};let B=[],R=null;if(n.value&&b.value.length>0){let te=n.value.start_date,pe=n.value.end_date;const ge=(ce,be)=>{if(!ce)return be[0];if(be.includes(ce))return ce;let Re=be[0],vt=1/0;const Er=new Date(ce).getTime();for(const tr of be){const Vt=Math.abs(new Date(tr).getTime()-Er);Vt<vt&&(vt=Vt,Re=tr)}return Re};te=ge(te,b.value),pe=ge(pe,b.value),R=ge(n.value.alert_date,b.value),B=[[{xAxis:te},{xAxis:pe}]]}const U=[];return I.value==="candle"?U.push({name:n.value?n.value.ticker:"Ticker",type:"candlestick",data:A.value,itemStyle:{color:"#16a34a",color0:"#dc2626",borderColor:"#16a34a",borderColor0:"#dc2626"},markArea:{silent:!0,itemStyle:{color:"rgba(250, 204, 21, 0.15)",borderColor:"#eab308",borderWidth:2,borderType:"dashed"},data:B},markLine:R?{symbol:["none","none"],silent:!0,lineStyle:{type:"dotted",color:"#ef4444",width:2},label:{show:!0,formatter:"Alert Date",position:"insideEndTop",color:"#ef4444",fontSize:10},data:[{xAxis:R}]}:void 0}):C.value==="actual"?(U.push({name:n.value?n.value.ticker:"Ticker",type:"line",data:k.value,smooth:!1,symbol:"none",lineStyle:{color:"#3b82f6",width:2},itemStyle:{color:"#3b82f6"},emphasis:{focus:"series"},markArea:{silent:!0,itemStyle:{color:"rgba(250, 204, 21, 0.15)",borderColor:"#eab308",borderWidth:2,borderType:"dashed"},data:B},markLine:R?{symbol:["none","none"],silent:!0,lineStyle:{type:"dotted",color:"#ef4444",width:2},label:{show:!0,formatter:"Alert Date",position:"insideEndTop",color:"#ef4444",fontSize:10},data:[{xAxis:R}]}:void 0}),U.push({name:`${i.value.industry_name||"Industry"}`,type:"line",data:S.value,smooth:!1,yAxisIndex:1,symbol:"none",lineStyle:{color:"#94a3b8",width:2,type:"dashed"},itemStyle:{color:"#94a3b8"},emphasis:{focus:"series"}})):(U.push({name:`${n.value?n.value.ticker:"Ticker"} (Rebased)`,type:"line",data:x.value,smooth:!1,symbol:"none",lineStyle:{color:"#3b82f6",width:2},itemStyle:{color:"#3b82f6"},emphasis:{focus:"series"},markArea:{silent:!0,itemStyle:{color:"rgba(250, 204, 21, 0.15)",borderColor:"#eab308",borderWidth:2,borderType:"dashed"},data:B},markLine:R?{symbol:["none","none"],silent:!0,lineStyle:{type:"dotted",color:"#ef4444",width:2},label:{show:!0,formatter:"Alert Date",position:"insideEndTop",color:"#ef4444",fontSize:10},data:[{xAxis:R}]}:void 0}),U.push({name:`${i.value.industry_name||"Industry"} (Rebased)`,type:"line",data:T.value,smooth:!1,symbol:"none",lineStyle:{color:"#94a3b8",width:2,type:"dashed"},itemStyle:{color:"#94a3b8"},emphasis:{focus:"series"}})),I.value!=="candle"&&C.value==="actual"&&L.value.length>0&&U.push({name:"News Events",type:"scatter",data:L.value,symbolSize:16,itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{focus:"series"}}),{animation:!0,animationDuration:300,grid:{left:"3%",right:"6%",bottom:"3%",top:"60px",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}},backgroundColor:"rgba(50, 50, 50, 0.9)",borderColor:"#333",borderWidth:1,textStyle:{color:"#fff",fontSize:12},formatter:function(te){if(!te||te.length===0)return"";const pe=te[0].axisValue;let ge=`<div style="font-weight: 600; margin-bottom: 8px; border-bottom: 1px solid #555; padding-bottom: 4px;">${pe}</div>`;if(te.forEach(ce=>{if(ce.seriesType==="line"&&ce.value!==null&&ce.value!==void 0){const be=ce.color,vt=ce.seriesName.includes("Index")?"border-top: 2px dashed":"border-top: 2px solid";ge+=`<div style="display: flex; align-items: center; gap: 8px; margin: 4px 0;">
                            <span style="width: 20px; ${vt} ${be};"></span>
                            <span>${ce.seriesName}:</span>
                            <span style="font-weight: 600; margin-left: auto;">${Number(ce.value).toFixed(2)}</span>
                        </div>`}if(ce.seriesType==="line"&&ce.seriesName.includes(n.value?.ticker)){const be=b.value.indexOf(pe);if(be>=0&&D.value[be]){const Re=D.value[be],vt=Re>=1e6?(Re/1e6).toFixed(2)+"M":Re>=1e3?(Re/1e3).toFixed(1)+"K":Re;ge+=`<div style="display: flex; align-items: center; gap: 8px; margin: 4px 0; color: #aaa;">
                                <span style="width: 20px; height: 10px; background: rgba(156, 163, 175, 0.6);"></span>
                                <span>Volume:</span>
                                <span style="font-weight: 600; margin-left: auto;">${vt}</span>
                            </div>`}}}),c.value&&c.value.has_materiality){const ce=L.value.filter(be=>be.value[0]===pe);ce.length>0&&(ge+='<div style="margin-top: 8px; border-top: 1px solid #555; padding-top: 8px; font-weight: 600;">News Events</div>',ce.forEach(be=>{const Re=be.itemStyle.color;ge+=`<div style="display: flex; align-items: center; gap: 8px; margin: 4px 0;">
                                <span style="width: 10px; height: 10px; border-radius: 50%; background: ${Re}; border: 1px solid #fff;"></span>
                                <span>${be.materiality}:</span>
                                <span style="font-weight: 600; margin-left: auto;">${be.count} article${be.count>1?"s":""}</span>
                            </div>`}))}return ge}},legend:{show:!0,top:10,right:10,textStyle:{fontSize:11},itemWidth:20,itemHeight:10},xAxis:{type:"category",data:b.value,axisLine:{lineStyle:{color:"#ccc"}},axisTick:{show:!1},axisLabel:{color:"#666",fontSize:11,interval:"auto",rotate:0},splitLine:{show:!1}},yAxis:[{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#666",fontSize:11},splitLine:{lineStyle:{color:"#f0f0f0"}},scale:!0},...I.value!=="candle"&&C.value==="actual"?[{type:"value",name:i.value.industry_name||"Industry",position:"right",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#94a3b8",fontSize:10},splitLine:{show:!1},scale:!0}]:[]],series:U}}),F=async()=>{if(t.alertId)try{const B=await vl(t.alertId);return n.value=B,B}catch(B){console.error("Error fetching alert detail:",B)}},q=async()=>{if(!(!Ee.value||Ee.value.length===0)){v.value=!0;try{const B=Ee.value.map(async R=>{try{const U=await qh(R.id);return R.theme=U.theme,U.summary&&(R.summary=U.summary),R.analysis=U.analysis,!0}catch(U){return console.error(`Failed to analyze article ${R.id}:`,U),!1}});await Promise.all(B),await j()}catch(B){console.error("Error in analysis batch:",B)}finally{v.value=!1}}},j=async()=>{v.value=!0;try{const B=await Kh(t.alertId);n.value&&(n.value.narrative_theme=B.narrative_theme,n.value.narrative_summary=B.narrative_summary,n.value.bullish_events=B.bullish_events,n.value.bearish_events=B.bearish_events,n.value.neutral_events=B.neutral_events,n.value.recommendation=B.recommendation,n.value.recommendation_reason=B.recommendation_reason,n.value.summary_generated_at=B.summary_generated_at)}catch(B){console.error("Error generating summary:",B),alert("Failed to generate summary. Please check backend logs.")}finally{v.value=!1}},le=()=>{g("Regenerate Summary","Are you sure you want to regenerate the summary? This will use AI credits.",j)},he=async B=>{try{await Yh(t.alertId,B),n.value.status=B}catch(R){console.error("Error updating status:",R)}},et=async(B,R)=>{u.value=!0;try{let U={period:R};if(R==="alert"&&n.value){const te=new Date(n.value.start_date),pe=new Date(n.value.end_date);te.setDate(te.getDate()-10),pe.setDate(pe.getDate()+10);const ge=ce=>ce.toISOString().split("T")[0];U={start_date:ge(te),end_date:ge(pe)}}i.value=await jh(B,U),ee()}catch(U){console.error("Error fetching prices:",U)}finally{u.value=!1}},W=async(B,R,U)=>{try{o.value=await Qh(B,{start_date:R,end_date:U})}catch(te){console.error("Error fetching news:",te)}},z=async()=>{try{c.value=await hl()}catch(B){console.error("Error fetching config:",B)}},ee=()=>{if(!i.value.ticker||i.value.ticker.length===0)return;const B=new Map;i.value.ticker.forEach(ie=>B.set(ie.date,ie));const R=Array.from(B.values()),U=i.value.industry,te=R.map(ie=>ie.date),pe=R.map(ie=>ie.close),ge=R.map(ie=>ie.volume||0),ce=R.map(ie=>[ie.open??ie.close,ie.close,ie.low??Math.min(ie.open||ie.close,ie.close),ie.high??Math.max(ie.open||ie.close,ie.close)]),be=new Map;R.forEach(ie=>be.set(ie.date,ie.close));const Re=R[0].close,vt=R.map(ie=>ie.close/Re*100);let Er=[],tr=[];if(U&&U.length>0){const ie=new Map(U.map(He=>[He.date,He.close])),Rr=U[0].close;Er=te.map(He=>ie.get(He)??null),tr=te.map(He=>{const Fe=ie.get(He);return Fe?Fe/Rr*100:null})}const Vt=[];if(o.value&&o.value.length>0){const ie=(Fe,Ve)=>{const We=Ve.indexOf(Fe);if(We>=0)return We;for(let Ke=Ve.length-1;Ke>=0;Ke--)if(Ve[Ke]<=Fe)return Ke;return Ve.length>0?0:-1},Rr=["HHH","HHM","HHL","HMH","HMM","HML","HLH","HLM","HLL","MHH","MHM","MHL","MMH","MMM","MML","MLH","MLM","MLL","LHH","LHM","LHL","LMH","LMM","LML","LLH","LLM","LLL"],He=new Map;o.value.forEach(Fe=>{const Ve=ie(Fe.created_date,te),We=Ve>=0?te[Ve]:null;if(!We)return;const Ke=Fe.materiality||"DEFAULT";He.has(We)||He.set(We,new Map);const rr=He.get(We);rr.set(Ke,(rr.get(Ke)||0)+1)}),He.forEach((Fe,Ve)=>{const We=be.get(Ve);if(We===void 0)return;const Ke=Array.from(Fe.entries()).sort((Mt,ar)=>{const nr=Rr.indexOf(Mt[0]),Or=Rr.indexOf(ar[0]);return(nr===-1?999:nr)-(Or===-1?999:Or)}),rr=Ke.slice(0,3),Pi=Ke.slice(3).reduce((Mt,[,ar])=>Mt+ar,0);if(rr.reverse().forEach((Mt,ar)=>{const[nr,Or]=Mt,Uu=ar*4;Vt.push({value:[Ve,We+Uu],materiality:nr,count:Or,itemStyle:{color:O(nr)}})}),Pi>0){const Mt=rr.length*4;Vt.push({value:[Ve,We+Mt],materiality:"Others",count:Pi,itemStyle:{color:O("DEFAULT")}})}})}b.value=te,k.value=pe,x.value=vt,S.value=Er,T.value=tr,D.value=ge,L.value=Vt,A.value=ce},Ce=je(()=>{if(!o.value)return["All"];const B=new Set(o.value.map(R=>R.theme));return["All",...Array.from(B)]}),Ee=je(()=>l.value==="All"?o.value:o.value.filter(B=>B.theme===l.value));pr(s,async B=>{n.value&&await et(n.value.ticker,B)}),pr(C,B=>{B==="rebased"&&(h.value="chart",I.value="line")}),pr([h,I],([B,R])=>{C.value==="rebased"&&(B!=="chart"||R!=="line")&&(C.value="actual")}),ya(async()=>{await z(),await Va()}),pr(()=>t.alertId,async B=>{B&&(n.value=null,await Va())});const ht=je(()=>{if(!i.value.ticker)return new Map;const B=new Map;return i.value.ticker.forEach(R=>{B.set(R.date,R)}),B}),er=je(()=>{if(!o.value)return[];const B=new Set(o.value.map(te=>te.materiality||"DEFAULT")),R=["HHH","HHM","HHL","HMH","HMM","HML","HLH","HLM","HLL","MHH","MHM","MHL","MMH","MMM","MML","MLH","MLM","MLL","LHH","LHM","LHL","LMH","LMM","LML","LLH","LLM","LLL"],U=Array.from(B).sort((te,pe)=>{const ge=R.indexOf(te),ce=R.indexOf(pe);return(ge===-1?999:ge)-(ce===-1?999:ce)});return U.length>3?[...U.slice(0,3),"Others"]:U}),Fa=je(()=>b.value.length?b.value.map((B,R)=>{k.value[R],S.value[R];const U=ht.value.get(B),te={};if(er.value.forEach(pe=>{te[pe]=0}),o.value){const pe=er.value.filter(ge=>ge!=="Others");o.value.forEach(ge=>{if(ge.created_date===B||ge.created_date.startsWith(B)){const ce=ge.materiality||"DEFAULT";pe.includes(ce)?te[ce]++:te.Others!==void 0&&te.Others++}})}return{date:B,tickerClose:U?.close!=null?U.close.toFixed(2):"-",tickerRebased:k.value[R]!=null?k.value[R].toFixed(2):"-",industryRebased:S.value[R]!=null?S.value[R].toFixed(2):"-",counts:te}}).reverse():[]),Va=async()=>{const B=await F();B&&(await et(B.ticker,s.value),await W(B.isin,B.start_date,B.end_date),ee())},Pr=()=>{const B=document.querySelector(".chart canvas");if(!B||typeof B.toDataURL!="function")return null;try{return B.toDataURL("image/png")}catch(R){return console.error("Failed to capture chart image:",R),null}};return ya(()=>{window.__tsPitCaptureAlertChart=Pr}),ll(()=>{window.__tsPitCaptureAlertChart===Pr&&delete window.__tsPitCaptureAlertChart}),(B,R)=>(P(),E(de,null,[n.value?(P(),E("div",i0,[_t(Um,{alertData:n.value,alertId:r.alertId,newsCount:o.value?o.value.length:0,validStatuses:c.value?.valid_statuses||[],onUpdateStatus:he,onToggleAgent:R[0]||(R[0]=U=>a("toggle-agent"))},null,8,["alertData","alertId","newsCount","validStatuses"]),w("div",o0,[_t(sy,{class:"layout-chart",chartLabels:b.value,chartOptions:Y.value,viewMode:h.value,"onUpdate:viewMode":R[1]||(R[1]=U=>h.value=U),chartType:I.value,"onUpdate:chartType":R[2]||(R[2]=U=>I.value=U),priceMode:C.value,"onUpdate:priceMode":R[3]||(R[3]=U=>C.value=U),selectedPeriod:s.value,"onUpdate:selectedPeriod":R[4]||(R[4]=U=>s.value=U),isLoading:u.value,tableData:Fa.value,activeMaterialityColumns:er.value,config:c.value},null,8,["chartLabels","chartOptions","viewMode","chartType","priceMode","selectedPeriod","isLoading","tableData","activeMaterialityColumns","config"]),_t(n0,{class:"layout-news",news:Ee.value,themes:Ce.value,activeTheme:l.value,"onUpdate:activeTheme":R[5]||(R[5]=U=>l.value=U),config:c.value,onHoverMateriality:$,onLeaveMateriality:Z},{summary:ei(()=>[_t($y,{alertData:n.value,isGeneratingSummary:v.value,onRefresh:le,onAnalyze:q},null,8,["alertData","isGeneratingSummary"])]),_:1},8,["news","themes","activeTheme","config"])])])):(P(),E("div",s0,[...R[6]||(R[6]=[w("div",{class:"spinner"},null,-1),xe(" Generating Dashboard...",-1)])])),_t(fl,{"is-open":f.value,title:p.value,message:y.value,"confirm-text":"Proceed",onConfirm:m,onCancel:_},null,8,["is-open","title","message"]),N.value&&V.value?(P(),E("div",{key:2,class:"details-tooltip",style:qt({top:K.value.y+"px",left:K.value.x+"px"})},[w("div",l0,[R[7]||(R[7]=w("strong",null,"P1 (Entity):",-1)),xe(" "+G(V.value.p1.score)+" - "+G(V.value.p1.reason),1)]),w("div",u0,[R[8]||(R[8]=w("strong",null,"P2 (Time):",-1)),xe(" "+G(V.value.p2.score)+" - "+G(V.value.p2.reason),1)]),w("div",c0,[R[9]||(R[9]=w("strong",null,"P3 (Theme):",-1)),xe(" "+G(V.value.p3.score)+" - "+G(V.value.p3.reason),1)])],4)):oe("",!0)],64))}},v0=ct(h0,[["__scopeId","data-v-7e970f60"]]),f0={class:"sidebar"},d0={class:"sidebar-header"},p0={class:"search-box"},g0={class:"filters-row"},m0=["value"],y0=["value"],_0={class:"type-toggles"},b0={class:"list-stats"},x0={class:"alert-list"},S0=["onClick"],w0={class:"card-header"},k0={class:"ticker-box"},A0={class:"ticker"},C0={class:"date"},D0={class:"card-body"},L0={class:"instrument"},T0={class:"date-range"},I0={class:"range-date"},M0={class:"range-date"},P0={class:"card-footer"},E0={class:"alert-id"},R0={class:"status-indicator"},O0={class:"status-text"},N0={__name:"AlertsSidebar",props:{alerts:{type:Array,required:!0},selectedId:{type:[String,Number],default:null},availableDates:{type:Array,default:()=>[]},validStatuses:{type:Array,default:()=>["NEEDS_REVIEW","ESCALATE_L2","DISMISS"]}},emits:["select","filter-date","filter-search","filter-status","filter-type"],setup(r,{emit:e}){const t=e,a=H(""),n=H(""),i=H(""),o=H(""),l=y=>!y||typeof y!="object"?y:y.id??y.alert_id??y.alertId??y["Alert ID"]??null,s=y=>{const g=l(y);t("select",{id:g,alert:y})},u=()=>t("filter-search",a.value),c=()=>t("filter-status",n.value),h=y=>{i.value=i.value===y?"":y,t("filter-type",i.value)},v=()=>t("filter-date",o.value),f={NEEDS_REVIEW:"status-dot-warning",ESCALATE_L2:"status-dot-danger",DISMISS:"status-dot-success",Pending:"status-dot-warning",Approved:"status-dot-danger",Rejected:"status-dot-success"},d=y=>f[y]||"status-dot-warning",p=y=>y?.toLowerCase()==="buy"?"badge-buy":"badge-sell";return(y,g)=>(P(),E("div",f0,[w("div",d0,[w("div",p0,[_r(w("input",{"onUpdate:modelValue":g[0]||(g[0]=m=>a.value=m),onInput:u,type:"text",placeholder:"Search Ticker...",class:"input-search"},null,544),[[ul,a.value]])]),w("div",g0,[_r(w("select",{"onUpdate:modelValue":g[1]||(g[1]=m=>o.value=m),onChange:v,class:"select-sm"},[g[5]||(g[5]=w("option",{value:""},"All Dates",-1)),(P(!0),E(de,null,Se(r.availableDates,m=>(P(),E("option",{key:m,value:m},G(m),9,m0))),128))],544),[[In,o.value]]),_r(w("select",{"onUpdate:modelValue":g[2]||(g[2]=m=>n.value=m),onChange:c,class:"select-sm"},[g[6]||(g[6]=w("option",{value:""},"All Status",-1)),(P(!0),E(de,null,Se(r.validStatuses,m=>(P(),E("option",{key:m,value:m},G(m),9,y0))),128))],544),[[In,n.value]])]),w("div",_0,[w("button",{class:ye(["type-btn",{active:i.value==="Buy"}]),onClick:g[3]||(g[3]=m=>h("Buy"))},"Buy",2),w("button",{class:ye(["type-btn",{active:i.value==="Sell"}]),onClick:g[4]||(g[4]=m=>h("Sell"))},"Sell",2)]),w("div",b0,[w("span",null,G(r.alerts.length)+" Alerts",1)])]),w("div",x0,[(P(!0),E(de,null,Se(r.alerts,m=>(P(),E("div",{key:l(m)??`${m.ticker}-${m.execution_date}`,class:ye(["alert-card",{active:r.selectedId===l(m)}]),onClick:_=>s(m)},[w("div",w0,[w("div",k0,[w("span",A0,G(m.ticker),1),w("span",{class:ye(["type-badge",p(m.trade_type)])},G(m.trade_type),3)]),w("span",C0,G(m.execution_date),1)]),w("div",D0,[w("span",L0,G(m.instrument_name),1),w("div",T0,[w("span",I0,"Start: "+G(m.start_date||"-"),1),w("span",M0,"End: "+G(m.end_date||"-"),1)])]),w("div",P0,[w("span",E0,"Alert ID: #"+G(l(m)??"-"),1),w("div",R0,[w("span",{class:ye(["status-dot",d(m.status)])},null,2),w("span",O0,G(m.status),1)])])],10,S0))),128))])]))}},B0=ct(N0,[["__scopeId","data-v-21c4ca97"]]);function wi(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Ft=wi();function Ru(r){Ft=r}var xr={exec:()=>null};function ne(r,e=""){let t=typeof r=="string"?r:r.source,a={replace:(n,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Te.caret,"$1"),t=t.replace(n,o),a},getRegex:()=>new RegExp(t,e)};return a}var $0=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Te={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},z0=/^(?:[ \t]*(?:\n|$))+/,G0=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,H0=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Mr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,F0=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ki=/(?:[*+-]|\d{1,9}[.)])/,Ou=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Nu=ne(Ou).replace(/bull/g,ki).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),V0=ne(Ou).replace(/bull/g,ki).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Ai=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,W0=/^[^\n]+/,Ci=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,U0=ne(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Ci).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Z0=ne(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ki).getRegex(),Ga="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Di=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,X0=ne("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Di).replace("tag",Ga).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Bu=ne(Ai).replace("hr",Mr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ga).getRegex(),Y0=ne(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Bu).getRegex(),Li={blockquote:Y0,code:G0,def:U0,fences:H0,heading:F0,hr:Mr,html:X0,lheading:Nu,list:Z0,newline:z0,paragraph:Bu,table:xr,text:W0},Ls=ne("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Mr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ga).getRegex(),q0={...Li,lheading:V0,table:Ls,paragraph:ne(Ai).replace("hr",Mr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ls).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ga).getRegex()},K0={...Li,html:ne(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Di).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:xr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ne(Ai).replace("hr",Mr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Nu).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},j0=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Q0=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,$u=/^( {2,}|\\)\n(?!\s*$)/,J0=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ha=/[\p{P}\p{S}]/u,Ti=/[\s\p{P}\p{S}]/u,zu=/[^\s\p{P}\p{S}]/u,e_=ne(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Ti).getRegex(),Gu=/(?!~)[\p{P}\p{S}]/u,t_=/(?!~)[\s\p{P}\p{S}]/u,r_=/(?:[^\s\p{P}\p{S}]|~)/u,a_=ne(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",$0?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Hu=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,n_=ne(Hu,"u").replace(/punct/g,Ha).getRegex(),i_=ne(Hu,"u").replace(/punct/g,Gu).getRegex(),Fu="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",o_=ne(Fu,"gu").replace(/notPunctSpace/g,zu).replace(/punctSpace/g,Ti).replace(/punct/g,Ha).getRegex(),s_=ne(Fu,"gu").replace(/notPunctSpace/g,r_).replace(/punctSpace/g,t_).replace(/punct/g,Gu).getRegex(),l_=ne("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,zu).replace(/punctSpace/g,Ti).replace(/punct/g,Ha).getRegex(),u_=ne(/\\(punct)/,"gu").replace(/punct/g,Ha).getRegex(),c_=ne(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),h_=ne(Di).replace("(?:-->|$)","-->").getRegex(),v_=ne("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",h_).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ia=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,f_=ne(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Ia).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Vu=ne(/^!?\[(label)\]\[(ref)\]/).replace("label",Ia).replace("ref",Ci).getRegex(),Wu=ne(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ci).getRegex(),d_=ne("reflink|nolink(?!\\()","g").replace("reflink",Vu).replace("nolink",Wu).getRegex(),Ts=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Ii={_backpedal:xr,anyPunctuation:u_,autolink:c_,blockSkip:a_,br:$u,code:Q0,del:xr,emStrongLDelim:n_,emStrongRDelimAst:o_,emStrongRDelimUnd:l_,escape:j0,link:f_,nolink:Wu,punctuation:e_,reflink:Vu,reflinkSearch:d_,tag:v_,text:J0,url:xr},p_={...Ii,link:ne(/^!?\[(label)\]\((.*?)\)/).replace("label",Ia).getRegex(),reflink:ne(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ia).getRegex()},jn={...Ii,emStrongRDelimAst:s_,emStrongLDelim:i_,url:ne(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Ts).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:ne(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Ts).getRegex()},g_={...jn,br:ne($u).replace("{2,}","*").getRegex(),text:ne(jn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ra={normal:Li,gfm:q0,pedantic:K0},fr={normal:Ii,gfm:jn,breaks:g_,pedantic:p_},m_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Is=r=>m_[r];function rt(r,e){if(e){if(Te.escapeTest.test(r))return r.replace(Te.escapeReplace,Is)}else if(Te.escapeTestNoEncode.test(r))return r.replace(Te.escapeReplaceNoEncode,Is);return r}function Ms(r){try{r=encodeURI(r).replace(Te.percentDecode,"%")}catch{return null}return r}function Ps(r,e){let t=r.replace(Te.findPipe,(i,o,l)=>{let s=!1,u=o;for(;--u>=0&&l[u]==="\\";)s=!s;return s?"|":" |"}),a=t.split(Te.splitPipe),n=0;if(a[0].trim()||a.shift(),a.length>0&&!a.at(-1)?.trim()&&a.pop(),e)if(a.length>e)a.splice(e);else for(;a.length<e;)a.push("");for(;n<a.length;n++)a[n]=a[n].trim().replace(Te.slashPipe,"|");return a}function dr(r,e,t){let a=r.length;if(a===0)return"";let n=0;for(;n<a&&r.charAt(a-n-1)===e;)n++;return r.slice(0,a-n)}function y_(r,e){if(r.indexOf(e[1])===-1)return-1;let t=0;for(let a=0;a<r.length;a++)if(r[a]==="\\")a++;else if(r[a]===e[0])t++;else if(r[a]===e[1]&&(t--,t<0))return a;return t>0?-2:-1}function Es(r,e,t,a,n){let i=e.href,o=e.title||null,l=r[1].replace(n.other.outputLinkReplace,"$1");a.state.inLink=!0;let s={type:r[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:o,text:l,tokens:a.inlineTokens(l)};return a.state.inLink=!1,s}function __(r,e,t){let a=r.match(t.other.indentCodeCompensation);if(a===null)return e;let n=a[1];return e.split(`
`).map(i=>{let o=i.match(t.other.beginningSpace);if(o===null)return i;let[l]=o;return l.length>=n.length?i.slice(n.length):i}).join(`
`)}var Ma=class{options;rules;lexer;constructor(r){this.options=r||Ft}space(r){let e=this.rules.block.newline.exec(r);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(r){let e=this.rules.block.code.exec(r);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:dr(t,`
`)}}}fences(r){let e=this.rules.block.fences.exec(r);if(e){let t=e[0],a=__(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:a}}}heading(r){let e=this.rules.block.heading.exec(r);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let a=dr(t,"#");(this.options.pedantic||!a||this.rules.other.endingSpaceChar.test(a))&&(t=a.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(r){let e=this.rules.block.hr.exec(r);if(e)return{type:"hr",raw:dr(e[0],`
`)}}blockquote(r){let e=this.rules.block.blockquote.exec(r);if(e){let t=dr(e[0],`
`).split(`
`),a="",n="",i=[];for(;t.length>0;){let o=!1,l=[],s;for(s=0;s<t.length;s++)if(this.rules.other.blockquoteStart.test(t[s]))l.push(t[s]),o=!0;else if(!o)l.push(t[s]);else break;t=t.slice(s);let u=l.join(`
`),c=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");a=a?`${a}
${u}`:u,n=n?`${n}
${c}`:c;let h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,i,!0),this.lexer.state.top=h,t.length===0)break;let v=i.at(-1);if(v?.type==="code")break;if(v?.type==="blockquote"){let f=v,d=f.raw+`
`+t.join(`
`),p=this.blockquote(d);i[i.length-1]=p,a=a.substring(0,a.length-f.raw.length)+p.raw,n=n.substring(0,n.length-f.text.length)+p.text;break}else if(v?.type==="list"){let f=v,d=f.raw+`
`+t.join(`
`),p=this.list(d);i[i.length-1]=p,a=a.substring(0,a.length-v.raw.length)+p.raw,n=n.substring(0,n.length-f.raw.length)+p.raw,t=d.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:a,tokens:i,text:n}}}list(r){let e=this.rules.block.list.exec(r);if(e){let t=e[1].trim(),a=t.length>1,n={type:"list",raw:"",ordered:a,start:a?+t.slice(0,-1):"",loose:!1,items:[]};t=a?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=a?t:"[*+-]");let i=this.rules.other.listItemRegex(t),o=!1;for(;r;){let s=!1,u="",c="";if(!(e=i.exec(r))||this.rules.block.hr.test(r))break;u=e[0],r=r.substring(u.length);let h=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,p=>" ".repeat(3*p.length)),v=r.split(`
`,1)[0],f=!h.trim(),d=0;if(this.options.pedantic?(d=2,c=h.trimStart()):f?d=e[1].length+1:(d=e[2].search(this.rules.other.nonSpaceChar),d=d>4?1:d,c=h.slice(d),d+=e[1].length),f&&this.rules.other.blankLine.test(v)&&(u+=v+`
`,r=r.substring(v.length+1),s=!0),!s){let p=this.rules.other.nextBulletRegex(d),y=this.rules.other.hrRegex(d),g=this.rules.other.fencesBeginRegex(d),m=this.rules.other.headingBeginRegex(d),_=this.rules.other.htmlBeginRegex(d);for(;r;){let b=r.split(`
`,1)[0],k;if(v=b,this.options.pedantic?(v=v.replace(this.rules.other.listReplaceNesting,"  "),k=v):k=v.replace(this.rules.other.tabCharGlobal,"    "),g.test(v)||m.test(v)||_.test(v)||p.test(v)||y.test(v))break;if(k.search(this.rules.other.nonSpaceChar)>=d||!v.trim())c+=`
`+k.slice(d);else{if(f||h.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||g.test(h)||m.test(h)||y.test(h))break;c+=`
`+v}!f&&!v.trim()&&(f=!0),u+=b+`
`,r=r.substring(b.length+1),h=k.slice(d)}}n.loose||(o?n.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(o=!0)),n.items.push({type:"list_item",raw:u,task:!!this.options.gfm&&this.rules.other.listIsTask.test(c),loose:!1,text:c,tokens:[]}),n.raw+=u}let l=n.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let s of n.items){if(this.lexer.state.top=!1,s.tokens=this.lexer.blockTokens(s.text,[]),s.task){if(s.text=s.text.replace(this.rules.other.listReplaceTask,""),s.tokens[0]?.type==="text"||s.tokens[0]?.type==="paragraph"){s.tokens[0].raw=s.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),s.tokens[0].text=s.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let c=this.lexer.inlineQueue.length-1;c>=0;c--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[c].src)){this.lexer.inlineQueue[c].src=this.lexer.inlineQueue[c].src.replace(this.rules.other.listReplaceTask,"");break}}let u=this.rules.other.listTaskCheckbox.exec(s.raw);if(u){let c={type:"checkbox",raw:u[0]+" ",checked:u[0]!=="[ ]"};s.checked=c.checked,n.loose?s.tokens[0]&&["paragraph","text"].includes(s.tokens[0].type)&&"tokens"in s.tokens[0]&&s.tokens[0].tokens?(s.tokens[0].raw=c.raw+s.tokens[0].raw,s.tokens[0].text=c.raw+s.tokens[0].text,s.tokens[0].tokens.unshift(c)):s.tokens.unshift({type:"paragraph",raw:c.raw,text:c.raw,tokens:[c]}):s.tokens.unshift(c)}}if(!n.loose){let u=s.tokens.filter(h=>h.type==="space"),c=u.length>0&&u.some(h=>this.rules.other.anyLine.test(h.raw));n.loose=c}}if(n.loose)for(let s of n.items){s.loose=!0;for(let u of s.tokens)u.type==="text"&&(u.type="paragraph")}return n}}html(r){let e=this.rules.block.html.exec(r);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(r){let e=this.rules.block.def.exec(r);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),a=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:a,title:n}}}table(r){let e=this.rules.block.table.exec(r);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=Ps(e[1]),a=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===a.length){for(let o of a)this.rules.other.tableAlignRight.test(o)?i.align.push("right"):this.rules.other.tableAlignCenter.test(o)?i.align.push("center"):this.rules.other.tableAlignLeft.test(o)?i.align.push("left"):i.align.push(null);for(let o=0;o<t.length;o++)i.header.push({text:t[o],tokens:this.lexer.inline(t[o]),header:!0,align:i.align[o]});for(let o of n)i.rows.push(Ps(o,i.header.length).map((l,s)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[s]})));return i}}lheading(r){let e=this.rules.block.lheading.exec(r);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(r){let e=this.rules.block.paragraph.exec(r);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(r){let e=this.rules.block.text.exec(r);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(r){let e=this.rules.inline.escape.exec(r);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(r){let e=this.rules.inline.tag.exec(r);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(r){let e=this.rules.inline.link.exec(r);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let i=dr(t.slice(0,-1),"\\");if((t.length-i.length)%2===0)return}else{let i=y_(e[2],"()");if(i===-2)return;if(i>-1){let o=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let a=e[2],n="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(a);i&&(a=i[1],n=i[3])}else n=e[3]?e[3].slice(1,-1):"";return a=a.trim(),this.rules.other.startAngleBracket.test(a)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?a=a.slice(1):a=a.slice(1,-1)),Es(e,{href:a&&a.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(r,e){let t;if((t=this.rules.inline.reflink.exec(r))||(t=this.rules.inline.nolink.exec(r))){let a=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=e[a.toLowerCase()];if(!n){let i=t[0].charAt(0);return{type:"text",raw:i,text:i}}return Es(t,n,t[0],this.lexer,this.rules)}}emStrong(r,e,t=""){let a=this.rules.inline.emStrongLDelim.exec(r);if(!(!a||a[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(a[1]||a[2])||!t||this.rules.inline.punctuation.exec(t))){let n=[...a[0]].length-1,i,o,l=n,s=0,u=a[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*r.length+n);(a=u.exec(e))!=null;){if(i=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!i)continue;if(o=[...i].length,a[3]||a[4]){l+=o;continue}else if((a[5]||a[6])&&n%3&&!((n+o)%3)){s+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+s);let c=[...a[0]][0].length,h=r.slice(0,n+a.index+c+o);if(Math.min(n,o)%2){let f=h.slice(1,-1);return{type:"em",raw:h,text:f,tokens:this.lexer.inlineTokens(f)}}let v=h.slice(2,-2);return{type:"strong",raw:h,text:v,tokens:this.lexer.inlineTokens(v)}}}}codespan(r){let e=this.rules.inline.code.exec(r);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),a=this.rules.other.nonSpaceChar.test(t),n=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return a&&n&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(r){let e=this.rules.inline.br.exec(r);if(e)return{type:"br",raw:e[0]}}del(r){let e=this.rules.inline.del.exec(r);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(r){let e=this.rules.inline.autolink.exec(r);if(e){let t,a;return e[2]==="@"?(t=e[1],a="mailto:"+t):(t=e[1],a=t),{type:"link",raw:e[0],text:t,href:a,tokens:[{type:"text",raw:t,text:t}]}}}url(r){let e;if(e=this.rules.inline.url.exec(r)){let t,a;if(e[2]==="@")t=e[0],a="mailto:"+t;else{let n;do n=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(n!==e[0]);t=e[0],e[1]==="www."?a="http://"+e[0]:a=e[0]}return{type:"link",raw:e[0],text:t,href:a,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(r){let e=this.rules.inline.text.exec(r);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},Ue=class Qn{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ft,this.options.tokenizer=this.options.tokenizer||new Ma,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Te,block:ra.normal,inline:fr.normal};this.options.pedantic?(t.block=ra.pedantic,t.inline=fr.pedantic):this.options.gfm&&(t.block=ra.gfm,this.options.breaks?t.inline=fr.breaks:t.inline=fr.gfm),this.tokenizer.rules=t}static get rules(){return{block:ra,inline:fr}}static lex(e,t){return new Qn(t).lex(e)}static lexInline(e,t){return new Qn(t).inlineTokens(e)}lex(e){e=e.replace(Te.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let a=this.inlineQueue[t];this.inlineTokens(a.src,a.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],a=!1){for(this.options.pedantic&&(e=e.replace(Te.tabCharGlobal,"    ").replace(Te.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some(o=>(n=o.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let o=t.at(-1);n.raw.length===1&&o!==void 0?o.raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.text,this.inlineQueue.at(-1).src=o.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title},t.push(n));continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}let i=e;if(this.options.extensions?.startBlock){let o=1/0,l=e.slice(1),s;this.options.extensions.startBlock.forEach(u=>{s=u.call({lexer:this},l),typeof s=="number"&&s>=0&&(o=Math.min(o,s))}),o<1/0&&o>=0&&(i=e.substring(0,o+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i))){let o=t.at(-1);a&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(n),a=i.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let o=t.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(n);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let a=e,n=null;if(this.tokens.links){let s=Object.keys(this.tokens.links);if(s.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)s.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,n.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(n=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)i=n[2]?n[2].length:0,a=a.slice(0,n.index+i)+"["+"a".repeat(n[0].length-i-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);a=this.options.hooks?.emStrongMask?.call({lexer:this},a)??a;let o=!1,l="";for(;e;){o||(l=""),o=!1;let s;if(this.options.extensions?.inline?.some(c=>(s=c.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))continue;if(s=this.tokenizer.escape(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.tag(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.link(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(s.raw.length);let c=t.at(-1);s.type==="text"&&c?.type==="text"?(c.raw+=s.raw,c.text+=s.text):t.push(s);continue}if(s=this.tokenizer.emStrong(e,a,l)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.codespan(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.br(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.del(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.autolink(e)){e=e.substring(s.raw.length),t.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(e))){e=e.substring(s.raw.length),t.push(s);continue}let u=e;if(this.options.extensions?.startInline){let c=1/0,h=e.slice(1),v;this.options.extensions.startInline.forEach(f=>{v=f.call({lexer:this},h),typeof v=="number"&&v>=0&&(c=Math.min(c,v))}),c<1/0&&c>=0&&(u=e.substring(0,c+1))}if(s=this.tokenizer.inlineText(u)){e=e.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(l=s.raw.slice(-1)),o=!0;let c=t.at(-1);c?.type==="text"?(c.raw+=s.raw,c.text+=s.text):t.push(s);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return t}},Pa=class{options;parser;constructor(r){this.options=r||Ft}space(r){return""}code({text:r,lang:e,escaped:t}){let a=(e||"").match(Te.notSpaceStart)?.[0],n=r.replace(Te.endingNewline,"")+`
`;return a?'<pre><code class="language-'+rt(a)+'">'+(t?n:rt(n,!0))+`</code></pre>
`:"<pre><code>"+(t?n:rt(n,!0))+`</code></pre>
`}blockquote({tokens:r}){return`<blockquote>
${this.parser.parse(r)}</blockquote>
`}html({text:r}){return r}def(r){return""}heading({tokens:r,depth:e}){return`<h${e}>${this.parser.parseInline(r)}</h${e}>
`}hr(r){return`<hr>
`}list(r){let e=r.ordered,t=r.start,a="";for(let o=0;o<r.items.length;o++){let l=r.items[o];a+=this.listitem(l)}let n=e?"ol":"ul",i=e&&t!==1?' start="'+t+'"':"";return"<"+n+i+`>
`+a+"</"+n+`>
`}listitem(r){return`<li>${this.parser.parse(r.tokens)}</li>
`}checkbox({checked:r}){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:r}){return`<p>${this.parser.parseInline(r)}</p>
`}table(r){let e="",t="";for(let n=0;n<r.header.length;n++)t+=this.tablecell(r.header[n]);e+=this.tablerow({text:t});let a="";for(let n=0;n<r.rows.length;n++){let i=r.rows[n];t="";for(let o=0;o<i.length;o++)t+=this.tablecell(i[o]);a+=this.tablerow({text:t})}return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+a+`</table>
`}tablerow({text:r}){return`<tr>
${r}</tr>
`}tablecell(r){let e=this.parser.parseInline(r.tokens),t=r.header?"th":"td";return(r.align?`<${t} align="${r.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:r}){return`<strong>${this.parser.parseInline(r)}</strong>`}em({tokens:r}){return`<em>${this.parser.parseInline(r)}</em>`}codespan({text:r}){return`<code>${rt(r,!0)}</code>`}br(r){return"<br>"}del({tokens:r}){return`<del>${this.parser.parseInline(r)}</del>`}link({href:r,title:e,tokens:t}){let a=this.parser.parseInline(t),n=Ms(r);if(n===null)return a;r=n;let i='<a href="'+r+'"';return e&&(i+=' title="'+rt(e)+'"'),i+=">"+a+"</a>",i}image({href:r,title:e,text:t,tokens:a}){a&&(t=this.parser.parseInline(a,this.parser.textRenderer));let n=Ms(r);if(n===null)return rt(t);r=n;let i=`<img src="${r}" alt="${t}"`;return e&&(i+=` title="${rt(e)}"`),i+=">",i}text(r){return"tokens"in r&&r.tokens?this.parser.parseInline(r.tokens):"escaped"in r&&r.escaped?r.text:rt(r.text)}},Mi=class{strong({text:r}){return r}em({text:r}){return r}codespan({text:r}){return r}del({text:r}){return r}html({text:r}){return r}text({text:r}){return r}link({text:r}){return""+r}image({text:r}){return""+r}br(){return""}checkbox({raw:r}){return r}},Ze=class Jn{options;renderer;textRenderer;constructor(e){this.options=e||Ft,this.options.renderer=this.options.renderer||new Pa,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Mi}static parse(e,t){return new Jn(t).parse(e)}static parseInline(e,t){return new Jn(t).parseInline(e)}parse(e){let t="";for(let a=0;a<e.length;a++){let n=e[a];if(this.options.extensions?.renderers?.[n.type]){let o=n,l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(o.type)){t+=l||"";continue}}let i=n;switch(i.type){case"space":{t+=this.renderer.space(i);break}case"hr":{t+=this.renderer.hr(i);break}case"heading":{t+=this.renderer.heading(i);break}case"code":{t+=this.renderer.code(i);break}case"table":{t+=this.renderer.table(i);break}case"blockquote":{t+=this.renderer.blockquote(i);break}case"list":{t+=this.renderer.list(i);break}case"checkbox":{t+=this.renderer.checkbox(i);break}case"html":{t+=this.renderer.html(i);break}case"def":{t+=this.renderer.def(i);break}case"paragraph":{t+=this.renderer.paragraph(i);break}case"text":{t+=this.renderer.text(i);break}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return t}parseInline(e,t=this.renderer){let a="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions?.renderers?.[i.type]){let l=this.options.extensions.renderers[i.type].call({parser:this},i);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){a+=l||"";continue}}let o=i;switch(o.type){case"escape":{a+=t.text(o);break}case"html":{a+=t.html(o);break}case"link":{a+=t.link(o);break}case"image":{a+=t.image(o);break}case"checkbox":{a+=t.checkbox(o);break}case"strong":{a+=t.strong(o);break}case"em":{a+=t.em(o);break}case"codespan":{a+=t.codespan(o);break}case"br":{a+=t.br(o);break}case"del":{a+=t.del(o);break}case"text":{a+=t.text(o);break}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return a}},mr=class{options;block;constructor(r){this.options=r||Ft}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(r){return r}postprocess(r){return r}processAllTokens(r){return r}emStrongMask(r){return r}provideLexer(){return this.block?Ue.lex:Ue.lexInline}provideParser(){return this.block?Ze.parse:Ze.parseInline}},b_=class{defaults=wi();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Ze;Renderer=Pa;TextRenderer=Mi;Lexer=Ue;Tokenizer=Ma;Hooks=mr;constructor(...r){this.use(...r)}walkTokens(r,e){let t=[];for(let a of r)switch(t=t.concat(e.call(this,a)),a.type){case"table":{let n=a;for(let i of n.header)t=t.concat(this.walkTokens(i.tokens,e));for(let i of n.rows)for(let o of i)t=t.concat(this.walkTokens(o.tokens,e));break}case"list":{let n=a;t=t.concat(this.walkTokens(n.items,e));break}default:{let n=a;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(i=>{let o=n[i].flat(1/0);t=t.concat(this.walkTokens(o,e))}):n.tokens&&(t=t.concat(this.walkTokens(n.tokens,e)))}}return t}use(...r){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(t=>{let a={...t};if(a.async=this.defaults.async||a.async||!1,t.extensions&&(t.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let i=e.renderers[n.name];i?e.renderers[n.name]=function(...o){let l=n.renderer.apply(this,o);return l===!1&&(l=i.apply(this,o)),l}:e.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[n.level];i?i.unshift(n.tokenizer):e[n.level]=[n.tokenizer],n.start&&(n.level==="block"?e.startBlock?e.startBlock.push(n.start):e.startBlock=[n.start]:n.level==="inline"&&(e.startInline?e.startInline.push(n.start):e.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(e.childTokens[n.name]=n.childTokens)}),a.extensions=e),t.renderer){let n=this.defaults.renderer||new Pa(this.defaults);for(let i in t.renderer){if(!(i in n))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let o=i,l=t.renderer[o],s=n[o];n[o]=(...u)=>{let c=l.apply(n,u);return c===!1&&(c=s.apply(n,u)),c||""}}a.renderer=n}if(t.tokenizer){let n=this.defaults.tokenizer||new Ma(this.defaults);for(let i in t.tokenizer){if(!(i in n))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let o=i,l=t.tokenizer[o],s=n[o];n[o]=(...u)=>{let c=l.apply(n,u);return c===!1&&(c=s.apply(n,u)),c}}a.tokenizer=n}if(t.hooks){let n=this.defaults.hooks||new mr;for(let i in t.hooks){if(!(i in n))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let o=i,l=t.hooks[o],s=n[o];mr.passThroughHooks.has(i)?n[o]=u=>{if(this.defaults.async&&mr.passThroughHooksRespectAsync.has(i))return(async()=>{let h=await l.call(n,u);return s.call(n,h)})();let c=l.call(n,u);return s.call(n,c)}:n[o]=(...u)=>{if(this.defaults.async)return(async()=>{let h=await l.apply(n,u);return h===!1&&(h=await s.apply(n,u)),h})();let c=l.apply(n,u);return c===!1&&(c=s.apply(n,u)),c}}a.hooks=n}if(t.walkTokens){let n=this.defaults.walkTokens,i=t.walkTokens;a.walkTokens=function(o){let l=[];return l.push(i.call(this,o)),n&&(l=l.concat(n.call(this,o))),l}}this.defaults={...this.defaults,...a}}),this}setOptions(r){return this.defaults={...this.defaults,...r},this}lexer(r,e){return Ue.lex(r,e??this.defaults)}parser(r,e){return Ze.parse(r,e??this.defaults)}parseMarkdown(r){return(e,t)=>{let a={...t},n={...this.defaults,...a},i=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&a.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(n.hooks&&(n.hooks.options=n,n.hooks.block=r),n.async)return(async()=>{let o=n.hooks?await n.hooks.preprocess(e):e,l=await(n.hooks?await n.hooks.provideLexer():r?Ue.lex:Ue.lexInline)(o,n),s=n.hooks?await n.hooks.processAllTokens(l):l;n.walkTokens&&await Promise.all(this.walkTokens(s,n.walkTokens));let u=await(n.hooks?await n.hooks.provideParser():r?Ze.parse:Ze.parseInline)(s,n);return n.hooks?await n.hooks.postprocess(u):u})().catch(i);try{n.hooks&&(e=n.hooks.preprocess(e));let o=(n.hooks?n.hooks.provideLexer():r?Ue.lex:Ue.lexInline)(e,n);n.hooks&&(o=n.hooks.processAllTokens(o)),n.walkTokens&&this.walkTokens(o,n.walkTokens);let l=(n.hooks?n.hooks.provideParser():r?Ze.parse:Ze.parseInline)(o,n);return n.hooks&&(l=n.hooks.postprocess(l)),l}catch(o){return i(o)}}}onError(r,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,r){let a="<p>An error occurred:</p><pre>"+rt(t.message+"",!0)+"</pre>";return e?Promise.resolve(a):a}if(e)return Promise.reject(t);throw t}}},Gt=new b_;function ae(r,e){return Gt.parse(r,e)}ae.options=ae.setOptions=function(r){return Gt.setOptions(r),ae.defaults=Gt.defaults,Ru(ae.defaults),ae};ae.getDefaults=wi;ae.defaults=Ft;ae.use=function(...r){return Gt.use(...r),ae.defaults=Gt.defaults,Ru(ae.defaults),ae};ae.walkTokens=function(r,e){return Gt.walkTokens(r,e)};ae.parseInline=Gt.parseInline;ae.Parser=Ze;ae.parser=Ze.parse;ae.Renderer=Pa;ae.TextRenderer=Mi;ae.Lexer=Ue;ae.lexer=Ue.lex;ae.Tokenizer=Ma;ae.Hooks=mr;ae.parse=ae;ae.options;ae.setOptions;ae.use;ae.walkTokens;ae.parseInline;Ze.parse;Ue.lex;const x_={class:"panel-header"},S_={class:"header-actions"},w_={key:0,class:"context-switch-divider"},k_={class:"divider-content"},A_={class:"date-range"},C_={key:1,class:"message-content"},D_=["innerHTML"],L_={key:1,class:"tools-container"},T_={key:0,class:"loading-container"},I_=["disabled"],M_={class:"composer-toolbar"},P_={class:"input-left-tools"},E_=["disabled"],R_={key:0,class:"artifacts-menu"},O_={key:0,class:"artifacts-empty"},N_=["onClick"],B_={class:"artifact-name"},$_={class:"artifact-meta"},z_={key:0,class:"artifacts-empty"},G_=["disabled"],H_={__name:"AgentPanel",props:{alertId:String},emits:["close"],setup(r){ae.setOptions({breaks:!0,gfm:!0});const e=new ae.Renderer;e.link=({href:W,title:z,text:ee})=>{const Ce=z?` title="${z}"`:"";return`<a href="${W}"${Ce} target="_blank" rel="noopener noreferrer">${ee}</a>`},ae.use({renderer:e});const t=W=>W?ae.parse(W):"",a=r,n=H([]),i=H(""),o=H(!1),l=H(""),s=H(null),u=H(null),c=H(null),h=H(null),v=H(400),f=H(!1),d=H(null),p=H([]),y=H(!1),g=H(!1);let m=null;const _=H(!1),b=H("This will permanently delete your conversation history from the server."),k=H("Delete Conversation History"),x=H(!0),S=H(!1),T=W=>W?`Hello! I'm your Trade Surveillance Assistant. I can see you're investigating:

**Alert ${W.id}** - ${W.ticker} (${W.instrument_name})
- **Type:** ${W.trade_type}
- **Period:** ${W.start_date} to ${W.end_date}

How can I help you analyze this alert?`:"Hello! I am your Trade Surveillance Assistant. How can I help you investigate this alert?",D=async()=>{await to(),s.value&&(s.value.scrollTop=s.value.scrollHeight)},L=async()=>{if(!l.value){p.value=[];return}y.value=!0;try{const W=await rv(l.value);p.value=W.artifacts||[]}catch(W){console.error("Failed to fetch artifacts:",W),p.value=[]}finally{y.value=!1}},A=async W=>{n.value=[];try{const z=await Jh(W);z.messages?.length&&(n.value=z.messages)}catch(z){console.error("Failed to fetch chat history:",z)}await D()},I=async W=>{if(W)try{const z=await vl(W),ee=c.value?c.value.ticker:null,Ce=z.ticker;if(c.value=z,l.value&&ee===Ce)h.value&&h.value!==W&&n.value.push({role:"context-switch",alertId:W,ticker:Ce,startDate:z.start_date,endDate:z.end_date,instrumentName:z.instrument_name});else{const Ee=`agent_session_${Ce}`;let ht=localStorage.getItem(Ee);ht||(ht=crypto.randomUUID(),localStorage.setItem(Ee,ht)),l.value=ht,await A(l.value),await L(),n.value.length||(n.value=[{role:"agent",content:T(z)}])}h.value=W,await D()}catch(z){console.error("Failed to initialize session:",z),c.value=null}},C=()=>{if(!c.value)return;const W=c.value.ticker,z=crypto.randomUUID(),ee=`agent_session_${W}`;localStorage.setItem(ee,z),l.value=z,p.value=[],n.value=[{role:"agent",content:T(c.value)}]},O=()=>{x.value=!0,k.value="Delete Conversation History",b.value="This will permanently delete your conversation history for this TICKER from the server. Continue?",_.value=!0},N=()=>{_.value=!1},V=async()=>{S.value=!0,b.value="Deleting...";try{const W=await ev(l.value);if(W.status==="error")throw new Error(W.message||"Unknown error");k.value="Success",b.value="Conversation history deleted successfully.",x.value=!1,setTimeout(()=>{_.value=!1,C()},1500)}catch(W){k.value="Error",b.value=`Failed to delete: ${W.message}`,x.value=!1,setTimeout(()=>{_.value=!1},2e3)}finally{S.value=!1}},K=async()=>{g.value=!g.value,g.value&&await L()},$=W=>{if(!W?.relative_path||!l.value)return;const z=nv(l.value,W.relative_path);window.open(z,"_blank","noopener,noreferrer")},Z=W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),j())},Y=W=>{d.value&&!d.value.contains(W.target)&&(g.value=!1)},F=async()=>{if(!a.alertId||!l.value)return;const W=window.__tsPitCaptureAlertChart;if(typeof W!="function")return;let z=null;try{z=W()}catch(ee){console.error("Chart capture function failed:",ee);return}if(!(!z||typeof z!="string"))try{await tv({session_id:l.value,alert_id:a.alertId,image_data_url:z})}catch(ee){console.error("Failed to upload chart snapshot:",ee)}},q=()=>{m&&(m.abort(),m=null),o.value=!1},j=async()=>{if(!i.value.trim()||o.value)return;const W=i.value;n.value.push({role:"user",content:W}),i.value="",o.value=!0,await D(),await F();const z=n.value.length;n.value.push({role:"agent",content:"",tools:[]}),m=new AbortController;try{const ee=c.value?{id:c.value.id,ticker:c.value.ticker,isin:c.value.isin,start_date:c.value.start_date,end_date:c.value.end_date,instrument_name:c.value.instrument_name,trade_type:c.value.trade_type,status:c.value.status}:null,Ce=await fetch(av(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:W,session_id:l.value,alert_context:ee}),signal:m.signal});if(!Ce.ok)throw new Error(Ce.statusText);const Ee=Ce.body.getReader(),ht=new TextDecoder;for(;;){const{done:er,value:Fa}=await Ee.read();if(er)break;const Pr=ht.decode(Fa).split(`

`);for(const B of Pr)if(B.startsWith("data: "))try{const R=JSON.parse(B.slice(6));if(R.type==="token")n.value[z].content+=R.content;else if(R.type==="tool_start")n.value[z].tools.push({name:R.tool,status:"running"});else if(R.type==="tool_end"){const U=n.value[z].tools.find(te=>te.name===R.tool&&te.status==="running");U&&(U.status="done")}else R.type==="artifact_created"&&(n.value[z].content+=`

Report generated. Download it from the Artifact icon next to the chat box.`,L());await D()}catch{}}}catch(ee){ee.name==="AbortError"?n.value[z].content+=`
[Stopped by user]`:n.value[z].content+=`
[Error: ${ee.message}]`}finally{o.value=!1,m=null,await D(),await to(),u.value?.focus()}},le=()=>{f.value=!0,document.addEventListener("mousemove",he),document.addEventListener("mouseup",et),document.body.style.userSelect="none"},he=W=>{if(!f.value)return;const z=window.innerWidth-W.clientX;z>=300&&z<=800&&(v.value=z)},et=()=>{f.value=!1,document.removeEventListener("mousemove",he),document.removeEventListener("mouseup",et),document.body.style.userSelect=""};return ya(async()=>{await I(a.alertId),document.addEventListener("click",Y)}),ll(()=>{document.removeEventListener("click",Y)}),pr(()=>a.alertId,async W=>{W&&await I(W)}),(W,z)=>(P(),E(de,null,[w("div",{class:"agent-panel",style:qt({width:v.value+"px"})},[w("div",{class:"resize-handle",onMousedown:le},[...z[2]||(z[2]=[w("div",{class:"handle-line"},null,-1)])],32),w("div",x_,[z[5]||(z[5]=w("h3",null,"AI Assistant",-1)),w("div",S_,[w("button",{onClick:C,class:"action-btn",title:"Clear chat (new session)"},[...z[3]||(z[3]=[w("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[w("path",{d:"M20 20H7L3 16l9-13 8 8-5 9"}),w("path",{d:"M6.5 13.5l5 5"})],-1)])]),w("button",{onClick:O,class:"action-btn delete-btn",title:"Delete history from server"},[...z[4]||(z[4]=[w("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[w("path",{d:"M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14M10 11v6M14 11v6"})],-1)])]),w("button",{onClick:z[0]||(z[0]=ee=>W.$emit("close")),class:"close-btn"},"")])]),w("div",{class:"messages-area",ref_key:"messagesContainer",ref:s},[(P(!0),E(de,null,Se(n.value,(ee,Ce)=>(P(),E("div",{key:Ce,class:ye(["message",ee.role])},[ee.role==="context-switch"?(P(),E("div",w_,[z[8]||(z[8]=w("div",{class:"divider-line"},null,-1)),w("div",k_,[z[7]||(z[7]=w("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[w("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),w("circle",{cx:"12",cy:"12",r:"3"})],-1)),w("span",null,[z[6]||(z[6]=xe("Switched to ",-1)),w("strong",null,G(ee.alertId),1)]),w("span",A_,G(ee.startDate)+"  "+G(ee.endDate),1)]),z[9]||(z[9]=w("div",{class:"divider-line"},null,-1))])):(P(),E("div",C_,[ee.content?(P(),E("div",{key:`md-${Ce}-${ee.content.length}`,class:"text markdown-content",innerHTML:t(ee.content)},null,8,D_)):oe("",!0),ee.tools&&ee.tools.length>0?(P(),E("div",L_,[(P(!0),E(de,null,Se(ee.tools,Ee=>(P(),E("div",{key:Ee.name,class:"tool-badge"},[w("span",{class:ye(["status-dot",Ee.status])},null,2),xe(" "+G(Ee.name),1)]))),128))])):oe("",!0)]))],2))),128)),o.value?(P(),E("div",T_,[...z[10]||(z[10]=[w("div",{class:"spinner"},null,-1)])])):oe("",!0)],512),w("div",{class:"composer-wrap",ref_key:"composerRef",ref:d},[_r(w("textarea",{ref_key:"inputRef",ref:u,"onUpdate:modelValue":z[1]||(z[1]=ee=>i.value=ee),onKeydown:Z,class:"composer-textarea",placeholder:"Ask about this alert...",disabled:o.value,rows:"2"},null,40,I_),[[ul,i.value]]),w("div",M_,[w("div",P_,[w("button",{class:"artifact-btn",onClick:Zh(K,["stop"]),disabled:!l.value,title:"Artifacts"},[...z[11]||(z[11]=[w("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[w("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),w("polyline",{points:"7 10 12 15 17 10"}),w("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)])],8,E_),g.value?(P(),E("div",R_,[y.value?(P(),E("div",O_,"Loading...")):(P(),E(de,{key:1},[(P(!0),E(de,null,Se(p.value,ee=>(P(),E("button",{key:ee.relative_path,class:"artifact-item",onClick:Ce=>$(ee)},[w("span",B_,G(ee.name),1),w("span",$_,G(ee.created_at),1)],8,N_))),128)),p.value.length===0?(P(),E("div",z_,"No artifacts yet")):oe("",!0)],64))])):oe("",!0)]),o.value?(P(),E("button",{key:1,onClick:q,class:"send-circle-btn stop-btn",title:"Stop"},[...z[13]||(z[13]=[w("span",{class:"stop-icon"},"",-1)])])):(P(),E("button",{key:0,onClick:j,class:"send-circle-btn",disabled:!i.value.trim(),title:"Send"},[...z[12]||(z[12]=[w("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.3","stroke-linecap":"round","stroke-linejoin":"round"},[w("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),w("polyline",{points:"5 12 12 5 19 12"})],-1)])],8,G_))])],512)],4),_t(fl,{isOpen:_.value,title:k.value,message:b.value,confirmText:S.value?"Deleting...":"Delete",cancelText:"Cancel",showButtons:x.value,onConfirm:V,onCancel:N},null,8,["isOpen","title","message","confirmText","showButtons"])],64))}},F_=ct(H_,[["__scopeId","data-v-80d99790"]]),V_={class:"dashboard-container"},W_={class:"app-brand"},U_={key:0},Z_={class:"main-content-pane"},X_={key:0,class:"empty-state"},Y_={key:1,class:"detail-wrapper"},q_={key:2,class:"empty-state"},K_={__name:"DashboardLayout",setup(r){const e=H([]),t=H([]),a=H(null),n=H(!0),i=H([]),o=H({}),l=H(["NEEDS_REVIEW","ESCALATE_L2","DISMISS"]),s=H(!1),u=H(!1),c=()=>{s.value=!s.value},h=()=>{u.value=!u.value},v=x=>x==null?null:typeof x=="object"?x.id??x.alert_id??x.alertId??x["Alert ID"]??null:x,f=async()=>{try{const x=await hl();o.value=x,Array.isArray(x?.valid_statuses)&&x.valid_statuses.length>0&&(l.value=x.valid_statuses)}catch(x){console.error("Error fetching config:",x)}},d=async(x=null)=>{n.value=!0;try{const S=x?{date:x}:{};if(e.value=await Xh(S),g(),!x&&e.value.length>0){const T=[...new Set(e.value.map(D=>D.alert_date))].sort().reverse();i.value=T,T.length>0&&(y.value.date=T[0],g())}else g()}catch(S){console.error("Error fetching alerts:",S)}finally{n.value=!1}};ya(async()=>{await f(),await d()});const p=x=>{const S=v(x?.id!=null?x.id:x);a.value=S!=null?String(S):null,s.value||(s.value=!0)},y=H({search:"",status:"",type:"",date:""}),g=()=>{let x=e.value;const{search:S,status:T,type:D,date:L}=y.value;if(L&&(x=x.filter(A=>A.alert_date===L)),S){const A=S.toLowerCase();x=x.filter(I=>I.ticker.toLowerCase().includes(A))}T&&(x=x.filter(A=>A.status===T)),D&&(x=x.filter(A=>A.trade_type===D)),t.value=x},m=x=>{y.value.search=x,g()},_=x=>{y.value.status=x,g()},b=x=>{y.value.type=x,g()},k=x=>{y.value.date=x,d(x||null)};return(x,S)=>(P(),E("div",V_,[w("div",{class:ye(["sidebar-pane",{collapsed:s.value}])},[w("div",W_,[s.value?oe("",!0):(P(),E("h2",U_,[...S[1]||(S[1]=[xe("InsiderTrade",-1),w("span",{class:"brand-accent"},"Monitor",-1)])])),w("button",{class:"toggle-btn",onClick:c,title:"Toggle Sidebar"},G(s.value?"":""),1)]),w("div",{class:"sidebar-content",style:qt({opacity:s.value?0:1})},[_t(B0,{alerts:t.value,availableDates:i.value,selectedId:a.value,validStatuses:l.value,onSelect:p,onFilterSearch:m,onFilterStatus:_,onFilterType:b,onFilterDate:k},null,8,["alerts","availableDates","selectedId","validStatuses"])],4)],2),w("div",Z_,[n.value&&e.value.length===0?(P(),E("div",X_,[...S[2]||(S[2]=[w("p",null,"Loading alerts...",-1)])])):a.value!==null&&a.value!==void 0&&a.value!==""?(P(),E("div",Y_,[(P(),sa(v0,{key:a.value,alertId:a.value,onToggleAgent:h},null,8,["alertId"]))])):(P(),E("div",q_,[...S[3]||(S[3]=[w("div",{class:"empty-content"},[w("h3",null,"Select an alert to investigate"),w("p",null,"Choose an item from the sidebar to view metrics and news.")],-1)])]))]),_t(Rs,{name:"slide-panel"},{default:ei(()=>[u.value?(P(),sa(F_,{key:0,alertId:a.value,onClose:S[0]||(S[0]=T=>u.value=!1)},null,8,["alertId"])):oe("",!0)]),_:1})]))}},J_=ct(K_,[["__scopeId","data-v-5387ce4b"]]);export{J_ as default};
